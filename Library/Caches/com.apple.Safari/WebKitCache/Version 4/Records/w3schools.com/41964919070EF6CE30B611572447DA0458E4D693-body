!function e(n,t,i){function o(r,a){if(!t[r]){if(!n[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(d)return d(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var s=t[r]={exports:{}};n[r][0].call(s.exports,function(e){var t=n[r][1][e];return o(t?t:e)},s,s.exports,e,n,t,i)}return t[r].exports}for(var d="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,n,t){!function(n){var t=e("./lib/thirdpartypixels");t.getVarsFromScript("banner",n),t.fire()}(window)},{"./lib/thirdpartypixels":3}],2:[function(e,n,t){var i={APP_NAME:"banner",APP_VERSION:"1.0.60"};n.exports=i},{}],3:[function(e,n,t){var i=e("./consts"),o=e("./util"),d=e("../viewability"),r={startTime:+new Date,productDefinitions:!1,productList:[],functionList:[],getVarsFromVPAID:function(e,n){r.impType=e,r.win=n;var t="@adservedomain@";t=t!="@adservedomain"+"@"&&t?t:"a-nj.1rx.io";var i="@appbundle@";i=i!="@appbundle"+"@"&&i?i:"unknown";var o="@appid@";o=o!="@appid"+"@"&&o?o:"unknown";var d="@cid@";d=d!="@cid"+"@"&&d?d:"unknown";var a="@dealid@";a=a!="@dealid"+"@"&&a?a:"unknown";var c="@debug@";c=c!="@debug"+"@"&&c?c:"false",c="true"==c;var p="@device@";p=p!="@device"+"@"&&p?p:"unknown";var s="@divid@";s=s!="@divid"+"@"&&s?s:"unknown";var u="@domain@";u=u!="@domain"+"@"&&u?u:"unknown";var l="@dspid@";l=l!="@dspid"+"@"&&l?l:"unknown";var m="@ifa@";m=m!="@ifa"+"@"&&m?m:"unknown";var f="@cc@";f=f!="@cc"+"@"&&f?f:"unknown";var g="@includedPartnerProducts@";g=g!="@includedPartnerProducts"+"@"&&g?g:"";var b="@gdprproviders@";b=b!="@gdprproviders"+"@"&&b?b:"";var v="@gdpr@";v=v!="@gdpr"+"@"&&v?v:"false",v="true"==v;var I="@ip@";I=I!="@ip"+"@"&&I?I:"unknown";var y="@mediatype@";y=y!="@mediatype"+"@"&&y?y:"unknown";var R="@tagid@";R=R!="@tagid"+"@"&&R?R:"unknown";var C="@pubid@";C=C!="@pubid"+"@"&&C?C:"unknown";var U="@requestid@";U=U!="@requestid"+"@"&&U?U:"unknown";var P="@siteid@";P=P!="@siteid"+"@"&&P?P:"unknown";var h="@ssp@";h=h!="@ssp"+"@"&&h?h:"unknown";var w="@throttlerate@";w=w!="@throttlerate"+"@"&&w?w:"unknown",w=isNaN(w)?0:parseFloat(w);var _="@traffictype@";_=_!="@traffictype"+"@"&&_?_:"unknown";var D="@ua@";D=D!="@ua"+"@"&&D?D:"unknown";var x="@userid@";x=x!="@userid"+"@"&&x?x:"unknown";var A="@useridorig@";A=A!="@useridorig"+"@"&&A?A:"unknown",r.adservedomain=t,r.appbundle=i,r.appid=o,r.campaign=d,r.dealid=a,r.debug=c,r.device=p,r.divid=s,r.domain=u,r.dspid=l,r.ifa=m,r.cc=f,r.includedPartnerProducts=g,r.gdprProviders=b,r.gdpr=v,r.ip=I,r.media=y,r.placementid=R,r.pubid=C,r.requestid=U,r.siteid=P,r.sspid=h,r.throttlerate=w,r.traffictype=_,r.ua=D,r.userid=x,r.useridorig=A,r.debug&&r.debugDump()},getVarsFromScript:function(e,n){r.impType=e,r.win=n;for(var t=0;t<document.scripts.length;t++)try{var i=document.scripts[t].getAttribute("roneflag");if("C3EA9A8B-0564-4203-B3F4-3974489D02A6"==i){r.adservedomain=document.scripts[t].getAttribute("adservedomain")||"a-nj.1rx.io",r.appbundle=document.scripts[t].getAttribute("appbundle")||"unknown",r.appid=document.scripts[t].getAttribute("appid")||"unknown",r.campaign=document.scripts[t].getAttribute("campaign")||"unknown",r.dealid=document.scripts[t].getAttribute("dealid")||"unknown",r.debug=document.scripts[t].getAttribute("debug")||"false","true"==r.debug?r.debug=!0:r.debug=!1,r.device=document.scripts[t].getAttribute("device")||"unknown",r.divid=document.scripts[t].getAttribute("divid")||"unknown",r.domain=document.scripts[t].getAttribute("domain")||"unknown",r.dspid=document.scripts[t].getAttribute("dspid")||"unknown",r.ifa=document.scripts[t].getAttribute("ifa")||"unknown",r.cc=document.scripts[t].getAttribute("cc")||"unknown",r.includedPartnerProducts=document.scripts[t].getAttribute("includedPartnerProducts")||"",r.gdprProviders=document.scripts[t].getAttribute("gdprproviders")||"",r.gdpr=document.scripts[t].getAttribute("gdpr")||"false","true"==r.gdpr?r.gdpr=!0:r.gdpr=!1,r.ip=document.scripts[t].getAttribute("ip")||"unknown",r.media=document.scripts[t].getAttribute("media")||"unknown",r.placementid=document.scripts[t].getAttribute("placementid")||"unknown",r.pubid=document.scripts[t].getAttribute("pubid")||"unknown",r.requestid=document.scripts[t].getAttribute("requestid")||"unknown",r.siteid=document.scripts[t].getAttribute("siteid")||"unknown",r.sspid=document.scripts[t].getAttribute("sspid")||"unknown",r.throttlerate=document.scripts[t].getAttribute("throttlerate")||0,r.traffictype=document.scripts[t].getAttribute("traffictype")||"unknown",r.ua=document.scripts[t].getAttribute("ua")||"unknown",r.userid=document.scripts[t].getAttribute("userid")||"unknown",r.useridorig=document.scripts[t].getAttribute("useridorig")||"unknown",r.ua=decodeURIComponent(r.ua);break}}catch(o){continue}r.debug&&r.debugDump()},debugDump:function(){console.log("RX Debug Mode"),console.log("adservedomain: "+r.adservedomain),console.log("appbundle: "+r.appbundle),console.log("appid: "+r.appid),console.log("campaign: "+r.campaign),console.log("dealid: "+r.dealid),console.log("debug: "+r.debug),console.log("device: "+r.device),console.log("divid: "+r.divid),console.log("domain: "+r.domain),console.log("dspid: "+r.dspid),console.log("ifa: "+r.ifa),console.log("cc: "+r.cc),console.log("impType: "+r.impType),console.log("includedPartnerProducts: "+r.includedPartnerProducts),console.log("gdprProviders: "+r.gdprProviders),console.log("gdpr: "+r.gdpr),console.log("ip: "+r.ip),console.log("media: "+r.media),console.log("placementid: "+r.placementid),console.log("pubid: "+r.pubid),console.log("requestid: "+r.requestid),console.log("siteid: "+r.siteid),console.log("sspid: "+r.sspid),console.log("throttlerate: "+r.throttlerate),console.log("traffictype: "+r.traffictype),console.log("ua: "+r.ua),console.log("userid: "+r.userid),console.log("useridorig: "+r.useridorig)},callIASRTDS:function(){r.win.rxIASEvent=function(e,n,t,d,a,c,p,s,u){var l="//"+r.adservedomain+"/trackedevent/doc?doc_type=iasrtds&doc_version=1";l+="&ssp="+r.sspid,l+="&pub="+encodeURIComponent(r.pubid),l+="&site="+encodeURIComponent(r.siteid),l+="&appid="+encodeURIComponent(r.appid),l+="&appbundle="+encodeURIComponent(r.appbundle),l+="&placementid="+encodeURIComponent(r.placementid),l+="&requestid="+encodeURIComponent(r.requestid),l+="&userid="+encodeURIComponent(r.userid),l+="&useridorig="+encodeURIComponent(r.useridorig),l+="&domain="+encodeURIComponent(o.GetDomain()),l+="&ifa="+encodeURIComponent(r.ifa),l+="&dealid="+encodeURIComponent(r.dealid),l+="&traffictype="+r.traffictype,l+="&elapsedms="+(+new Date-r.startTime),l+="&iasrequestid="+encodeURIComponent(u),l+="&eventtype="+e,l+="&scriptversion="+i.APP_VERSION;var m=document.createElement("iframe");m.style.display="none",m.style.visibility="hidden",m.src=l,document.body.appendChild(m)};var e="//pixel.adsafeprotected.com/jload?anId=925612";e+="&advId="+encodeURIComponent(r.sspid),e+="&pubId="+encodeURIComponent(r.pubid),e+="&campId="+encodeURIComponent(r.siteid),e+="&chanId="+encodeURIComponent(r.appid),e+="&placementId="+encodeURIComponent(r.placementid),e+="&adsafe_par",e+="&impId="+encodeURIComponent(r.requestid),e+="&uId="+encodeURIComponent(r.userid),e+="&planId="+r.traffictype;var n=document.createElement("script");n.src=e,"undefined"!=typeof n.addEventListener&&n.addEventListener("error",function(){}),document.documentElement.appendChild(n)},callForensiq:function(){var e="https://c.fqtag.com/tag/implement-r.js?";if(e+="s="+encodeURIComponent(r.requestid),e+="&p="+r.sspid,e+="&a="+encodeURIComponent(r.pubid),e+="&cmp="+r.dspid,e+="&org=fqQ7TAK5Blw7Bviz4dAn",e+="&rt=display",e+="&sl=1",e+=r.traffictype.search("Banner")>=0?"&fmt=banner":"&fmt=video",e+="&c4="+encodeURIComponent(r.userid),"app"==r.media){e+="&app="+encodeURIComponent(r.appbundle),e+="&c1="+encodeURIComponent(r.appid);var n=navigator.userAgent||navigator.vendor||window.opera,t=n.toLowerCase();/ipad|iphone|ipod/.test(t)&&!window.MSStream?e+="&aid="+encodeURIComponent(r.ifa):t.indexOf("android")>-1?e+="&gid="+encodeURIComponent(r.ifa):t.indexOf("windows phone")>-1&&(e+="&wid="+encodeURIComponent(r.ifa)),e+="&c2="+encodeURIComponent(r.ifa)}else e+="&rd="+o.GetDomain(),e+="&c1="+encodeURIComponent(r.siteid);e+="&c3="+encodeURIComponent(r.traffictype),e+="&ad="+encodeURIComponent(r.divid),e+="&fq=1",e+="&cb="+ +new Date;var i=document.createElement("script");i.src=e,"undefined"!=typeof i.addEventListener&&i.addEventListener("error",function(){}),document.documentElement.appendChild(i)},callFraudlogix:function(){var e="https://pixel.yabidos.com/fltiu.js?";e+="qid=43130313f503230313f5631373",e+="&cid=716",e+="&x="+encodeURIComponent(r.traffictype+":"+r.sspid),e+="&p="+encodeURIComponent(r.pubid),e+="&nai="+r.dspid,e+="&adtg="+encodeURIComponent(r.divid),e+="&ip="+encodeURIComponent(r.ip),e+="&ua="+encodeURIComponent(r.ua),"app"==r.media?(e+="&s="+encodeURIComponent(r.appbundle),e+="&ai="+encodeURIComponent(r.appid),e+="&di="+encodeURIComponent(r.ifa)):(e+="&s="+o.GetDomain(),e+="&si="+encodeURIComponent(r.siteid)),e+="&cb="+ +new Date;var n=document.createElement("script");n.src=e,"undefined"!=typeof n.addEventListener&&n.addEventListener("error",function(){}),document.documentElement.appendChild(n)},callDVIQMRTDS:function(e){var n="//cdn.doubleverify.com/dvtp_src.js?";n+="ctx=2908533&",n+="cmp=2736445&",n+="sid=24324&",n+="plc=DV-RTHM20170324001&",n+="advid=2908534&",n+="region=30&",n+="btreg="+r.divid+"&",n+="btadsrv=rhythmone&",n+="app=appid&",n+="sup=sspid&",n+="DVP_DV_TT=1&",n+="DVP_DV_CT=1&",n+="DVP_PP_BUNDLE_ID="+encodeURIComponent(r.appid)+"&",n+="DVP_RO_SSPID="+r.sspid+"&",n+="DVP_PP_ORTB_PUB_ID="+encodeURIComponent(r.pubid)+"&",n+="DVP_RO_SITEID="+encodeURIComponent(r.siteid)+"&",n+="DVP_RO_TRAFFIC="+r.traffictype+"&",n+="DVP_PP_DEAL_ID="+encodeURIComponent(r.dealid)+"&",n+="DVPX_PP_IMP_ID="+r.requestid+"&",n+="DVPX_PP_UID="+r.userid+"&",n+="DVP_RO_CDID="+encodeURIComponent(r.ifa)+"&",n+="DVPX_PP_AUCTION_UA="+encodeURIComponent(r.ua)+"&",n+="DVP_PP_AUCTION_IP="+r.ip+"&",n+="app"==r.media?"turl="+encodeURIComponent(r.appbundle)+"&":"turl="+encodeURIComponent(r.domain)+"&",n+="dvtagver=6.1.src";var t=document.createElement("script");t.src=n,"undefined"!=typeof t.addEventListener&&t.addEventListener("error",function(){}),document.documentElement.appendChild(t)},reportRXViewability:function(e){o.RAEvent("rx_viewabilitytest_data_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime,+new Date-r.startTime,JSON.stringify(e))},callRXViewability:function(){d(r.win,r.placementid,r.pubid,r.reportRXViewability)},callMoat:function(){var e="https://z.moatads.com/rhythmonedisplay618355851184/moatad.js";e+="#",e+="moatClientLevel1="+r.sspid+"&",e+="moatClientLevel2="+encodeURIComponent(r.pubid)+"&",e+="moatClientLevel3="+encodeURIComponent(r.siteid)+"&",e+="moatClientLevel4="+encodeURIComponent(r.appid)+"&",e+="moatClientSlicer1="+r.traffictype+"&",e+="zMoatRequest="+r.requestid+"&",e+="zMoatUserOrig="+r.useridorig+"&",e+="zMoatUser="+r.userid+"&",e+="zMoatIFA="+r.ifa+"&",e+="zMoatDomain="+o.GetDomain()+"&",e+="zMoatDID="+r.dealid;var n=document.createElement("script");n.src=e,"undefined"!=typeof n.addEventListener&&n.addEventListener("error",function(){}),document.documentElement.appendChild(n)},configureProduct:function(e){(r.debug||!r.gdpr||r.gdprProviderList.indexOf(e)>=0)&&(r.productList.push(r.productDefinitions[e].key),r.functionList.push(r.productDefinitions[e]["function"]))},fire:function(){var e=Math.random(),n=e<=r.throttlerate;if(r.debug){var t=n?"true":"false";console.log("ticket: "+e+" passed: "+t+" debug mode forcing a pass"),n=!0}r.productDefinitions={ias:{key:"partner:IAS|product:RTDS|method:JS","function":r.callIASRTDS},dv:{key:"partner:DoubleVerify|product:RTDS|method:JS","function":r.callDVIQMRTDS},moat:{key:"partner:Moat|product:Analytics|method:JS","function":r.callMoat},forensiq:{key:"partner:Forensiq|product:Forensiq|method:JS","function":r.callForensiq},fraudlogix:{key:"partner:FraudLogix|product:FraudLogix|method:JS","function":r.callFraudlogix}},r.includedPartnerProducts&&(r.productList=r.includedPartnerProducts.split(",")),r.gdprProviders&&(r.gdprProviderList=r.gdprProviders.split(",")),"video"==r.impType?r.configureProduct("dv"):n&&(r.configureProduct("ias"),r.configureProduct("dv"),(0==Math.floor(10*e)||r.debug)&&r.configureProduct("moat")),r.debug&&console.log("firing: "+r.productList.join(","));var i="//"+r.adservedomain+"/trackedevent/doc?doc_type=thirdpartybeacon&doc_version=8";i+="&ssp="+r.sspid,i+="&dsp="+r.dspid,i+="&pub="+encodeURIComponent(r.pubid),i+="&site="+encodeURIComponent(r.siteid),i+="&appid="+encodeURIComponent(r.appid),i+="&appbundle="+encodeURIComponent(r.appbundle),i+="&placementid="+encodeURIComponent(r.placementid),i+="&requestid="+encodeURIComponent(r.requestid),i+="&userid="+encodeURIComponent(r.userid),i+="&useridorig="+encodeURIComponent(r.useridorig),i+="&domain="+encodeURIComponent(o.GetDomain()),i+="&ifa="+encodeURIComponent(r.ifa),i+="&cc="+r.cc,i+="&dealid="+encodeURIComponent(r.dealid),i+="&traffictype="+r.traffictype,i+="&gdpr="+(r.gdpr?"1":"0"),i+="&productlist="+r.productList.join(","),i+="&starttime="+r.startTime;var d=document.createElement("iframe");d.style.display="none",d.style.visibility="hidden",d.src=i,document.body.appendChild(d);for(var a=0;a<r.functionList.length;a++)r.functionList[a]()},inhouseViewabilityTest:function(){o.RAEvent("rx_inhouseviewabilitytest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callIASRTDS(),r.callDVIQMRTDS(),r.callRXViewability()},iasTest:function(){o.RAEvent("rx_iastest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callIASRTDS()},forensiqTest:function(){o.RAEvent("rx_forensiqtest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callForensiq()},fraudlogixTest:function(){o.RAEvent("rx_fraudlogixtest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callFraudlogix()},dvIQMRTDSTest:function(){o.RAEvent("rx_dviqmrtdstest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callDVIQMRTDS()},moatTest:function(){o.RAEvent("rx_moattest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callMoat()}};n.exports=r},{"../viewability":6,"./consts":2,"./util":4}],4:[function(e,n,t){var i=e("./consts");n.exports={GetDomain:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length>0){var e=location.ancestorOrigins[location.ancestorOrigins.length-1];return e.replace(/.*?:\/\//g,"")}return location.hostname},RAEvent:function(e){var n=Array.from(arguments);n=n.slice(1),n.unshift(this.GetDomain()),n.unshift(i.APP_VERSION);var t=20,o=n.length<t?n.length:t,d="//rgaudit.1rx.io/rhythmanalytics/doc?hit_type=event";d+="&tracking_id="+e;for(var r=0;r<o;r++)d+="&dimension"+r+"="+n[r];var a=document.createElement("iframe");a.style.display="none",a.style.visibility="hidden",a.src=d,document.body.appendChild(a)}}},{"./consts":2}],5:[function(e,n,t){function i(){var e=(new Date).getTime();"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:3&t|8).toString(16)});return n}function o(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function d(e,n){"string"!=typeof n&&(n=document.location.href.toString());var t=new RegExp("[?&]"+e+"($|&|=([^&]*))","i"),i=t.exec(n);if(i instanceof Array)return"undefined"!=typeof i[2]&&(i[2]=decodeURIComponent(i[2])),i[2]}function r(e,n,t){var i;"function"==typeof document.addEventListener?i="addEventListener":document.attachEvent&&(i="attachEvent",n="on"+n),e[i](n,t)}function a(e,n){var t=e.innerWidth||n.body.clientWidth,i=e.innerHeight||n.body.clientHeight,o="undefined"!=typeof e.pageXOffset?e.pageXOffset:n.body.scrollLeft?n.body.scrollLeft:0,d="undefined"!=typeof e.pageYOffset?e.pageYOffset:n.body.scrollTop?n.body.scrollTop:0;return[o,d,o+t,d+i]}function c(e){for(var n=0,t=0,i=e.offsetWidth,o=e.offsetHeight;null!==e.offsetParent;)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return[n,t,n+i,t+o]}function p(e,n){return n.documentElement.clientHeight?n.documentElement.clientHeight:e.innerHeight?e.innerHeight:void 0}function s(e,n){return e[0]<n[2]&&e[2]>n[0]&&e[1]<n[3]&&e[3]>n[1]}n.exports={uuid:i,forEach:o,queryString:d,addEvent:r,getPageRect:a,getElementRect:c,rectsIntersect:s,getViewPortHeight:p}},{}],6:[function(e,n,t){function i(e,n,t){var i=0,o=S.getViewPortHeight(n,t),d=e.getBoundingClientRect();return i=((Math.min(o,d.bottom)-Math.max(d.top,0))/(d.height||d.bottom-d.top)).toFixed(2),i=Math.min(Math.max(i,0),1)}function o(e){try{v=JSON.parse(JSON.stringify(I)),_&&w&&(I.isPageVisible=document[w]?N.NO:N.YES),h&&(R=I.visibilityPercentage=i(h,f,document)||0,I.visibilityPercentage>=.75?I.visibilityPercentage=1:I.visibilityPercentage>=.5?I.visibilityPercentage=.75:I.visibilityPercentage>=.25?I.visibilityPercentage=.5:I.visibilityPercentage>0?I.visibilityPercentage=.25:I.visibilityPercentage=0,I.isAdVisible=I.visibilityPercentage>=D&&(!h.style.opacity||1===parseInt(h.style.opacity))?N.YES:N.NO),C&&U&&P&&(y=I.iframeVisibilityPercentage=i(U,P,P.document),I.iframeVisibilityPercentage>=.75?I.iframeVisibilityPercentage=1:I.iframeVisibilityPercentage>=.5?I.iframeVisibilityPercentage=.75:I.iframeVisibilityPercentage>=.25?I.iframeVisibilityPercentage=.5:I.iframeVisibilityPercentage>0?I.iframeVisibilityPercentage=.25:I.iframeVisibilityPercentage=0,I.isIframeVisible=I.iframeVisibilityPercentage>=D&&(!U.style.opacity||1===parseInt(U.style.opacity))?N.YES:N.NO),I.viewable=I.isPageVisible!==N.YES||I.isAdVisible!==N.YES||I.isIframe&&!I.isIframeVisible?N.NO:!C||U&&P?N.YES:N.UNKNOWN,JSON.stringify(I)!==JSON.stringify(v)?d(e):"unload"!==e&&"init"!==e||d(e)}catch(n){}}function d(e){var n=(new Date).getTime(),t=location.ancestorOrigins&&location.ancestorOrigins.length?location.ancestorOrigins[location.ancestorOrigins.length-1]:"",i={ancestor:encodeURIComponent(t),trigger:e,triggerCount:++T,timeSinceStart:n-k,isPageVisible:I.isPageVisible,isAdVisible:I.isAdVisible,isIframe:I.isIframe,isIframeVisible:I.isIframeVisible,iframeVisibilityPercentage:I.iframeVisibilityPercentage,ivp:y,visibilityPercentage:I.visibilityPercentage,vp:R,viewable:I.viewable};m(i)}function r(){I={isPageVisible:N.UNKNOWN,isAdVisible:N.UNKNOWN,visibilityPercentage:1,iframeVisibilityPercentage:1,isIframe:C,isIframeVisible:N.UNKNOWN,viewable:N.UNKNOWN},v={}}function a(){"undefined"!=typeof document.hidden?(w="hidden",_="visibilitychange"):"undefined"!=typeof document.mozHidden?(w="mozHidden",_="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(w="msHidden",_="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(w="webkitHidden",_="webkitvisibilitychange"),_&&w&&S.addEvent(document,_,function(){o("visibilityChange")})}function c(){x="boolean"!=typeof g.poll||g.poll,E="number"==typeof g.pollInterval?g.pollInterval:1e3,x&&(A=setInterval(function(){o("poll")},E))}function p(){S.addEvent(f,"beforeunload",function(){V||(V=!0,o("unload"))})}function s(){var e=document.currentScript||function(){var e=document.getElementsByTagName("script"),n=e[e.length-1];return S.forEach(e,function(e){e.src&&S.queryString("pub",e.src)===q&&S.queryString("placement",e.src)===O&&(n=e)}),n}();e&&(h=e.parentElement)}function u(){if(C)try{U=f.frameElement,P=f.parent}catch(e){}}function l(e,n,t,i){f=e,m=i,O=n,q=t,g=f["__viewabilityConfig_"+O]||f.__viewabilityConfig||{data:{app:"unknown",domain:document.domain}},C=f!==f.top,k=(new Date).getTime(),b=S.uuid(),T=0,D="number"==typeof g.visibilityThreshold?g.visibilityThreshold:.5,y=0,R=0,r(),a(),c(),p(),s(),u(),setTimeout(o,0,"init")}var m,f,g,b,v,I,y,R,C,U,P,h,w,_,D,x,A,E,V,T,k,S=(e("./lib/consts"),e("./lib/util_viewability")),O="",q="",N={NO:0,YES:1,UNKNOWN:2};n.exports=l},{"./lib/consts":2,"./lib/util_viewability":5}]},{},[1]);