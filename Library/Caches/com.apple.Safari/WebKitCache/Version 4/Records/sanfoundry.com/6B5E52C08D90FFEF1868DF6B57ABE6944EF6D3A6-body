/* 2.3.3 */ var Adt1023 = true;
var a=!0;!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){return e(b[g][1][a]||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d={};d.VERSION="1.0.2",b.exports=d},{}],2:[function(a,b,c){function d(a,b){function c(a,c){var d;try{b.getComputedStyle?d=b.getComputedStyle(a,null)[c]:document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,"")[c]:a.currentStyle?(d=a.currentStyle[c],d?"auto"!=d&&"undefined"!=d&&"NaN"!=d||("height"==c?d=a.clientHeight:"width"==c&&(d=a.clientWidth)):"height"==c?d=a.clientHeight:"width"==c&&(d=a.clientWidth)):d=a.style[c]}catch(a){}return d}var d,f=0,g=0;try{void 0!==document.hidden?(d="hidden",visibility_change_event_name="visibilitychange"):void 0!==document.mozHidden?(d="mozHidden",visibility_change_event_name="mozvisibilitychange"):void 0!==document.msHidden?(d="msHidden",visibility_change_event_name="msvisibilitychange"):void 0!==document.webkitHidden&&(d="webkitHidden",visibility_change_event_name="webkitvisibilitychange")}catch(a){}var h=function(){var a=0;try{void 0===document.addEventListener&&void 0===document.attachEvent||void 0===d||(a=document[d]?2:1)}catch(b){a=0}return a}(),i=function(a){var b=-1,c=-1,d=-1,e=-1;try{if(a&&a.getBoundingClientRect){var f=a.getBoundingClientRect();if(f){b=f.left,c=f.top,b=Math.floor(b),c=Math.floor(c);var g=f.right,h=f.bottom;g=Math.floor(g),h=Math.floor(h),d=g-b,e=h-c,d>5e3&&(d=-1),e>5e3&&(e=-1)}}}catch(a){b=-1,c=-1,d=-1,e=-1}return[b,c,d,e]}(a),j=i[0],k=i[1],l=function(){var a=null;try{if(b.innerWidth&&"number"==typeof b.innerWidth&&(a=b.innerWidth),null===a){if(document.documentElement&&document.documentElement.clientWidth)a=document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)a=document.body.clientWidth;else try{a=c(document.getElementsByTagName("body")[0],"width")}catch(a){}if(!a||"100%"==a||"NaN"==a||"auto"==a||"undefined"==a||!Number(a))try{a=document.getElementsByTagName("body")[0].clientWidth}catch(a){}if(!a||"100%"==a||"NaN"==a||"auto"==a||"undefined"==a||!Number(a))try{a=document.documentElement.clientWidth}catch(a){}}}catch(b){a=null}if(a&&"100%"!=a&&"NaN"!=a&&"auto"!=a&&"undefined"!=a&&Number(a))try{a=Number(a)}catch(b){a=null}else a=null;return a>1e4&&(a=null),a}(),m=function(){var a=null;try{if(b.innerHeight&&"number"==typeof b.innerHeight&&(a=b.innerHeight),null===a){if(document.documentElement&&document.documentElement.clientHeight)a=document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)a=document.body.clientHeight;else try{a=c(document.getElementsByTagName("body")[0],"height")}catch(a){}if(!a||"100%"==a||"NaN"==a||"auto"==a||"undefined"==a||!Number(a))try{a=document.getElementsByTagName("body")[0].clientHeight}catch(a){}if(!a||"100%"==a||"NaN"==a||"auto"==a||"undefined"==a||!Number(a))try{a=document.documentElement.clientHeight}catch(a){}}}catch(b){a=null}if(a&&"100%"!=a&&"NaN"!=a&&"auto"!=a&&"undefined"!=a&&Number(a))try{a=Number(a)}catch(b){a=null}else a=null;return a>1e4&&(a=null),a}(),n=a.clientWidth,o=a.clientHeight,p=Math.ceil(n/2),q=Math.ceil(o/2),r=Math.ceil(l-p),s=Math.ceil(m-q),t=p,u=q,v=p,w=q,x=r,y=s;if(-1==j||"number"!=typeof j||isNaN(j)||-1==k||"number"!=typeof k||isNaN(k)||-1==l||"number"!=typeof l||isNaN(l)||-1==m||"number"!=typeof m||isNaN(m)||-1==t||"number"!=typeof t||isNaN(t)||-1==u||"number"!=typeof u||isNaN(u))f=2;else if(2!=h){var z=0,A=0;try{void 0!==b.screenX&&void 0!==b.screenY?(z=b.screenX,A=b.screenY):(z=b.screenLeft,A=b.screenTop)}catch(a){}var B=!1;(z<-3e4||A<-3e4)&&(B=!0);var C=l-j;C>n&&(C=n),C<0&&(C=0);var D=j+n;D>n&&(D=n),D<0&&(D=0);var E=m-k;E>o&&(E=o),E<0&&(E=0);var F=k+o;F>o&&(F=o),F<0&&(F=0);var G=Math.min(C,D),H=Math.min(E,F),I=G*H,J=n*o;g=J>0?Math.floor(I/J*100):0,0==B&&(l<t||m<u?f=0:j>=-1*v&&k>=-1*w?j<x&&k<y&&(f=1):f=g>=50?1:0)}return 0===f&&e.debug("not inView"),1===f&&e.debug("inView"),2===f&&e.debug("UNKNOWN"),{inView:f,viewablePercentage:g,method:2,px:j,py:k,wiw:l,wih:m,checkWidth:t,checkHeight:u,activeTab:h}}var e=a("./support/log.js"),f=a("./constants.js");d.VERSION=f.VERSION,d.Log=e,b.exports=d},{"./constants.js":1,"./support/log.js":3}],3:[function(a,b,c){function d(a,b){var c=[];void 0===b&&(b=!1);for(var d in a){var e=a[d];"object"==typeof e?e instanceof HTMLElement&&!b?c.push(e):e instanceof HTMLElement&&b?c.push(e.id):b?c.push(JSON.stringify(e)):c.push(JSON.parse(JSON.stringify(e))):c.push(e)}return c}function e(){this.snapshotDebug=!1,this.logs={},this.timeZero=Date.now(),this._loggedUEBU=[]}Date.now||(Date.now=function(){return(new Date).getTime()}),e.prototype.log=function(a,b){var c=["%c[Snapshot]","background: #008; color: #fff;"],e=d(arguments);if(c.concat(e),this.dispatch){var f=d(arguments,!0).join(" ");this.dispatch.publish(Constants.notificationEvents.logPublished,"log",f),this.logs[Date.now()]=["log",f]}},e.prototype.error=function(a,b){var c=["%c[Snapshot Error]","background: #008; color: #fff;"],e=d(arguments);if(c.concat(e),this.dispatch){var f=d(arguments,!0).join(" ");this.dispatch.publish(Constants.notificationEvents.logPublished,"error",f),this.logs[Date.now()]=["error",f]}},e.prototype.setDebug=function(a){this.snapshotDebug=a||!1},e.prototype.debug=function(){if(this.snapshotDebug){var a=["%c[Snapshot Debug]","background: #008; color: #fff;"],b=d(arguments);if(a.concat(b),this.dispatch){var c=d(arguments,!0).join(" ");this.dispatch.publish(Constants.notificationEvents.logPublished,"debug",c),this.logs[Date.now()]=["debug",c]}}},e.instance=null,e.singleton=function(){return null===this.instance&&(this.instance=new e),this.instance},b.exports=e.singleton()},{}],4:[function(a,b,c){var d={};d.VERSION="1.0.0",d.TIMEOUT=300,d.pixel={INTERVAL:300,DEV:{domain:"http://localhost:8001",src:"http://localhost:8001/test/dev/pixel.html"},PROD:{domain:"https://sdk.vindicosuite.com",src:"https://sdk.vindicosuite.com/js-viewability-pixel/latest/pixel.html"}},b.exports=d},{}],5:[function(a,b,c){(function(c){function d(){this.visible=null,this.__pixelFrame=null,this.__pixelSrc=e.pixel.PROD.src,this.__pixelDomain=e.pixel.PROD.domain,f.DEV&&(this.__pixelSrc=e.pixel.DEV.src,this.__pixelDomain=e.pixel.DEV.domain)}var e=a("./constants"),f=a("./version");d.prototype.start=function(a,b){this.__callback=a,this.__pixelFrame=document.createElement("iframe"),this.__pixelFrame.src=this.__pixelSrc,this.__pixelFrame.width=1,this.__pixelFrame.height=1,this.__pixelFrame.frameBorder=0,void 0===b?(null==document.body&&(document.body=document.createElement("body")),document.body.appendChild(this.__pixelFrame)):b.appendChild(this.__pixelFrame),this.__iid=setInterval(function(){(this.__pixelFrame.contentWindow||this.__pixelFrame.contentDocument).postMessage("visible",this.__pixelDomain)}.bind(this),e.pixel.INTERVAL),window.addEventListener("message",this.__monitor.bind(this))},d.prototype.__monitor=function(a){try{var b=JSON.parse(a.data);void 0!==b.visible&&this.visible!==b.visible&&(this.__callback(b.visible),this.visible=b.visible)}catch(a){}},d.prototype.stop=function(){clearInterval(this.__iid),this.__pixelFrame.parentElement.remove(this.__pixelFrame)},c.Pixel=d,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./constants":4,"./version":6}],6:[function(a,b,c){var d={};d.DEV=!1,d.PROD=!0,b.exports=d},{}],7:[function(a,b,c){(function(c){function d(a){this.runtime=new e(a)}var e=a("./adtricity.runtime.js"),f=a("./constants.js");d.prototype.VERSION=f.VERSION,d.prototype.setDebug=function(a){this.runtime.setDebug(a)},d.prototype.showDebugger=function(a){this.runtime.showDebugger(a)},d.prototype.addEventListener=function(a,b){this.runtime.addEventListener(a,b)},d.prototype.removeEventListener=function(a,b){this.runtime.removeEventListener(a,b)},d.prototype.adtPublishEvent=function(a,b){this.runtime.adtPublishEvent(a,b)},d.prototype.init=function(a,b,c,d,e){this.runtime.videoInit.apply(this.runtime,arguments)},d.prototype.complete=function(){this.runtime.metadata=null},d.prototype.impression=function(){};var g=function(){for(var a=document.getElementsByTagName("script"),b="",c="",d="",e=a.length-1;e>=0;e--)try{b=a[e].src,c="",d=b.indexOf("?")>0?b.split("?")[0]:b,d=d.substring(d.lastIndexOf("/")+1),b.indexOf("?")>0&&(c=b.split("?")[1]);var f="";c.indexOf("pt")>0&&(f=c.substring(c.indexOf("pt=")+3)),f.indexOf("&")>0&&(f=f.substring(0,f.indexOf("&")));var g="";c.indexOf("iid")>0&&(g=c.substring(c.indexOf("iid=")+4)),g.indexOf("&")>0&&(g=g.substring(0,g.indexOf("&")));var h="";if(c.indexOf("uebu")>0&&(h=c.substring(c.indexOf("uebu=")+5)),h.indexOf("&")>0&&(h=h.substring(0,h.indexOf("&"))),"verify.js"===d||"verify.dev.js"===d){if(""===c)break;if(""!==f&&""!==g&&""!==h)break}else b="",c="",d=""}catch(a){b="",c="",d=""}if(""!==b&&""!==d)try{var i="";if(b.indexOf("//")&&(i=b.substring(b.indexOf("//")+2)),i.indexOf("/")>0&&(i=i.substring(0,i.indexOf("/"))),i.indexOf("sdk.vindicosuite.com")>=0||i.indexOf("localhost")>=0)return b}catch(a){}return null}(),h=function(a){return"string"!=typeof a?{}:(a=a.substring(a.indexOf("?")+1),a=a.trim().replace(/^(\?|#)/,""),a?a.trim().split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];if(d=decodeURIComponent(d),"string"==typeof(e=void 0===e||"undefined"===e?null:decodeURIComponent(e))){var f=e.split(",");e=1===f.length?f[0]:f}return a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):{})}(g);c.adtricity=new d(h),b.exports=c.adtricity}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adtricity.runtime.js":8,"./constants.js":9}],8:[function(b,c,d){(function(d){function e(a){try{return a.element.ownerDocument.defaultView.self!==a.element.ownerDocument.defaultView.top}catch(a){return q.debug("vjs - _inIframe error "+a),!0}}function f(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function g(a){var b=!1,c=a.iid;if(a.isVideo){if(c&&"string"==typeof c&&c.indexOf("_")>=0){var d=c.split("_")[1];try{b="1"===d[1]&&"1"===d[2]&&"1"===d[3]}catch(a){}}}else a.isDisplay&&(b=1===a.parameters.dinf);return b}function h(){var a="http:";try{window.location.protocol&&"https:"===window.location.protocol&&(a="https:")}catch(a){}return a}function i(a){var b,c,d=null;try{b=a.ownerDocument,c=b.parentWindow||b.defaultView,d=c.top.location.hostname}catch(a){}return d}function j(a){this._dispatch=new n,q.log("Version: "+l.VERSION);var b=function(a){s.fireInfoPixel(this.runtime,a)};this.addEventListener(l.notificationEvents.adtricityInfoPixel,b.bind(this));var c=function(a){s.fireErrorPixel(this.runtime,a)};this.addEventListener(l.notificationEvents.adtricityErrorPixel,c.bind(this)),this.runtime={},this.runtime.parameters=a;var d=a.iid,j=d||"1457560481783_3763891219",k=document.getElementById(j);if(this.__iid=j,this.runtime.iid=j,k&&(this.__setCreativeElement(k),this.runtime.inIframe=e(this.runtime)),r.runtime=this.runtime,r.setQueryStringURL(this.runtime.parameters.uebu),q.debug("vjs - UEBU query params: "+this.runtime.parameters.uebu),this.runtime.snvd=0,this.runtime.snvd_callback="",this.runtime.snvd_ping=1,this.runtime.snvd_timeout=300,this.runtime.vsel=0,this.runtime.parameters.vsel&&(this.runtime.vsel=parseInt(this.runtime.parameters.vsel)),this.runtime.adWidth=0,this.runtime.adHeight=0,this.runtime.isDisplay=parseInt(this.runtime.parameters.pt)===l.adtricity.DISPLAY,this.runtime.isVideo=!this.runtime.isDisplay,this.runtime.constants=l.video,this.runtime.adImpressionReceived=!1,this.runtime.adErrorReceived=!1,this.runtime.isDisplay?1!==this.runtime.snvd&&s.fire(l.Pixel.DISPLAY.Injection,{}):s.fire(l.Pixel.VIDEO.Injection,{}),this.__setupMacros(),this.runtime.isDisplay){this.runtime.constants=l.display;try{this.runtime.parameters.snvd&&(this.runtime.snvd=parseInt(this.runtime.parameters.snvd)),q.debug("vjs - snvd: "+this.runtime.snvd),this.runtime.parameters.snvd_callback&&(this.runtime.snvd_callback=this.runtime.parameters.snvd_callback),q.debug("vjs - snvd_callback: "+this.runtime.snvd_callback),this.runtime.parameters.snvdpi&&(this.runtime.snvd_ping=parseInt(this.runtime.parameters.snvdpi)),q.debug("vjs - snvd_ping: "+this.runtime.snvd_ping),this.runtime.parameters.snvdto&&(this.runtime.snvd_timeout=parseInt(this.runtime.parameters.snvdto)),q.debug("vjs - snvd_timeout: "+this.runtime.snvd_timeout)}catch(a){this.runtime.snvd_ping=1,this.runtime.snvd_timeout=300}1===this.runtime.snvd&&this.runtime.snvd_callback&&"string"==typeof this.runtime.snvd_callback&&""!==this.runtime.snvd_callback&&s.fire(l.Pixel.SNVD_INIT)}if(this.runtime.mobile=f(),this.runtime.useInfoPixels=g(this.runtime),this.runtime.infoPixels=[],this.runtime.errorPixels=[],this.runtime.protocol=h(),this.runtime.determinedDomain=i(this.runtime.element),this.events=new t(this._dispatch,this.runtime),this.runtime.events=this.events,this.runtime.isProduction=this.setProduction(),this.setDebug(this.runtime.parameters.debug),q.runtime=this.runtime,q.dispatch=this._dispatch,this.runtime.element){var m,o=0,p=0,u=0,v=0;try{o=parseInt(this.runtime.parameters.adw),p=parseInt(this.runtime.parameters.adh),"number"==typeof o&&(o=Math.floor(o)),"number"==typeof p&&(p=Math.floor(p)),m=this.runtime.element.getBoundingClientRect(),u=Math.floor(m.width),v=Math.floor(m.height)}catch(a){}if(0===o||0===u||0===p||0===v){if(q.debug("vjs - error SizeBelowMin"),this._dispatch&&this.adtPublishEvent(l.notificationEvents.adtricityErrorPixel,l.pixelCodes.error.SizeBelowMin),(0===u||0===v)&&this.runtime.inIframe)for(var w=this.runtime.element;w.parentElement;){w=w.parentElement;try{var x=w.getBoundingClientRect(),y=Math.floor(x.width),z=Math.floor(x.height);0===u&&0!==y&&(u=y),0===v&&0!==z&&(v=z)}catch(a){}}0===o&&0!==u&&0===p&&0!==v&&(o=u,p=v)}o!==u&&(o=Math.min(o,u)),p!==v&&(p=Math.min(p,v)),this.runtime.adWidth=o,this.runtime.adHeight=p,r.setValue("ad_width",this.runtime.adWidth),r.setValue("ad_height",this.runtime.adHeight),this.start()}else this.debug&&q.debug("Debug enabled")}function k(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(d);for(var e=c.length-1;e>=0;e--)b.call(a,c[e])}var l=b("./constants.js"),m=b("./monitor/monitor"),n=b("./notification/notification.js"),o=b("./../node_modules/geometric-snapshot/src/geometric.js"),p=b("./support/debug.ui.js"),q=b("./support/log.js"),r=b("./tracking/uebu.js"),s=b("./tracking/pixel.js"),t=b("./monitor/events");j.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},j.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},j.prototype.adtPublishEvent=function(a,b){this._dispatch&&this._dispatch.publish(a,b)},j.prototype.videoInit=function(a,b,c,d,f){if("string"==typeof d)r.addURL(d);else for(var h=0;h<d.length;h++)r.addURL(d[h]);q.debug("UEBU",d),this._sugrInitializationParameters=f,c&&void 0!==c&&(this.__iid=c),b.nodeName&&b.tagName?(q.debug("vjs - setCreativeElement(videoSlot)"),this.__setCreativeElement(b)):(q.debug("vjs - setCreativeElement(slot)"),this.__setCreativeElement(a)),this.runtime.inIframe=e(this.runtime),this.runtime.useInfoPixels=g(this.runtime),this.start()},j.prototype.start=function(){if(!this._started){this.monitor=new m(this.runtime.element,this.runtime),this.events.adtRequestFullscreen(),this.runtime.monitor=this.monitor;var a=function(a){this.__setCreativeElement(a.video),this.monitor.element=a.video};this.addEventListener("updateCreativeElement",a.bind(this));var b=function(a){q.debug("Viewable percentage",a)};this.monitor.addEventListener(l.notificationEvents.viewablePercentageChange,b.bind(this));var c=function(a){s.fireInfoPixel(this.runtime,a)};this.monitor.addEventListener(l.notificationEvents.adtricityInfoPixel,c.bind(this));var d=function(a){s.fireErrorPixel(this.runtime,a)};this.monitor.addEventListener(l.notificationEvents.adtricityErrorPixel,d.bind(this));var e=function(a){this.runtime.isVideo?this.events.adtHalfInView():this.runtime.isDisplay&&1===this.runtime.snvd&&this.runtime.snvd_callback&&"string"==typeof this.runtime.snvd_callback&&""!==this.runtime.snvd_callback&&(q.debug("vjs - adtHalfInView invoking snvd_callback function: "+this.runtime.snvd_callback),window[this.runtime.snvd_callback](),s.fire(l.Pixel.SNVD_INVIEW,{time:a}),this.monitor.stop())};this.monitor.addEventListener(l.notificationEvents.notifyAdtHalfInView,e.bind(this));var f=function(){1!==this.runtime.snvd&&s.fire(l.Pixel.InViewport)};this.monitor.addEventListener(l.notificationEvents.inviewport,f.bind(this));var g=function(a,b){this.runtime.isDisplay?(s.fire(l.Pixel.DISPLAY.Viewable,{tv:a,ttv:b}),this.monitor.stop()):s.fire(l.Pixel.VIDEO.Viewable,{tv:a,ttv:b})};this.monitor.addEventListener(l.notificationEvents.viewableThreshold,g.bind(this));var h=function(){var a=l.Pixel.VIDEO.Measurable;this.runtime.isDisplay&&(a=l.Pixel.DISPLAY.Measurable),s.fire(a)};if(this.monitor.addEventListener(l.notificationEvents.measurable,h.bind(this)),this.monitor.init(),this.runtime.adImpressionReceived&&this.monitor.onAdImpressionReceived(),this.__enabledMonitorDebugUI(),this.__enabledDebugLogUI(),this.runtime.isVideo){var i;try{(i=this.runtime.element.getBoundingClientRect())&&(this.runtime.adWidth=Math.floor(i.width),this.runtime.adHeight=Math.floor(i.height),r.setValue("ad_width",this.runtime.adWidth),r.setValue("ad_height",this.runtime.adHeight))}catch(a){}}var j=this.monitor.getSnapshotState();r.setValue("snapshot_viewability",j),this.runtime.isDisplay&&1!==this.runtime.snvd&&(j===l.snapshot.states.viewable?s.fire(l.Pixel.DISPLAY.SnaphotViewable,{}):j===l.snapshot.states.nonviewable&&s.fire(l.Pixel.DISPLAY.SnaphotNonViewable,{}));var k=function(a){q.debug("vjs - __nonviewabletimeUpdate ",a),this.runtime.isVideo?s.fire(l.Pixel.VIDEO.NonViewableTimeUpdate,{time:a}):this.runtime.isDisplay&&(1===this.runtime.snvd?s.fire(l.Pixel.SNVD_PING,{time:a}):s.fire(l.Pixel.DISPLAY.NonViewableTimeUpdate,{time:a}))};this.monitor.addEventListener(l.notificationEvents.nonviewabletimeUpdate,k.bind(this));var n=function(a){q.debug("vjs - __nonviewabletimeTotal ",a),this.runtime.isVideo?s.fire(l.Pixel.VIDEO.NonViewableTimeTotal,{time:a}):this.runtime.isDisplay&&1!==this.runtime.snvd&&s.fire(l.Pixel.DISPLAY.NonViewableTimeTotal,{time:a})};this.monitor.addEventListener(l.notificationEvents.nonviewabletimeTotal,n.bind(this));var o=function(a,b,c,d){q.debug("vjs - quartileUpdate "+a+" "+b);var e=l.Pixel.VIDEO.Quartiles[a].Viewable;b||(e=l.Pixel.VIDEO.Quartiles[a].NonViewable),s.fire(e,{qtv:c,ttv:d})};this.monitor.addEventListener(l.notificationEvents.quartilePublished,o.bind(this)),this.runtime.isDisplay&&1!==this.runtime.snvd&&(this.runtime.monitor.start(),this.runtime.monitor.onAdImpressionReceived(),this.runtime.adImpressionReceived=!0),this._started=!0}},j.prototype.setDebug=function(a){this.runtime.debug=a,q.setDebug(a),o.Log.setDebug(a),q.debug("vjs - debugEnabled "+a),a?(q.debug("vjs - Debug Enabled"),q.debug("Initialization Parameters: ",this.runtime.parameters),q.debug("Monitoring Element: ",this.runtime.element),q.debug("Determined Domain: ",this.runtime.determinedDomain)):!1===a&&(q.debug("Debug Disabled"),this.showDebugger(!1))},j.prototype.setProduction=function(){var b=!1;try{a&&(b=!0)}catch(b){}return q.debug("vjs - setProduction "+b),b},j.prototype.showDebugger=function(a){this.runtime.showDebugger=a,a?(q.debug("Debugger UI Enabled"),this.__enabledDebugLogUI(),this.__enabledMonitorDebugUI()):!1===a&&(q.debug("Debugger UI Disabled"),this.debugUI&&(this.debugUI.showLogger(!1),this.debugUI.remove()),this.debugUI=null)},j.prototype.__setupMacros=function(){r.setValue("adtricity_version",l.VERSION),r.setValue("adtricity_location",l.LOCATION),r.setValue("domain",this.runtime.determinedDomain),r.setValue("ad_width",this.runtime.adWidth),r.setValue("ad_height",this.runtime.adHeight),this.runtime.isDisplay?(r.setValue("sugr_location",l.uebu.DISPLAY.sls),r.setValue("sugr_version",l.uebu.DISPLAY.svn)):(r.setValue("sugr_location",l.uebu.VIDEO.sls),r.setValue("sugr_version",null),this._sugrInitializationParameters&&r.setValue("sugr_query_string",this._sugrInitializationParameters)),r.addEventArgument("iid",this.__iid),r.addEventArgument("vsel",this.runtime.vsel)},j.prototype.__enabledMonitorDebugUI=function(){if(this.monitor&&this.runtime.debug){this.debugUI||(this.debugUI=new p(this.runtime.element,this.runtime)),this.debugUI.show();var a=function(a){this.debugUI.update(a)};this.monitor.addEventListener(l.notificationEvents.viewablePercentageChange,a.bind(this))}},j.prototype.__enabledDebugLogUI=function(){if(this.monitor&&this.runtime.showDebugger){this.debugUI||(this.debugUI=new p(this.runtime.element,this.runtime)),this.debugUI.showUEBULogger(!0);var a=function(a,b){this.debugUI.prependToLogger("[ "+a+" ] "+b)};this.addEventListener(l.notificationEvents.logPublished,a.bind(this));var b=function(a,b,c){this.debugUI.prependToLogger("[ UEBU ] "+a),this.debugUI.appendUEBU(a,c)};this.addEventListener(l.notificationEvents.uebuPublished,b.bind(this)),k(q.logs,function(a){var b=q.logs[a];this.debugUI.prependToLogger("[ "+b[0]+" ] "+b[1])}.bind(this))}},j.prototype.__setCreativeElement=function(a){a||q.error("Invalid initialization element"),this.runtime.element=a,this.runtime.document=this.runtime.element.ownerDocument,this.runtime.window=this.runtime.document.parentWindow||this.runtime.document.defaultView,this.runtime.isMraid=!!this.runtime.window.mraid,this.runtime.window.mraid=null,this.runtime.isMraid?this.runtime.mraid=this.runtime.window.mraid:d.mraid&&(this.runtime.isMraid=!0,this.runtime.mraid=d.mraid)},c.exports=j}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./../node_modules/geometric-snapshot/src/geometric.js":2,"./constants.js":9,"./monitor/events":11,"./monitor/monitor":13,"./notification/notification.js":15,"./support/debug.ui.js":16,"./support/log.js":17,"./tracking/pixel.js":19,"./tracking/uebu.js":20}],9:[function(a,b,c){var d={};d.VERSION="2.3.3",d.LOCATION="4",d.sugrEvents={adtRequestFullscreen:"adtRequestFullscreen",adtHalfInView:"adtHalfInView"},d.notificationEvents={viewablePercentageChange:"viewablePercentageChange",viewableThreshold:"viewableThreshold",visibilityChange:"visibilityChange",logPublished:"logPublished",networkPublished:"networkEvent",uebuPublished:"uebuEvent",quartilePublished:"quartileEvent",nonviewabletimeUpdate:"nonviewabletimeUpdate",nonviewabletimeTotal:"nonviewabletimeTotal",inviewport:"inviewport",measurable:"measurableEvent",notifyAdtRequestFullscreen:"notifyAdtRequestFullscreen",notifyAdtHalfInView:"notifyAdtHalfInView",adtricityInfoPixel:"adtricityInfoPixel",adtricityErrorPixel:"adtricityErrorPixel"},d.viewabilityMethods={OBSERVER_MARKER:6,IFRAME_MARKER:5,MOBILE_VIEWABILITY_SDK:4,MRAID:3,GEOMETRIC:2,LEGACY:1},d.pixels={5310:"VideoNotinviewTimeUpdate",5311:"VideoNotinviewTimeTotal",5312:"DisplayNotinviewTimeUpdate",5313:"DisplayNotinviewTimeTotal",5320:"Adtricity_Info",5330:"Adtricity_Error",5340:"Adtricity_InViewport",5300:"Adtricity_Loaded",5351:"Adtricity_VideoInjection",5303:"Adtricity_VideoViewable",5307:"Adtricity_VideoMeasurable",5352:"Adtricity_Quartile_0_Viewable",5353:"Adtricity_Quartile_0_NonViewable",5354:"Adtricity_Quartile_25_Viewable",5355:"Adtricity_Quartile_25_NonViewable",5356:"Adtricity_Quartile_50_Viewable",5357:"Adtricity_Quartile_50_NonViewable",5358:"Adtricity_Quartile_75_Viewable",5359:"Adtricity_Quartile_75_NonViewable",5360:"Adtricity_Quartile_100_Viewable",5361:"Adtricity_Quartile_100_NonViewable",5350:"Adtricity_DisplayInjection",5308:"Adtricity_DisplaySnaphotViewable",5309:"Adtricity_DisplaySnapshotNonViewable",5304:"Adtricity_DisplayViewable",5306:"Adtricity_DisplayMeasurable"},d.Pixel={},d.Pixel.INFO=5320,d.Pixel.ERROR=5330,d.Pixel.InViewport=5340,d.Pixel.LOADED=5300,d.Pixel.VIDEO={Injection:5351,Viewable:5303,Measurable:5307,NonViewableTimeUpdate:5310,NonViewableTimeTotal:5311,Quartiles:{0:{Viewable:5352,NonViewable:5353},25:{Viewable:5354,NonViewable:5355},50:{Viewable:5356,NonViewable:5357},75:{Viewable:5358,NonViewable:5359},100:{Viewable:5360,NonViewable:5361}}},d.Pixel.DISPLAY={Injection:5350,SnaphotViewable:5308,SnaphotNonViewable:5309,Viewable:5304,Measurable:5306,NonViewableTimeUpdate:5312,NonViewableTimeTotal:5313},d.Pixel.SNVD_INIT=5400,d.Pixel.SNVD_PING=5401,d.Pixel.SNVD_INVIEW=5402,d.VPAID={version:"2.0",wrapperLimit:3,event:{AdStarted:"AdStarted",AdStopped:"AdStopped",AdSkipped:"AdSkipped",AdLoaded:"AdLoaded",AdEnded:"AdEnded",AdLinearChange:"AdLinearChange",AdSizeChange:"AdSizeChange",AdExpandedChange:"AdExpandedChange",AdSkippableStateChange:"AdSkippableStateChange",AdDurationChange:"AdDurationChange",AdRemainingTimeChange:"AdRemainingTimeChange",AdVolumeChange:"AdVolumeChange",AdImpression:"AdImpression",AdClickThru:"AdClickThru",AdInteraction:"AdInteraction",AdVideoStart:"AdVideoStart",AdVideoFirstQuartile:"AdVideoFirstQuartile",AdVideoMidpoint:"AdVideoMidpoint",AdVideoThirdQuartile:"AdVideoThirdQuartile",AdVideoComplete:"AdVideoComplete",AdUserAcceptInvitation:"AdUserAcceptInvitation",AdUserMinimize:"AdUserMinimize",AdUserClose:"AdUserClose",AdPaused:"AdPaused",AdPlaying:"AdPlaying",AdError:"AdError",AdLog:"AdLog"}},d.events={event:{adtConfirmFullScreen:"adtConfirmFullScreen",adtRequestFullscreen:"adtRequestFullscreen",adtHalfInView:"adtHalfInView",visibilityChange:"visibilityChange",adtSignalVPAID:"adtSignalVPAID",adtRequestViewabilityData:"adtRequestViewabilityData",adtQueryViewabilityData:"adtQueryViewabilityData",adtViewabilityData:"adtViewabilityData",adtAddUEBUToArray:"adtAddUEBUToArray"}},d.snapshot={largeThreshold:30,threshold:50,states:{nonviewable:0,viewable:1,error:2}},d.pixelCodes={info:{VideoGeometricInstantiated:2100,VideoGeometricTrackingStart:2101,VideoGeometricTrackingStop:2102,VideoGeometricViewable:2103,VideoObserverInstantiated:2300,VideoObserverTrackingStart:2301,VideoObserverTrackingStop:2302,VideoObserverViewable:2303,VideoObserverContainerCreated:2304,VideoObserverMarkerCreated:2305,VideoObserverCommunicationInit:2306,VideoObserverRemoved:2307,VideoIframeInstantiated:2400,VideoIframeTrackingStart:2401,VideoIframeTrackingStop:2402,VideoIframeViewable:2403,VideoIframeContainerCreated:2404,VideoIframeMarkerCreated:2405,VideoIframeCommunicationInit:2406,VideoIframeRemoved:2407,DisplayGeometricInstantiated:3100,DisplayGeometricTrackingStart:3101,DisplayGeometricTrackingStop:3102,DisplayGeometricViewable:3103,DisplayObserverInstantiated:3300,DisplayObserverTrackingStart:3301,DisplayObserverTrackingStop:3302,DisplayObserverViewable:3303,DisplayObserverContainerCreated:3304,DisplayObserverMarkerCreated:3305,DisplayObserverCommunicationInit:3306,DisplayObserverRemoved:3307,DisplayIframeInstantiated:3400,DisplayIframeTrackingStart:3401,DisplayIframeTrackingStop:3402,DisplayIframeViewable:3403,DisplayIframeContainerCreated:3404,DisplayIframeMarkerCreated:3405,DisplayIframeCommunicationInit:3406,DisplayIframeRemoved:3407},error:{SizeBelowMin:100,ViewabilityInit:200,MarkersInit:300,MarkersInview:301,MarkersStop:302,MarkersInitViewabilityPixels:303,MarkersCreateMarker:304}},d.markers={count:{DISPLAY:2,VIDEO:4},settings:{DEV:{markerSize:40},PROD:{markerSize:1}},positions:{VIDEO:{top:1,left:2,right:3,bottom:4},DISPLAY:{sideA:1,sideB:2}}},d.uebu={DISPLAY:{sls:0,svn:"NON_SUGR"},VIDEO:{sls:3}},d.adtricity={DISPLAY:3,VAST:0,VPAID:2},d.display={updateInterval:100,viewableDuration:1e3,viewableAreaThreshold:50},d.video={updateInterval:200,viewableDuration:2e3,viewableAreaThreshold:50},b.exports=d},{}],10:[function(a,b,c){function d(){this.useragent=navigator.userAgent.toLowerCase();try{void 0!==document.hidden||void 0!==document.mozHidden||void 0!==document.msHidden||document.webkitHidden}catch(a){}}var e=a("./../support/log.js");d.prototype.setUserAgent=function(a){this.useragent=a.toLowerCase()},d.resetUserAgent=function(){this.useragent=navigator.userAgent.toLowerCase()},d.prototype.isOSWindows=function(){return this.useragent.indexOf("windows")>=0},d.prototype.isOSMac=function(){return this.useragent.indexOf("macintosh")>=0},d.prototype.isOSOther=function(){return!this.isOSWindows()&&!this.isOSMac()},d.prototype.isBrowserInternetExplorer=function(){return this.useragent.indexOf("trident/")>=0},d.prototype.isBrowserIE11=function(){return this.useragent.indexOf("trident/7")>=0},d.prototype.isBrowserMicrosoftEdge=function(){return this.useragent.indexOf("edge/")>=0},d.prototype.isBrowserChrome=function(){return this.useragent.indexOf("chrome/")>=0&&this.useragent.indexOf("edge/")<0&&this.useragent.indexOf("opera/")<0&&this.useragent.indexOf("opr/")<0},d.prototype.isBrowserFirefox=function(){return this.useragent.indexOf("firefox/")>=0},d.prototype.isBrowserSafari=function(){return this.useragent.indexOf("safari/")>=0&&this.useragent.indexOf("chrome/")<0&&this.useragent.indexOf("edge/")<0},d.prototype.isBrowserOpera=function(){return this.useragent.indexOf("opera/")>=0||this.useragent.indexOf("opr")>=0},d.prototype.isIntersectionObserverSupported=function(){var a=!1;try{if(this.isBrowserChrome())this.useragent.substring(this.useragent.indexOf("chrome/")+7).split(".")[0]>=51&&IntersectionObserver&&(a=!0);else if(this.isBrowserFirefox()){var b=this.useragent.substring(this.useragent.indexOf("firefox/")+8).split(".")[0];b>=52&&IntersectionObserver&&(a=!0)}else if(this.isBrowserOpera())IntersectionObserver&&(a=!0);else if(this.isBrowserMicrosoftEdge()){var c=this.useragent.substring(this.useragent.indexOf("edge/")+5).split(".")[0];c>=15&&IntersectionObserver&&(a=!0)}}catch(a){e.debug("vjs - Environment.isIntersectionObserverSupported error "+a.message)}return a},
d.prototype.isMobile=function(){var a=!1;try{(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(this.useragent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(this.useragent.substr(0,4)))&&(a=!0)}catch(a){e.debug("vjs - Environment.isMobile error "+a.message)}return a},d.prototype.isIframeSupported=function(){var a=!1;try{if(!(window.requestAnimationFrame||window.mozRequestAnimationFrame&&window.webkitRequestAnimationFrame))return!1;this.isBrowserSafari()&&this.useragent.indexOf("version/")>=0&&this.useragent.substring(this.useragent.indexOf("version/")+8).split(".")[0]>=10&&(a=!0),this.isBrowserFirefox()&&(a=!0),this.isBrowserChrome()&&(this.isMobile()||(a=!0))}catch(a){e.debug("vjs - Environment.isIframeSupported error "+a.message)}return a},d.prototype.__getOSCode=function(){var a="f";try{this.isOSWindows()&&(a="1"),this.isOSMac()&&(a="2"),this.isOSOther()&&(a="3")}catch(a){e.debug("vjs - Environment.__getOSCode error "+a.message)}return a},d.prototype.__getBrowserCode=function(){var a="f";try{this.isBrowserInternetExplorer()&&(a=1),this.isBrowserChrome()&&(a=2),this.isBrowserSafari()&&(a=3),this.isBrowserFirefox()&&(a=4),this.isBrowserOpera()&&(a=5),this.isBrowserIE11()&&(a=7),this.isBrowserMicrosoftEdge()&&(a=8)}catch(a){e.debug("vjs - Environment.__getBrowserCode error "+a.message)}return a},d.prototype.getDebugString=function(a){var b="";try{b+=this.__getOSCode(),b+=this.__getBrowserCode(),b+=a.monitor._viewability.getDeterminationMethod(),b+=a.inIframe?"1":"0",4!==b.length&&(b="ffff")}catch(a){e.debug("vjs - getDebugString output error "+b+" "+a.message),b="ffff"}return b},d.instance=null,d.singleton=function(){return null===this.instance&&(this.instance=new d),this.instance},b.exports=d.singleton()},{"./../support/log.js":17}],11:[function(a,b,c){function d(a,b){this._dispatch=a,this._runtime=b,this._currentQuartile=-1,this._event=e.events.event,this._dispatch.subscribe(this._event.adtConfirmFullScreen,this.adtConfirmFullScreen.bind(this)),this._dispatch.subscribe(this._event.visibilityChange,this.adtViewabilityThreshold.bind(this)),this._dispatch.subscribe(this._event.adtSignalVPAID,this.adtSignalVPAID.bind(this)),this._dispatch.subscribe(this._event.adtRequestViewabilityData,this.adtRequestViewabilityData.bind(this)),this._dispatch.subscribe(this._event.adtQueryViewabilityData,this.adtQueryViewabilityData.bind(this)),this._dispatch.subscribe(this._event.adtAddUEBUToArray,this.adtAddUEBUToArray.bind(this))}var e=a("./../constants.js"),f=a("./../support/log.js"),g=a("./../tracking/uebu.js");d.prototype.adtConfirmFullScreen=function(a){a&&f.events(this._event.adtConfirmFullScreen,a)},d.prototype.adtRequestFullscreen=function(){this._dispatch&&this._dispatch.publish(e.sugrEvents.adtRequestFullscreen)},d.prototype.adtHalfInView=function(){f.debug("vjs - adtHalfInView"),this._dispatch&&this._dispatch.publish(e.sugrEvents.adtHalfInView)},d.prototype.adtViewabilityThreshold=function(a){f.events(this._event.adtViewabilityThreshold,a)},d.prototype.adtSignalVPAID=function(a){if(f.debug("vjs - adtSignalVPAID "+a.eventName),f.events(this._event.adtSignalVPAID,a),a&&a.eventName){var b=a.eventName,c=e.VPAID.event;if(b===c.AdImpression){this._runtime.adImpressionReceived=!0;try{this._runtime.monitor&&this._runtime.monitor.onAdImpressionReceived()}catch(a){}}else b===c.AdVideoStart?this._currentQuartile=0:b===c.AdVideoFirstQuartile?this._currentQuartile=25:b===c.AdVideoMidpoint?this._currentQuartile=50:b===c.AdVideoThirdQuartile?this._currentQuartile=75:b===c.AdVideoComplete?this._currentQuartile=100:b===c.AdError&&(this._runtime.adErrorReceived=!0)}f.debug("Events Current Quartile: "+this._currentQuartile),this.adtRequestViewabilityData()},d.prototype.adtRequestViewabilityData=function(){this.adtQueryViewabilityData()},d.prototype.adtQueryViewabilityData=function(){var a=null;if(this._runtime.monitor)try{var b=this._runtime.monitor._viewability.getState(0,!1),c=!1;b.viewablePercentage>0&&(c=!0);var d=b.method,g=this._runtime.monitor._totalViewableTime,h=this._currentQuartile;a={viewable:c,viewablePercentage:b.viewablePercentage,iid:this._runtime.__iid,status:"",vmi:d,tcvt:g,ufo:"2",qrt:h,als:e.LOCATION,avn:e.VERSION}}catch(a){return}f.events(this._event.adtQueryViewabilityData,a),this._dispatch.publish(this._event.adtViewabilityData,a)},d.prototype.adtAddUEBUToArray=function(a){if(f.debug("vjs - adtAddUEBUToArray"),f.events(this._event.adtAddUEBUToArray,a),"string"==typeof a)g.addURL(a);else for(var b=Object.keys(a),c=0;c<b.length;c++)g.addURL(a[c])},b.exports=d},{"./../constants.js":9,"./../support/log.js":17,"./../tracking/uebu.js":20}],12:[function(a,b,c){function d(a,b){this.element=a,this.index=b,this.active=!1,this.inview=!1,this.dnt=!1}function e(a,b,c){this._runtime=b,this._element=a,this._method=c,this._document=this._runtime.document,this._window=this._runtime.window,this._dispatch=new h}var f=a("./../constants.js"),g=a("./../support/log.js"),h=a("./../notification/notification.js"),i=a("./../../node_modules/js-viewability-pixel/src/pixel.js"),j=a("./../tracking/uebu.js");e.prototype.init=function(){this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverInstantiated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverInstantiated):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeInstantiated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeInstantiated)),this.markerSize=f.markers.settings.PROD.markerSize;try{var a=this._element.getBoundingClientRect();this.adWidth=a.width,this.adHeight=a.height}catch(a){g.debug("vjs - Markers.init error = "+a),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInit)}if(this._communication_init=!1,this._markers=[],this._observers=[],this._pixels=[],this.__initViewabilityPixels(this._element,this._method),this._method===f.viewabilityMethods.OBSERVER_MARKER){var b={rootMargin:"0px",threshold:1};try{var c=new IntersectionObserver(this.observerCallback,b),d=this._markers[0];c.observe(d.element),this._observers.push(c);var e=new IntersectionObserver(this.observerCallback,b),h=this._markers[1];if(e.observe(h.element),this._observers.push(e),this._markers.length>2){var i=new IntersectionObserver(this.observerCallback,b),j=this._markers[2];i.observe(j.element),this._observers.push(i);var k=new IntersectionObserver(this.observerCallback,b),l=this._markers[3];k.observe(l.element),this._observers.push(k)}setTimeout(this.activate,30)}catch(a){}this._communication_init||(this._communication_init=!0,this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverCommunicationInit):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverCommunicationInit))}else if(this._method===f.viewabilityMethods.IFRAME_MARKER){try{this._markers.length}catch(a){}this._communication_init||(this._communication_init=!0,this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeCommunicationInit):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeCommunicationInit))}},e.prototype.iframeCallback_1=function(a){if(window.adtricity&&window.adtricity.runtime&&window.adtricity.runtime.monitor._viewability&&window.adtricity.runtime.monitor._viewability._markers){var b=window.adtricity.runtime.monitor._viewability._markers;try{g.debug("vjs - marker 1 callback viewable "+a);var c=b._markers[0];c&&(c.active=!0,c.inview=a)}catch(a){g.debug("vjs - marker 1 callback error "+a.message)}}},e.prototype.iframeCallback_2=function(a){if(window.adtricity&&window.adtricity.runtime&&window.adtricity.runtime.monitor._viewability&&window.adtricity.runtime.monitor._viewability._markers){var b=window.adtricity.runtime.monitor._viewability._markers;try{g.debug("vjs - marker 2 callback viewable "+a);var c=b._markers[1];c&&(c.active=!0,c.inview=a)}catch(a){g.debug("vjs - marker 2 callback error "+a.message)}}},e.prototype.iframeCallback_3=function(a){if(window.adtricity&&window.adtricity.runtime&&window.adtricity.runtime.monitor._viewability&&window.adtricity.runtime.monitor._viewability._markers){var b=window.adtricity.runtime.monitor._viewability._markers;try{g.debug("vjs - marker 3 callback viewable "+a);var c=b._markers[2];c&&(c.active=!0,c.inview=a)}catch(a){g.debug("vjs - marker 3 callback error "+a.message)}}},e.prototype.iframeCallback_4=function(a){if(window.adtricity&&window.adtricity.runtime&&window.adtricity.runtime.monitor._viewability&&window.adtricity.runtime.monitor._viewability._markers){var b=window.adtricity.runtime.monitor._viewability._markers;try{g.debug("vjs - marker 4 callback viewable "+a);var c=b._markers[3];c&&(c.active=!0,c.inview=a)}catch(a){g.debug("vjs - marker 4 callback error "+a.message)}}},e.prototype.observerCallback=function(a,b){if(window.adtricity&&window.adtricity.runtime&&window.adtricity.runtime.monitor._viewability&&window.adtricity.runtime.monitor._viewability._markers)for(var c=window.adtricity.runtime.monitor._viewability._markers,d=0;d<a.length;d++){var e,h=a[d],i=0;b===c._observers[0]&&(i=1),b===c._observers[1]&&(i=2),b===c._observers[2]&&(i=3),b===c._observers[3]&&(i=4);try{(e=c._markers[i-1])&&(e.inview=h.intersectionRatio>=1)}catch(d){g.debug("vjs - observerCallback error "+d.message),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersCommunicationUpdate)}}},e.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},e.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},e.prototype.dnt=function(){if(this._markers)for(var a=this._markers.length,b=a;b>=1;b--)try{var c=this._markers[b-1];if(c&&c.dnt)return!0}catch(a){}return!1},e.prototype.active=function(){if(this._markers)for(var a=this._markers.length,b=a;b>=1;b--)try{var c=this._markers[b-1];if(c&&c.active)return!0}catch(a){}return!1},e.prototype.getInView=function(a){var b=!1;if(this._markers){this.__validateMarkersPosition();for(var c=0,d=0,e=this._markers.length,h=e;h>=1;h--)try{var i=this._markers[h-1];i&&i.active&&(c+=1,i.inview&&(d+=1))}catch(a){g.debug("vjs - Markers.inview error = "+a),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInview)}c&&d&&(b=a>=Math.floor(d/c*100))}return b},e.prototype.getPercentInView=function(a){var b=0;if(this._markers){this.__validateMarkersPosition();for(var c=0,d=0,e=this._markers.length,h=e;h>=1;h--)try{var i=this._markers[h-1];i&&i.active&&(c+=1,i.inview&&(d+=1))}catch(a){g.debug("vjs - Markers.inview error = "+a),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInview)}c&&d&&(b=Math.floor(d/c*100))}return b},e.prototype.fireViewable=function(){this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverViewable):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverViewable):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeViewable):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeViewable))},e.prototype.start=function(){},e.prototype.activate=function(){if(window.adtricity&&window.adtricity.runtime&&window.adtricity.runtime.monitor._viewability&&window.adtricity.runtime.monitor._viewability._markers){var a=window.adtricity.runtime.monitor._viewability._markers;if(a._method===f.viewabilityMethods.OBSERVER_MARKER)for(var b=a._markers.length,c=b;c>=1;c--){var d=a._markers[c-1];d&&(d.active=!0)}}},e.prototype.onAdImpressionReceived=function(){this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverTrackingStart):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverTrackingStart):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeTrackingStart):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeTrackingStart))},e.prototype.stop=function(){if(this._markers){for(var a=this._markers.length,b=!1,c=a;c>=1;c--)try{var d=this._markers[c-1],e=d.element;if(this._method===f.viewabilityMethods.OBSERVER_MARKER){var h=this._observers[c-1];h&&(h.unobserve(e),h.disconnect(),h=null)}else if(this._method===f.viewabilityMethods.IFRAME_MARKER){var i=this._pixels[c-1];i&&i.stop()}e&&e.parentNode&&e.parentNode.removeChild(e),b=!0}catch(a){g.debug("vjs - Markers.stop error = "+a),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersStop)}b&&(this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverRemoved):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverRemoved):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeRemoved):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeRemoved)))}this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverTrackingStop):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverTrackingStop):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeTrackingStop):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeTrackingStop))},e.prototype.__initViewabilityPixels=function(a,b){try{this._runtime.isProduction?(g.debug("vjs - __initViewabilityPixels PROD"),this.markerSize=f.markers.settings.PROD.markerSize):(g.debug("vjs - __initViewabilityPixels DEV"),this.markerSize=f.markers.settings.DEV.markerSize);var c,e=this.__determineInsertTarget(a),h=this.__insertMarkerContainer(e,a);this._runtime.isDisplay&&(c=f.markers.count.DISPLAY),this._runtime.isVideo&&(c=f.markers.count.VIDEO);for(var i=1;i<=c;i++){var j=this.__createMarker(i,b,this.markerMode,this.markerSize,this.markerColor);this._markers[i-1]=new d(j,i),h.appendChild(j)}this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverMarkerCreated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverMarkerCreated):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeMarkerCreated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeMarkerCreated))}catch(a){g.debug("vjs __initViewabilityPixels error - ",a.message),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersInitViewabilityPixels)}},e.prototype.__validateMarkersPosition=function(){try{if(this._element&&this._markers){var a=this._element.getBoundingClientRect(),b=Math.floor(a.width),c=Math.floor(a.height);if(b!==this.adWidth||b!==this._runtime.adWidth||c!==this.adHeight||c!==this._runtime.adHeight){g.debug("vjs - setMarkersPosition");for(var d=this._markers.length;d>=1;d--)this.__setMarkerPosition(this._markers[d-1].element,d,this.markerSize,b,c);this.adWidth=b,this.adHeight=c,this._runtime.adWidth=b,this._runtime.adHeight=c,j.setValue("ad_width",b),j.setValue("ad_height",c)}}}catch(a){g.debug("vjs - validateMarkersPosition error "+a.message)}},e.prototype.__calculatePagePosition=function(a){var b=-1,c=-1;try{if(a){var d=a.getBoundingClientRect();if(d){var e=this._document.body,f=this._document.documentElement,g=this._window.pageYOffset||f.scrollTop||e.scrollTop,h=this._window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0;c=d.top+g-i,b=d.left+h-j,c=Math.round(c),b=Math.round(b),c>5e4&&(c=-1),b>5e4&&(b=-1)}}}catch(a){b=-1,c=-1}return[b,c]},e.prototype.__determineInsertTarget=function(a){return this._element.parentNode},e.prototype.__createMarkerContainer=function(a,b){var c=this._document.createElement("div");return c.id="adt_vip_marker_"+this._runtime.iid,c.className="adt_marker_container",c.style.setProperty("zIndex","2147483647","important"),c.style.setProperty("z-index","2147483647","important"),c.style.setProperty("backgroundColor","transparent","important"),c.style.setProperty("width","0px","important"),c.style.setProperty("height","0px","important"),c.style.setProperty("margin","0px","important"),c.style.setProperty("padding","0px","important"),c.style.setProperty("lineHeight","0px","important"),c.style.setProperty("verticalAlign","top","important"),c.style.setProperty("border","0","important"),c.style.setProperty("fontSize","0px","important"),c.style.setProperty("position","relative","important"),c.style.setProperty("left","0px","important"),c.style.setProperty("top","0px","important"),c},e.prototype.__insertMarkerContainer=function(a,b){var c=this.__createMarkerContainer();if(a.childNodes.length<=1)a.appendChild(c);else for(var d=0;d<a.childNodes.length;d++)a.childNodes[d]===b&&(d===a.childNodes.length-1?a.appendChild(c):a.insertBefore(c,a.childNodes[d+1]));var e=this.__calculatePagePosition(b),g=this.__calculatePagePosition(c),h=e[1]+b.offsetHeight-g[1];0!==h&&c.style.setProperty("top",h+"px","important");var i=e[0]-g[0];return 0!==i&&c.style.setProperty("left",i+"px","important"),this._method===f.viewabilityMethods.OBSERVER_MARKER?this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoObserverContainerCreated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayObserverContainerCreated):this._method===f.viewabilityMethods.IFRAME_MARKER&&(this._runtime.isVideo?this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.VideoIframeContainerCreated):this._runtime.isDisplay&&this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityInfoPixel,f.pixelCodes.info.DisplayIframeContainerCreated)),c},e.prototype.__createMarker=function(a,b,c,d,e){var h=this._document.createElement("div");try{if(h.id="adt_marker_"+this._runtime.iid+"_"+a,h.style.setProperty("position","absolute","important"),h.style.setProperty("zIndex","2147483647","important"),h.style.setProperty("z-index","2147483647","important"),h.style.setProperty("backgroundColor","transparent","important"),h.style.setProperty("width",d+"px","important"),h.style.setProperty("height",d+"px","important"),h.style.setProperty("margin","0px","important"),h.style.setProperty("padding","0px","important"),h.style.setProperty("lineHeight","0px","important"),h.style.setProperty("verticalAlign","top","important"),h.style.setProperty("border","0","important"),h.style.setProperty("fontSize","0px","important"),h.style.setProperty("display","block","important"),h.style.setProperty("pointerEvents","none","important"),this.__setMarkerPosition(h,a,d,this.adWidth,this.adHeight),b===f.viewabilityMethods.IFRAME_MARKER){var j=new i;this._pixels.push(j),1===a&&j.start(this.iframeCallback_1,h),2===a&&j.start(this.iframeCallback_2,h),3===a&&j.start(this.iframeCallback_3,h),4===a&&j.start(this.iframeCallback_4,h)}}catch(a){g.debug("vjs __createMarker error - ",a.message),this._dispatch&&this._dispatch.publish(f.notificationEvents.adtricityErrorPixel,f.pixelCodes.error.MarkersCreateMarker)}return h},e.prototype.__setMarkerPosition=function(a,b,c,d,e){var g=Math.floor(d/2),h=Math.floor(e/2),i=Math.floor(c/2),j=2;this._runtime.inIframe&&(j=4),this._runtime.isVideo?b===f.markers.positions.VIDEO.top?(a.style.setProperty("top","-"+(e-j)+"px","important"),a.style.setProperty("left",g-i+"px","important")):b===f.markers.positions.VIDEO.left?(a.style.setProperty("top","-"+(h+i)+"px","important"),a.style.setProperty("left",j+"px","important")):b===f.markers.positions.VIDEO.right?(a.style.setProperty("top","-"+(h+i)+"px","important"),a.style.setProperty("left",d-c-j+"px","important")):b===f.markers.positions.VIDEO.bottom&&(a.style.setProperty("top","-"+(c+j)+"px","important"),a.style.setProperty("left",g-i+"px","important")):this._runtime.isDisplay&&(d>e?b===f.markers.positions.DISPLAY.sideA?(a.style.setProperty("top","-"+(h+i)+"px","important"),a.style.setProperty("left",j+"px","important")):b===f.markers.positions.DISPLAY.sideB&&(a.style.setProperty("top","-"+(h+i)+"px","important"),a.style.setProperty("left",d-c-j+"px","important")):b===f.markers.positions.DISPLAY.sideA?(a.style.setProperty("top","-"+(e-j)+"px","important"),a.style.setProperty("left",g-i+"px","important")):b===f.markers.positions.DISPLAY.sideB&&(a.style.setProperty("top","-"+(c+j)+"px","important"),a.style.setProperty("left",g-i+"px","important")))},b.exports=e},{"./../../node_modules/js-viewability-pixel/src/pixel.js":5,"./../constants.js":9,"./../notification/notification.js":15,"./../support/log.js":17,"./../tracking/uebu.js":20}],13:[function(a,b,c){function d(a,b){this.runtime=b,this.element=a,this._updateInterval=this.runtime.constants.updateInterval,this._viewableDuration=this.runtime.constants.viewableDuration,this._dispatch=new f,this._viewable=!1,this._viewableQuartiles=null,this._publishedQuartiles={0:!1,25:!1,50:!1,75:!1,100:!1},this._currentQuartile=-1}var e=a("./viewability"),f=a("./../notification/notification.js"),g=a("./../constants.js"),h=a("./../support/log.js");d.prototype.init=function(){this._viewability=new e(this.element,this.runtime),this._viewability.addEventListener(g.notificationEvents.visibilityChange,this.__intervalCallback.bind(this)),this._viewability.addEventListener(g.notificationEvents.nonviewabletimeUpdate,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.nonviewabletimeUpdate,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.nonviewabletimeTotal,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.nonviewabletimeTotal,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.notifyAdtHalfInView,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.notifyAdtHalfInView,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.adtricityInfoPixel,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.adtricityInfoPixel,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.adtricityErrorPixel,function(a){this._dispatch&&this._dispatch.publish(g.notificationEvents.adtricityErrorPixel,a)}.bind(this)),this._viewability.addEventListener(g.notificationEvents.inviewport,function(){this._dispatch&&this._dispatch.publish(g.notificationEvents.inviewport)}.bind(this)),this._viewability.init(),this._previousViewabilityPercentage=-1,this._snapshotState=null,this._stopped=!1,this._totalViewableTime=0,this._publishedQuartiles={0:!1,25:!1,50:!1,75:!1,100:!1},this._viewableQuartiles={0:0,25:0,50:0,75:0,100:0},this.start()},d.prototype.onAdImpressionReceived=function(){this.getSnapshotState()!==g.snapshot.states.error&&this._dispatch&&this._dispatch.publishOnce(g.notificationEvents.measurable),this._viewability.onAdImpressionReceived()},d.prototype.start=function(){h.debug("vjs - monitor.start"),this._viewability.start(),h.debug("Starting monitor"),this._intervalId||(this._intervalId=setInterval(this.__intervalCallback.bind(this),this._updateInterval),this._timeViewable=0)},d.prototype.stop=function(){this._stopped=!0,this._viewability.stop(),this._intervalId&&(clearInterval(this._intervalId),this._timeViewable=0,this._intervalId=null)},d.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},d.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},d.prototype.getSnapshotState=function(){if(this._snapshotState)return this._snapshotState;var a=this._viewability.getState(0,!0);h.debug("SNAPSHOT STATE",a);var b=a.viewablePercentage;return b>=g.snapshot.threshold?this._snapshotState=g.snapshot.states.viewable:b<g.snapshot.threshold&&b>=0?this._snapshotState=g.snapshot.states.nonviewable:this._snapshotState=g.snapshot.states.error,this._snapshotState},d.prototype.__intervalCallback=function(){if(!this._stopped){var a=this._viewability.getState(this._updateInterval,!1);if(a&&this.runtime.adImpressionReceived){if(this._previousViewabilityPercentage!==a.viewablePercentage&&(this._previousViewabilityPercentage=a.viewablePercentage,this._dispatch&&this._dispatch.publish(g.notificationEvents.viewablePercentageChange,a.viewablePercentage)),a.viewablePercentage>=this.runtime.constants.viewableAreaThreshold?(this._timeViewable+=this._updateInterval,this._totalViewableTime+=this._updateInterval,this._timeViewable>=this._viewableDuration&&(this._dispatch&&this._dispatch.publishOnce(g.notificationEvents.viewableThreshold,this._timeViewable,this._totalViewableTime),this._viewable||(this._viewable=!0,this._viewability.fireViewable())),this._viewableQuartiles&&this._currentQuartile>=0&&(this._viewableQuartiles[this._currentQuartile]=this._viewableQuartiles[this._currentQuartile]+this._updateInterval)):(this._timeViewable=0,this._viewableQuartiles&&this._viewableQuartiles[this._currentQuartile]<this._viewableDuration&&(this._viewableQuartiles[this._currentQuartile]=0)),this._currentQuartile!==this.runtime.events._currentQuartile){if(!1===this._publishedQuartiles[this.runtime.events._currentQuartile]){var b=this._viewableQuartiles[this._currentQuartile],c=!1,d=this.runtime.events._currentQuartile,e=this._totalViewableTime;0===d?this.getSnapshotState()===g.snapshot.states.viewable&&(c=!0):b>=this._viewableDuration&&(c=!0),this._dispatch&&this._dispatch.publish(g.notificationEvents.quartilePublished,d,c,b,e),this._publishedQuartiles[this.runtime.events._currentQuartile]=!0}this._currentQuartile=this.runtime.events._currentQuartile}100===this._currentQuartile&&(this._publishedQuartiles[this._currentQuartile]=!0,this.stop(),this._currentQuartile=-1)}}},b.exports=d},{"./../constants.js":9,"./../notification/notification.js":15,"./../support/log.js":17,"./viewability":14}],14:[function(a,b,c){function d(a){this.runtime=a,this._dispatch=new f,this._document=this.runtime.document||document,this._window=this.runtime.window||window,this.__inspectorOpen=!1,this.__monitorInspector();var b,c;void 0!==document.hidden?(b="hidden",c="visibilitychange"):void 0!==document.mozHidden?(b="mozHidden",c="mozvisibilitychange"):void 0!==document.msHidden?(b="msHidden",c="msvisibilitychange"):void 0!==document.webkitHidden&&(b="webkitHidden",c="webkitvisibilitychange"),this._hidden=b,this._bindedVisibilityChanged=null,this._initialPageVisbility=!document[this._hidden],this._initialPageVisbilityState=document.visibilityState,h.debug("Initial Page Visbility:",!document[this._hidden]),void 0===this._document.addEventListener||void 0===this._document[b]?h.error("This code requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):(this.__bindedVisibilityChanged=this.__visibilityChanged.bind(this),this._document.addEventListener(c,this.__tabChange.bind(this),!1),this._window.addEventListener("blur",this.__bindedVisibilityChanged,!1),this._window.addEventListener("focus",this.__bindedVisibilityChanged,!1));var d;d=!1!==this._initialPageVisbility&&(this.runtime.isMraid||this._document.hasFocus()||this.runtime.inIframe||this.__inspectorOpen||this._initialPageVisbility),h.debug("Initial visibility:",d),h.debug("Initial focus:",this._document.hasFocus()),this.visible=d}function e(a,b){this.runtime=b,this.element=a,this._document=this.runtime.document,this._window=this.runtime.window,this._dispatch=new f,this._visibility=new d(this.runtime),this._geometric=j,this._in_viewport_pixel_sent=!1,this._adtHalfInView_sent=!1,this._nonviewable=!0,this._nonviewabletime=0,this._nonviewabletime_started=!1,this._nonviewabletime_complete=!1,this._nonviewabletime_total=0,this._nonviewabletime_callback=null,this._nonviewabletime_callbacktime_prev=0,this._nonviewabletime_callbacktime_current=1,this._nonviewabletime_callbacktime_next=1,this._nonviewabletime_callbacktime=1}
var f=a("./../notification/notification.js"),g=a("./markers.js"),h=a("./../support/log.js"),i=a("./environment.js"),j=a("./../../node_modules/geometric-snapshot/src/geometric.js"),k=a("./../constants.js"),l=a("./../tracking/uebu.js");d.prototype.__monitorInspector=function(a){var b={open:!1,orientation:null},c=this,d=function(a,b){if(c.__inspectorOpen=a,document.createEvent){var d=document.createEvent("CustomEvent");d.initCustomEvent("devtoolschange",!1,!1,{open:a,orientation:b}),window.dispatchEvent(d)}else window.dispatchEvent(new CustomEvent("devtoolschange",{detail:{open:a,orientation:b}}))},e=function(){var a=window.outerWidth-window.innerWidth>160,c=window.outerHeight-window.innerHeight>160,e=a?"vertical":"horizontal";window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized||a||c?(b.open&&b.orientation===e||d(!0,e),b.open=!0,b.orientation=e):(b.open&&d(!1,null),b.open=!1,b.orientation=null)};e(),setInterval(e,500)},d.prototype.detectActiveTab=function(){var a=0;try{void 0===document.addEventListener&&void 0===document.attachEvent||void 0===i.hiddenAttribute||(a=document[i.hiddenAttribute]?2:1)}catch(b){a=0}return a},d.prototype.isVisible=function(){return this.visible},d.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},d.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},d.prototype.__tabChange=function(a){this.visible=!this._document[this._hidden],this._dispatch&&this._dispatch.publish("visibilityChange",this.visible),h.debug("Visibility changed:",this.visible,a.type)},d.prototype.__visibilityChanged=function(a){try{if(window){if(window.self!==window.top)return;var b="blur"!==a.type&&!this._document[this._hidden];this.visible=b,this._dispatch&&this._dispatch.publish("visibilityChange",b),h.debug("Visibility changed:",b,a.type)}}catch(a){}},e.prototype.init=function(){if(this.method=this.setDeterminationMethod(),this.method===k.viewabilityMethods.OBSERVER_MARKER||this.method===k.viewabilityMethods.IFRAME_MARKER)try{this._markers=new g(this.element,this.runtime,this.method),this._markers.addEventListener(k.notificationEvents.adtricityInfoPixel,function(a){this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,a)}.bind(this)),this._markers.addEventListener(k.notificationEvents.adtricityErrorPixel,function(a){this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityErrorPixel,a)}.bind(this)),this._markers.init()}catch(a){h.debug("vjs - viewability init error "+a.message),this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityErrorPixel,k.pixelCodes.error.ViewabilityInit),this.method=k.viewabilityMethods.GEOMETRIC,l.addEventArgument("vmi",k.viewabilityMethods.GEOMETRIC),h.debug("vjs - fallback to GEOMETRIC")}this.method===k.viewabilityMethods.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.VideoGeometricInstantiated):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.DisplayGeometricInstantiated)),this.isFullscreen=!1,this.__watchFullscreen(this.element),this._visibility.addEventListener("visibilityChange",function(a){this._dispatch&&this._dispatch&&this._dispatch.publish(k.notificationEvents.visibilityChange,a)}.bind(this))},e.prototype.getDeterminationMethod=function(){return this.method},e.prototype.setDeterminationMethod=function(){var a=k.viewabilityMethods.GEOMETRIC;h.debug("vjs - setDeterminationMethod ",a);try{this.runtime.inIframe&&(i.isIntersectionObserverSupported()?a=k.viewabilityMethods.OBSERVER_MARKER:i.isIframeSupported()&&(a=k.viewabilityMethods.IFRAME_MARKER))}catch(a){h.debug("vjs setDeterminationMethod error "+a.message)}return h.debug("vjs - setDeterminationMethod ",a),l.addEventArgument("vmi",a),a},e.prototype.getState=function(a,b){var c=this.__getPercentInView(b),d=this.getDeterminationMethod();return a>0&&(c>0?(!this._adtHalfInView_sent&&c>=50&&(this._adtHalfInView_sent=!0,this._dispatch&&this._dispatch.publish(k.notificationEvents.notifyAdtHalfInView,this._nonviewabletime)),this._in_viewport_pixel_sent||(this._dispatch&&this._dispatch.publish(k.notificationEvents.inviewport),this._in_viewport_pixel_sent=!0),void 0!==a&&a>0&&this._nonviewabletime_started&&!this._nonviewabletime_complete&&(this._nonviewabletime_complete=!0,this._dispatch&&!this.runtime.adErrorReceived&&this._dispatch.publish(k.notificationEvents.nonviewabletimeTotal,this._nonviewabletime)),this._nonviewable=!1):(void 0!==a&&a>0&&this._nonviewabletime_started&&!this._nonviewabletime_complete&&(this._nonviewabletime+=a),this._nonviewable=!0)),{viewablePercentage:c,method:d}},e.prototype.fireViewable=function(){this.method!==k.viewabilityMethods.OBSERVER_MARKER&&this.method!==k.viewabilityMethods.IFRAME_MARKER||!this._markers||this._markers.fireViewable(),this.method===k.viewabilityMethods.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.VideoGeometricViewable):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.DisplayGeometricViewable))},e.prototype.start=function(){this.method!==k.viewabilityMethods.OBSERVER_MARKER&&this.method!==k.viewabilityMethods.IFRAME_MARKER||!this._markers||this._markers.start(),this.start_nonviewabletime_count()},e.prototype.onAdImpressionReceived=function(){this.method===k.viewabilityMethods.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.VideoGeometricTrackingStart):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.DisplayGeometricTrackingStart)),this.method!==k.viewabilityMethods.OBSERVER_MARKER&&this.method!==k.viewabilityMethods.IFRAME_MARKER||!this._markers||this._markers.onAdImpressionReceived()},e.prototype.stop=function(){this.method!==k.viewabilityMethods.OBSERVER_MARKER&&this.method!==k.viewabilityMethods.IFRAME_MARKER||!this._markers||this._markers.stop(),this.method===k.viewabilityMethods.GEOMETRIC&&(this.runtime.isVideo?this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.VideoGeometricTrackingStop):this.runtime.isDisplay&&this._dispatch&&this._dispatch.publish(k.notificationEvents.adtricityInfoPixel,k.pixelCodes.info.DisplayGeometricTrackingStop));try{this._window.removeEventListener("blur",this.__bindedVisibilityChanged,!1),this._window.removeEventListener("focus",this.__bindedVisibilityChanged,!1)}catch(a){}},e.prototype.start_nonviewabletime_count=function(){h.debug("vjs - start_nonviewabletime_count"),this._nonviewabletime_started||(this._nonviewabletime_started=!0,this._nonviewabletime_complete=!1,this._nonviewabletime_total=0,1===this.runtime.snvd?(this._nonviewabletime_callbacktime_prev=0,this._nonviewabletime_callbacktime_current=0,this._nonviewabletime_callbacktime_next=0):(this._nonviewabletime_callbacktime_prev=0,this._nonviewabletime_callbacktime_current=1,this._nonviewabletime_callbacktime_next=1),this.update_nonviewabletime_callback(!1))},e.prototype.update_nonviewabletime_callback=function(a){h.debug("vjs - update_nonviewabletime_callback "+a+" "+this._nonviewabletime);var b=this.runtime.monitor._viewability;this._nonviewable?(a&&!this.runtime.adErrorReceived&&this._dispatch&&this._dispatch.publish(k.notificationEvents.nonviewabletimeUpdate,this._nonviewabletime),1===this.runtime.snvd?(this._nonviewabletime_callbacktime_prev=this._nonviewabletime_callbacktime_current,this._nonviewabletime_callbacktime_current=this._nonviewabletime_callbacktime_next,this._nonviewabletime_callbacktime_next=this._nonviewabletime_callbacktime_current+this.runtime.snvd_ping,this._nonviewabletime_callbacktime=this._nonviewabletime_callbacktime_next-this._nonviewabletime_callbacktime_current,this._nonviewabletime_callbacktime_next<=this.runtime.snvd_timeout&&(this._nonviewabletime_callback=setTimeout(function(){b.update_nonviewabletime_callback(!0)},1e3*this._nonviewabletime_callbacktime))):(this._nonviewabletime_callbacktime_prev=this._nonviewabletime_callbacktime_current,this._nonviewabletime_callbacktime_current=this._nonviewabletime_callbacktime_next,this._nonviewabletime_callbacktime_next=this._nonviewabletime_callbacktime_prev+this._nonviewabletime_callbacktime_current,this._nonviewabletime_callbacktime=this._nonviewabletime_callbacktime_next-this._nonviewabletime_callbacktime_current,this._nonviewabletime_callback=setTimeout(function(){b.update_nonviewabletime_callback(!0)},1e3*this._nonviewabletime_callbacktime))):this._nonviewabletime_callback&&clearTimeout(this._nonviewabletime_callback)},e.prototype.addEventListener=function(a,b){this._dispatch.subscribe(a,b)},e.prototype.removeEventListener=function(a,b){this._dispatch.unsubscribe(a,b)},e.prototype.__watchFullscreen=function(a){var b=function(){this.isFullscreen=!0,this._dispatch&&this._dispatch.publish("fullscreenChange",!0)},c=function(){this.isFullscreen=!1,this._dispatch&&this._dispatch.publish("fullscreenChange",!1)};"VIDEO"===a.tagName&&(a.addEventListener("webkitbeginfullscreen",b.bind(this),!1),a.addEventListener("webkitendfullscreen",c.bind(this),!1))},e.prototype.__getPercentInView=function(a){var b=100;if(this.method===k.viewabilityMethods.OBSERVER_MARKER||this.method===k.viewabilityMethods.IFRAME_MARKER)if(!this._markers.dnt()&&this._markers.active()){if(this.runtime.isVideo)try{b=this._markers.getPercentInView()}catch(a){h.debug("vjs - markers.video.__getPercentInView error")}else if(this.runtime.isDisplay)try{b=this._markers.getPercentInView()}catch(a){h.debug("vjs - markers.display.__getPercentInView error")}}else a||(b=0);var c=new this._geometric(this.element,this._window);if((-1===c.px||"number"!=typeof c.px||isNaN(c.px))&&h.debug("vjs - geometric-snapshot-js error debug A "+c.px),(-1===c.py||"number"!=typeof c.py||isNaN(c.py))&&h.debug("vjs - geometric-snapshot-js error debug B "+c.py),(-1===c.wiw||"number"!=typeof c.wiw||isNaN(c.wiw))&&h.debug("vjs - geometric-snapshot-js error debug C "+c.wiw),(-1===c.wih||"number"!=typeof c.wih||isNaN(c.wih))&&h.debug("vjs - geometric-snapshot-js error debug D "+c.wih),(-1===c.checkWidth||"number"!=typeof c.checkWidth||isNaN(c.checkWidth))&&h.debug("vjs - geometric-snapshot-js error debug E "+c.checkWidth),(-1===c.checkHeight||"number"!=typeof c.checkHeight||isNaN(c.checkHeight))&&h.debug("vjs - geometric-snapshot-js error debug F "+c.checkHeight),this.runtime.mraid)try{var d,e=0,f=window.viant.viewability;for(var g in f)if(f.hasOwnProperty(g)){d=f[g];break}return d=function(a){var b=56769&(a^a>>14),c=a^b^b<<14,d=1114181&(c^c>>7);return c^d^d<<7}(d),e=parseFloat(Math.round(100*d)/100).toFixed(0),this.method=k.viewabilityMethods.MOBILE_VIEWABILITY_SDK,e}catch(a){var i=!1;return this.runtime.mraid&&this.runtime.mraid.isViewable&&(i=this.runtime.mraid.isViewable()),this.method=k.viewabilityMethods.MRAID,i?100:0}return this.isFullscreen?100:this._visibility.isVisible()?Math.min(c.viewablePercentage,b):0},b.exports=e},{"./../../node_modules/geometric-snapshot/src/geometric.js":2,"./../constants.js":9,"./../notification/notification.js":15,"./../support/log.js":17,"./../tracking/uebu.js":20,"./environment.js":10,"./markers.js":12}],15:[function(a,b,c){function d(){this._events={},this._publishOnce={}}var e=a("./../support/log.js");d.prototype.publishOnce=function(a,b,c,d){if(!this._events[a])return!1;if(this._publishOnce[a])return!1;for(var e,f,g,h=this._events[a],i=0;i<h.length;i++)e=h[i].callback,f=h[i].context,g=h[i].arguments,e.apply(f,g.concat(Array.prototype.slice.call(arguments,1)));this._publishOnce[a]=!0},d.prototype.publish=function(a,b,c,d){if(!this._events[a])return!1;for(var e,f,g,h=this._events[a],i=0;i<h.length;i++)e=h[i].callback,f=h[i].context,g=h[i].arguments,e.apply(f,g.concat(Array.prototype.slice.call(arguments,1)))},d.prototype.subscribe=function(a,b,c,d,e,f){c=c||null,this._events[a]=this._events[a]||[],this._events[a].push({callback:b,context:c,arguments:Array.prototype.slice.call(arguments,3)||[]})},d.prototype.unsubscribe=function(a,b){var c,d=this._events[a];if(!d)return!1;for(var f=0;f<d.length;f++)d[f].callback===b&&(c=d.splice(f,1),e.debug("Unsubscribed to: ",c[0]))},d.instance=null,d.singleton=function(){return null===this.instance&&(this.instance=new d),this.instance},b.exports=d},{"./../support/log.js":17}],16:[function(a,b,c){function d(a,b){this._visible=!1,this._logger=null,this._upperLeftCorner=null,this._upperRightCorner=null,this._lowerLeftCorner=null,this._lowerRightCorner=null,this._wrapperElement=a,this.history={},this._wrapperElement||e.error("No valid element found for Debug UI to attach to")}var e=a("./log.js");Date.now||(Date.now=function(){return(new Date).getTime()});var f=a("./../constants.js");d.prototype.remove=function(){this._wrapperElement.removeChild(this._upperLeftCorner),this._wrapperElement.removeChild(this._upperRightCorner),this._wrapperElement.removeChild(this._lowerLeftCorner),this._wrapperElement.removeChild(this._lowerRightCorner),this._visible=!1},d.prototype.update=function(a){var b=function(a){var b="#D12D30";return a>90&&a<=100?b="#188559":a>50&&a<=90&&(b="#ECE636"),b}(a),c=Date.now();this.history[c]=a;var d=parseFloat(Math.round(100*a)/100).toFixed(1),e="<span style='float:left; font-weight:bold;width:100%; padding-top:15px; font-size:15px; text-align:center;font-family:San Francisco,Helvetica,san-serif;'>"+d+"%</span>";this._upperLeftCorner.style.background=b,this._upperLeftCorner.innerHTML=e,this._upperRightCorner.style.background=b,this._upperRightCorner.innerHTML=e,this._lowerLeftCorner.style.background=b,this._lowerLeftCorner.innerHTML=e,this._lowerRightCorner.style.background=b,this._lowerRightCorner.innerHTML=e},d.prototype.show=function(){if(!this._visible&&this._wrapperElement){this._visible=!0;var a=document.createElement("div");a.class="viewabilityDebug",a.style.width="50px",a.style.height="50px",a.style.background="black",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.zIndex=999999999;var b=document.createElement("div");b.class="viewabilityDebug",b.style.width="50px",b.style.height="50px",b.style.background="black",b.style.position="absolute",b.style.top="0",b.style.right="0",b.style.zIndex=999999999;var c=document.createElement("div");c.class="viewabilityDebug",c.style.width="50px",c.style.height="50px",c.style.background="black",c.style.position="absolute",c.style.bottom="0",c.style.left="0",c.style.zIndex=999999999;var d=document.createElement("div");d.class="viewabilityDebug",d.style.width="50px",d.style.height="50px",d.style.background="black",d.style.position="absolute",d.style.bottom="0",d.style.right="0",d.style.zIndex=999999999,this._upperLeftCorner=a,this._upperRightCorner=b,this._lowerLeftCorner=c,this._lowerRightCorner=d,this._wrapperElement.appendChild(a),this._wrapperElement.appendChild(b),this._wrapperElement.appendChild(c),this._wrapperElement.appendChild(d)}},d.prototype.prependToLogger=function(a){this._logger&&(this._logger.innerHTML=a+"<br/>"+this._logger.innerHTML)},d.prototype.appendUEBU=function(a,b,c){if(this._uebuLogger){c||(c=Date.now());var d=e.loggedUEBU(),g=d[d.length-1],h=e.timeZero;g&&(h=g[2]);var i=c-h;this._uebuLogger.innerHTML="<b>"+f.pixels[a]+" | "+a+" - TDiff ("+i/1e3+"s) </b><br/>"+this._uebuLogger.innerHTML}},d.prototype.showUEBULogger=function(a){if(!1===a&&this._logger)return this._wrapperElement.ownerDocument.removeChild(this._uebuLogger),void(this._uebuLogger=null);if(!this._uebuLogger&&this._wrapperElement&&a){var b=document.createElement("div");b.class="uebuLogger",b.style.width="35%",b.style.height="100%",b.style.background="#ddd",b.style.position="absolute",b.style.top="0",b.style.right="0",b.style.bottom="0",b.style.zIndex=999999999,b.style.overflowY="scroll",b.style.color="#000",this._uebuLogger=b,this._wrapperElement.ownerDocument.body.appendChild(b);var c=e.loggedUEBU();for(var d in c)if(c.hasOwnProperty(d)){var f=c[d];this.appendUEBU(f[0],f[1],f[2])}}},d.prototype.showLogger=function(a){if(!1===a&&this._logger)return this._wrapperElement.ownerDocument.removeChild(this._logger),void(this._logger=null);if(!this._logger&&this._wrapperElement&&a){var b=document.createElement("div");b.class="viewabilityDebug",b.style.width="35%",b.style.height="100%",b.style.background="black",b.style.position="absolute",b.style.top="0",b.style.right="0",b.style.bottom="0",b.style.zIndex=999999999,b.style.overflowY="scroll",b.style.color="#fff",this._logger=b,this._wrapperElement.ownerDocument.body.appendChild(b)}},b.exports=d},{"./../constants.js":9,"./log.js":17}],17:[function(a,b,c){function d(a,b){var c=[];void 0===b&&(b=!1);for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];"object"==typeof e?e instanceof HTMLElement&&!b?c.push(e):e instanceof HTMLElement&&b?c.push(e.id):b?c.push(JSON.stringify(e)):c.push(JSON.parse(JSON.stringify(e))):c.push(e)}return c}function e(){this.verifyDebug=!1,this.logs={},this.timeZero=Date.now(),this._loggedUEBU=[]}Date.now||(Date.now=function(){return(new Date).getTime()});var f=a("./../constants.js");e.prototype.loggedUEBU=function(){return this._loggedUEBU},e.prototype.uebu=function(a,b,c){if(this.verifyDebug){var e=["%c[Adtricity UEBU]","background: #008040; color: #fff;"],g=d(b);if(e.concat(g),this.dispatch){var h=c;c&&(h="UEBU : "+c);var i=Date.now();this.dispatch.publish(f.notificationEvents.logPublished,"network",h),this.dispatch.publish(f.notificationEvents.uebuPublished,a,b,c),this._loggedUEBU.push([a,c,i]),this.logs[i]=["uebu",h]}}},e.prototype.events=function(a,b){if(this.verifyDebug){var c=["%c[Adtricity Events]","background: #008040; color: #fff;"],e=d(arguments);if(c.concat(e),this.dispatch){var g=a;g&&b&&(g=a+" : "+b),this.dispatch.publish(f.notificationEvents.logPublished,"events",g),this.logs[Date.now()]=["events",g]}}},e.prototype.network=function(a,b){if(this.verifyDebug){var c=["%c[Adtricity Network]","background: #008040; color: #fff;"],e=d(arguments);if(c.concat(e),this.dispatch){var g=a;a&&b&&(g=b+" : "+a),this.dispatch.publish(f.notificationEvents.logPublished,"network",g),this.dispatch.publish(f.notificationEvents.networkPublished,a),this.logs[Date.now()]=["network",g]}}},e.prototype.log=function(a,b){var c=["%c[Adtricity]","background: #008040; color: #fff;"],e=d(arguments);if(c.concat(e),this.dispatch){var g=d(arguments,!0).join(" ");this.dispatch.publish(f.notificationEvents.logPublished,"log",g),this.logs[Date.now()]=["log",g]}},e.prototype.error=function(a,b){if(this.verifyDebug){var c=["%c[Adtricity Error]","background: #D12D30; color: #fff;"],e=d(arguments);if(c.concat(e),this.dispatch){var g=d(arguments,!0).join(" ");this.dispatch.publish(f.notificationEvents.logPublished,"error",g),this.logs[Date.now()]=["error",g]}}},e.prototype.setDebug=function(a){this.verifyDebug=a||!1},e.prototype.debug=function(){if(this.verifyDebug){var a=["%c[Adtricity Debug]","background: #10627F; color: #fff;"],b=d(arguments);if(a.concat(b),this.dispatch){var c=d(arguments,!0).join(" ");this.dispatch.publish(f.notificationEvents.logPublished,"debug",c),this.logs[Date.now()]=["debug",c]}}},e.instance=null,e.singleton=function(){return null===this.instance&&(this.instance=new e),this.instance},b.exports=e.singleton()},{"./../constants.js":9}],18:[function(a,b,c){function d(){this.macroStore={}}d.prototype.set=function(a,b){return this.macroStore||(this.macroStore={}),this.macroStore[a]=b,b},d.prototype.append=function(a,b){this.macroStore||(this.macroStore={});var c=this.macroStore[a];return c&&null!==c&&void 0!==c?(this.macroStore[a]+=b,this.macroStore[a]):this.set(a,b)},d.prototype.processString=function(a){var b=a;if(void 0===b||null===b)return null;var c,d;for(c in this.macroStore)try{this.macroStore.hasOwnProperty(c)&&(d=this.macroStore[c],void 0!==d&&null!==d||(d=""),b&&"string"==typeof b&&b.replace&&(b=b.replace(c,d)))}catch(a){}return b},d.prototype.clone=function(){var a=new d;return a.macroStore=this.macroStore,a},b.exports=d},{}],19:[function(a,b,c){function d(){}var e=a("./../constants.js"),f=a("./../monitor/environment.js"),g=a("./../support/log.js"),h=a("./uebu.js");d.setValue=function(a,b,c,d){h.setValue(a,b,c,d)},d.fire=function(a,b,c,d){g.debug("vjs - TrackingPixel.fire "+a),h.fire(a,b,c,d)},d.fireInfoPixel=function(a,b){if(a.useInfoPixels&&!a.infoPixels.indexOf(b)>=0){var c="";try{c=f.getDebugString(a)}catch(a){}var d={code:b,debug:c};h.fire(e.Pixel.INFO,d),a.infoPixels.push(b)}},d.fireErrorPixel=function(a,b){if(!a.errorPixels.indexOf(b)>=0){var c="";try{c=f.getDebugString(a)}catch(a){}var d={code:b,debug:c};h.fire(e.Pixel.ERROR,d),a.errorPixels.push(b)}},b.exports=d},{"./../constants.js":9,"./../monitor/environment.js":10,"./../support/log.js":17,"./uebu.js":20}],20:[function(a,b,c){function d(){f.apply(this);var a={event_id:"$SUGR_CUSTOM_EVENT_ID$",event_arguments:"$SUGR_EVENT_ARGUMENT$",event_parameters:"$SUGR_EVENT_PARAM$",event_object:"$SUGR_EVENT_OBJ$",sugr_json:"$SUGR_JSON_USED$",sugr_location:"$APP_SUGR_LOCATION$",sugr_version:"$APP_SUGR_VERSION$",adtricity_location:"$APP_ADT_LOCATION$",adtricity_version:"$APP_ADT_VERSION$",sugr_query_string:"$SUGR_QUERY_PARAMETERS$",callback_result:"$REASON_FOR_CALLBACK$",ad_width:"$SUGR_AD_WIDTH$",ad_height:"$SUGR_AD_HEIGHT$",domain:"$SUGR_DETERMINED_DOMAIN$",snapshot_viewability:"$SNAP_IN_VIEW$"};this.propertyMacroMap=a,this._injectionPixelFired=!1;for(var b in a)a.hasOwnProperty(b)&&this.set(a[b],"");this.uebuURLs={},this.datastore={}}function e(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);for(var e in b)b.hasOwnProperty(e)&&(c[e]=b[e]);return c}var f=a("./macros.abstract"),g=a("./../support/log.js"),h=a("./../constants.js");d.prototype=Object.create(f.prototype),d.prototype.setValue=function(a,b,c,d){void 0===d&&(d=!0);var e=this.propertyMacroMap[a];e&&(void 0!==b&&null!==b||(b=c||""),typeof b==typeof{}&&(b=0===Object.keys(b).length?"":JSON.stringify(b)),d&&(b=encodeURIComponent(b)),this.set(e,b))},d.prototype.setQueryStringURL=function(a){this.queryStringURL=a},d.prototype.addURL=function(a){if(g.debug("vjs - addURL "+a),a){var b=function(a){return a.match(/l\=\w*/)[0]+a.match(/b\=\w*/)[0]+a.match(/c\=\w*/)[0]}(a);this.uebuURLs[b]||(this.uebuURLs[b]=a,this._injectionPixelFired&&this.fire_single(a,5351))}},d.prototype.urls=function(){var a=[];for(var b in this.uebuURLs)this.uebuURLs.hasOwnProperty(b)&&a.push(this.uebuURLs[b]);return this.queryStringURL&&a.push(this.queryStringURL),a},d.prototype.addParameter=function(a,b){this.datastore[this.propertyMacroMap.event_parameters]+=a+"="+b+";"},d.prototype.addEventArgument=function(a,b){this.datastore[this.propertyMacroMap.event_arguments]||(this.datastore[this.propertyMacroMap.event_arguments]={}),this.datastore[this.propertyMacroMap.event_arguments][a]=b},d.prototype.fire=function(a,b,c,d,f){5351===a&&(this._injectionPixelFired=!0);var i=a;if(this.runtime&&this.runtime.debug)try{a=h.pixels[a]+"_"+a}catch(a){}var j=e(this.datastore[this.propertyMacroMap.event_arguments],b),k=[];this.setValue("event_id",a,"-99"),this.setValue("event_arguments",function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+":"+a[c]);return b.join("|")}(j),{},!1),this.setValue("event_parameters",c,{},!1),this.setValue("event_object",d,{});var l;if(f&&""!==f)l=this.processString(f),k.push(l),this.__writeURL(l),g.uebu(i,j,l);else{var m=this.urls();for(var n in m)m.hasOwnProperty(n)&&(f=m[n],l=this.processString(f),k.push(l),this.__writeURL(l),g.uebu(i,j,l))}return this.setValue("event_id",null),this.setValue("event_arguments",null),this.setValue("event_parameters",null),this.setValue("event_object",null),k},d.prototype.fire_single=function(a,b,c,d,e){return this.fire(b,c,d,e,a)},d.prototype.__writeURL=function(a,b){if(b||(b=""),document){var c=document.createElement("img");c.className="adtricity",c.src=a,c.width=0,c.height=0,c.style.display="none",document.body.appendChild(c),g.network(a)}else g.error("No document available to write pixels")},d.instance=null,d.singleton=function(){return null===this.instance&&(this.instance=new d),this.instance},b.exports=d.singleton()},{"./../constants.js":9,"./../support/log.js":17,"./macros.abstract":18}]},{},[7]);