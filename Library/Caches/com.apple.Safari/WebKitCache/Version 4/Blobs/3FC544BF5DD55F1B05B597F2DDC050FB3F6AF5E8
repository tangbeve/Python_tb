!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.getVPAIDAd=a()}}(function(){var a;return function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){return e(b[g][1][a]||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";b.exports={diagHost:"localhost:4444"}},{}],2:[function(a,b,c){"use strict";b.exports={diagHost:"geo-errserv.btrll.com"}},{}],3:[function(a,b,c){"use strict";function d(a,b,c){var d=c||"";try{d=a&&b in a?a[b]:d}catch(a){}return d}function e(a){return parseFloat(a,10)}function f(a){return a===+a&&a===(0|a)}function g(){try{cc=!!Rb.top.document}catch(a){}}function h(){Hb=cc&&ac?Rb.parent:Rb}function i(){dc=Rb.$sf&&Rb.$sf.ext&&"function"==typeof Rb.$sf.ext[yb]||!1}function j(){try{_b=/((iPhone|iPod|iPad).*AppleWebKit(?!.*(Safari|CriOS)))/i.test(Xb)||"chrome"===Zb&&(/wv\).* Chrome.* Mobile/i.test(Xb)||/Version\/\d*\.\d* (?:Chrome.* Mobile)?/i.test(Xb))||/(MSAppHost\/.*|WebView)/.test(Xb)}catch(a){}}function k(){Ib=-1!==Xb.indexOf("Chrome/")?1:-1!==Xb.indexOf("Firefox/")?2:-1!==Xb.indexOf("; MSIE")?3:-1!==Xb.indexOf("Safari/")?4:-1!==Xb.indexOf("WebKit")?5:-1!==Xb.indexOf("Gecko")?6:7}function l(){void 0!==Sb.hidden?(Jb="hidden",Kb="visibilitychange"):void 0!==Sb.mozHidden?(Jb="mozHidden",Kb="mozvisibilitychange"):void 0!==Sb.webkitHidden?(Jb="webkitHidden",Kb="webkitvisibilitychange"):void 0!==Sb.msHidden&&(Jb="msHidden",Kb="msvisibilitychange")}function m(a){var b={width:0,height:0,valid:!0};try{var c=Rb.getComputedStyle&&Rb.getComputedStyle(a,Ya)||a.currentStyle;b.width=e(c.width)||0,b.height=e(c.height)||0}catch(a){b.width=0,b.height=0,b.valid=!1}return b}function n(a){var b=m(a);return b.width<=Cb||b.height<=Db}function o(a,b){if(arguments.length>0&&f(a)&&f(b))Mb=a,Lb=b;else{var c,d;if(bc)try{c=Sb.documentElement&&Math.max(Sb.documentElement.clientWidth,Sb.documentElement.scrollWidth)||Rb.frameElement&&Rb.frameElement.width||Ya,d=Sb.documentElement&&Math.max(Sb.documentElement.clientHeight,Sb.documentElement.scrollHeight)||Rb.frameElement&&Rb.frameElement.height||Ya}catch(a){c=Rb.innerWidth||Sb.body&&Sb.body.clientWidth||Ya,d=Rb.innerHeight||Sb.body&&Sb.body.clientHeight||Ya}else{var e=m(Qb);c=e.width||Ya,d=e.height||Ya}Mb=c,Lb=d}Nb=Mb*Lb>=_a,Ob=Nb?Za:$a}function p(a,b){if(Pb=a,g(),h(),i(),j(),k(),l(),b)Qb=b;else if(bc){if(cc)try{Qb=Rb.frameElement}catch(a){Qb=Ya}else if(Qb=Sb.body||Ya,n(Qb)){for(var c,d=Qb.getElementsByTagName("div"),e=0;e<d.length;e++)if(!n(d[e])){c=d[e];break}if(!c){var f=Qb.getElementsByTagName("video");for(e=0;e<f.length;e++)if(!n(f[e])){c=f[e];break}}c&&(Qb=c)}}else Qb=Pb&&(Pb.parentElement||Pb.parentNode)||Ya;return Pb!==Ya&&void 0!==Pb&&Qb!==Ya&&void 0!==Qb}function q(a){var b,c="";if(a&&"string"==typeof a)try{b=a.match(/^https?:\/\/([-\w\.]*)(:\d+)?([\/\?#]|$)/),b&&b[1]&&(c=b[1])}catch(a){c=""}return c}function r(a,b){return Math.floor((b-a)/1e3)}function s(a,b,c){c=c||Rb,c.addEventListener?c.addEventListener(a,b):c.attachEvent&&c.attachEvent("on"+a,b)}function t(a,b,c){c=c||Rb,c.removeEventListener?c.removeEventListener(a,b):c.detachEvent&&c.detachEvent("on"+a,b)}function u(a,b){var c,d,e,f,g,h=a>db?a-db:0,i=b>db?b-db:0,j=[],k={};for(c=.5;c<eb;c+=1)for(e=Math.round(c*h/eb),d=.5;d<eb;d+=1)f=Math.round(d*i/eb),g=e+"_"+f,k[g]||(j.push(g),k[g]=1);return j}function v(a){var b,c=(new Date).getTime(),d=r(a.scrollStartTime,c),e=Hb.scrollY-a.scrollStartY,f=Hb.document.body.clientHeight;f||(f=Hb.document.body.height),b=Math.round(Hb.scrollY/f*100),b>a.scd&&(a.scd=b),e>0?(a.scrolledDownPixels+=e,a.scrolledDownTime+=d):(a.scrolledUpPixels-=e,a.scrolledUpTime+=d),a.scrollStartTime=0}function w(a){var b=(new Date).getTime();a.scr=1,a.sct||(a.sct=r(ec,b)),a.scrollStartTime&&0!==a.scrollStartTime||(a.scrollStartTime=b,a.scrollStartY=Hb.scrollY),fc||clearTimeout(fc),fc=setTimeout(function(){v(a)},250)}function x(a){s("scroll",function(){w(a)},Hb)}function y(a){var b=(new Date).getTime();a.hov=1,a.tth||(a.tth=r(ec,b)),a.hoverStartTime=b}function z(a){var b=(new Date).getTime();r(a.hoverStartTime,b)>500&&(a.intt=1,a.intl=b,a.tti=r(ec,b))}function A(a){s("mouseover",function(){y(a)}),s("mouseout",function(){z(a)})}function B(a){var b=(new Date).getTime();Sb[Jb]&&a.dwellStartTime>0?a.adt+=r(a.dwellStartTime,b):(a.foc=1,a.dwellStartTime=b)}function C(a){Sb[Jb]||B(a),s(Kb,function(){B(a)},Sb)}function D(){var a;a=Rb.onerror,Rb.onerror=function(b,c,d,e,f){return gc.ae+=1,!!a&&a(b,c,d,e,f)}}function E(){bc&&A(gc),C(gc),(!bc||cc&&ac)&&x(gc),D()}function F(){if(bc)for(var a=Sb.getElementsByTagName("iframe"),b=0;b<a.length;b++)if(!n(a[b]))try{var c=a[b].contentDocument?a[b].contentDocument:a[b].contentWindow?a[b].contentWindow.document:a[b].document;c.getElementsByTagName("div")}catch(a){return!0}return!1}function G(a){var b="tp="+(Nb?"2":"1");return b+=":mt="+a.measurementBucket,b+=":iww="+(_b?"2":"1"),b+=":aif="+(F()?"1":"0"),b+=":iif="+(bc?"1":"0"),b+=":fns="+a.flashNotSupported}function H(a,b,c,d){return a.indexOf(b)>-1?a.replace(b,d):a+"&"+c+"="+d}function I(a,b,c,d,e,f,g){var h=(new Date).getTime();if(a)try{a=a.replace("%InViewPercentage%",e.getAverageInViewPercentage()),a=a.replace("{pctview}",e.getAverageInViewPercentage()),a=a.replace("%Viewable%",c?"1":"2"),a=a.replace("{initview}",c?"1":"2"),a=H(a,"%Measurable%","im",d?"1":"2"),a=a.replace("%MeasurementType%",b),a=H(a,"%Timestamp%","r",h),a=H(a,"%BucketId%","b",wb),a=H(a,"%AdditionalData%","ad","jv="+xb+(g&&""!==g?":"+g:"")+":"+G(e)),f&&(a+="&"+f),Wa(a)}catch(a){}}function J(a,b){return a.charCodeAt(b)}function K(a,b){return oc.call(a,b)}function L(a,b,c){return oc.call(a,b,c)}function M(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];c=O(c,d,e,f,b[0],7,-680876936),f=O(f,c,d,e,b[1],rc,-389564586),e=O(e,f,c,d,b[2],wc,606105819),d=O(d,e,f,c,b[3],zc,-1044525330),c=O(c,d,e,f,b[4],7,-176418897),f=O(f,c,d,e,b[5],rc,1200080426),e=O(e,f,c,d,b[6],wc,-1473231341),d=O(d,e,f,c,b[7],zc,-45705983),c=O(c,d,e,f,b[8],7,1770035416),f=O(f,c,d,e,b[9],rc,-1958414417),e=O(e,f,c,d,b[pc],wc,-42063),d=O(d,e,f,c,b[qc],zc,-1990404162),c=O(c,d,e,f,b[rc],7,1804603682),f=O(f,c,d,e,b[sc],rc,-40341101),e=O(e,f,c,d,b[tc],wc,-1502002290),d=O(d,e,f,c,b[uc],zc,1236535329),c=P(c,d,e,f,b[1],5,-165796510),f=P(f,c,d,e,b[6],9,-1069501632),e=P(e,f,c,d,b[qc],tc,643717713),d=P(d,e,f,c,b[0],xc,-373897302),c=P(c,d,e,f,b[5],5,-701558691),f=P(f,c,d,e,b[pc],9,38016083),e=P(e,f,c,d,b[uc],tc,-660478335),d=P(d,e,f,c,b[4],xc,-405537848),c=P(c,d,e,f,b[9],5,568446438),f=P(f,c,d,e,b[tc],9,-1019803690),e=P(e,f,c,d,b[3],tc,-187363961),d=P(d,e,f,c,b[8],xc,1163531501),c=P(c,d,e,f,b[sc],5,-1444681467),f=P(f,c,d,e,b[2],9,-51403784),e=P(e,f,c,d,b[7],tc,1735328473),d=P(d,e,f,c,b[rc],xc,-1926607734),c=Q(c,d,e,f,b[5],4,-378558),f=Q(f,c,d,e,b[8],qc,-2022574463),e=Q(e,f,c,d,b[qc],vc,1839030562),d=Q(d,e,f,c,b[tc],Ac,-35309556),c=Q(c,d,e,f,b[1],4,-1530992060),f=Q(f,c,d,e,b[4],qc,1272893353),e=Q(e,f,c,d,b[7],vc,-155497632),d=Q(d,e,f,c,b[pc],Ac,-1094730640),c=Q(c,d,e,f,b[sc],4,681279174),f=Q(f,c,d,e,b[0],qc,-358537222),e=Q(e,f,c,d,b[3],vc,-722521979),d=Q(d,e,f,c,b[6],Ac,76029189),c=Q(c,d,e,f,b[9],4,-640364487),f=Q(f,c,d,e,b[rc],qc,-421815835),e=Q(e,f,c,d,b[uc],vc,530742520),d=Q(d,e,f,c,b[2],Ac,-995338651),c=R(c,d,e,f,b[0],6,-198630844),f=R(f,c,d,e,b[7],pc,1126891415),e=R(e,f,c,d,b[tc],uc,-1416354905),d=R(d,e,f,c,b[5],yc,-57434055),c=R(c,d,e,f,b[rc],6,1700485571),f=R(f,c,d,e,b[3],pc,-1894986606),e=R(e,f,c,d,b[pc],uc,-1051523),d=R(d,e,f,c,b[1],yc,-2054922799),c=R(c,d,e,f,b[8],6,1873313359),f=R(f,c,d,e,b[uc],pc,-30611744),e=R(e,f,c,d,b[6],uc,-1560198380),d=R(d,e,f,c,b[sc],yc,1309151649),c=R(c,d,e,f,b[4],6,-145523070),f=R(f,c,d,e,b[qc],pc,-1120210379),e=R(e,f,c,d,b[2],uc,718787259),d=R(d,e,f,c,b[9],yc,-343485551),a[0]=Ec(c,a[0]),a[1]=Ec(d,a[1]),a[2]=Ec(e,a[2]),a[3]=Ec(f,a[3])}function N(a,b,c,d,e,f){return b=Ec(Ec(b,a),Ec(d,f)),Ec(b<<e|b>>>Cc-e,c)}function O(a,b,c,d,e,f,g){return N(b&c|~b&d,a,b,e,f,g)}function P(a,b,c,d,e,f,g){return N(b&d|c&~d,a,b,e,f,g)}function Q(a,b,c,d,e,f,g){return N(b^c^d,a,b,e,f,g)}function R(a,b,c,d,e,f,g){return N(c^(b|~d),a,b,e,f,g)}function S(a){for(var b=a.length,c=[1732584193,-271733879,-1732584194,271733878],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=Dc;e<=b;e+=Dc)M(c,T(L(a,e-Dc,e))),e+=Dc;for(a=K(a,e-Dc),e=0,b=a.length;e<b;e++)d[e>>2]|=J(a,e)<<(e%4<<3);if(d[e>>2]|=Gc<<(e%4<<3),e>55)for(M(c,d),e=0;e<vc;e++)d[e]=0;return d[tc]=8*b,M(c,d),c}function T(a){var b,c=[];for(b=0;b<Dc;b+=4)c[b>>2]=J(a,b)+(J(a,b+1)<<8)+(J(a,b+2)<<vc)+(J(a,b+3)<<Bc);return c}function U(a){return[hc[a>>4&Hc],hc[a>>0&Hc],hc[a>>rc&Hc],hc[a>>8&Hc],hc[a>>xc&Hc],hc[a>>vc&Hc],hc[a>>Bc+4&Hc],hc[a>>Bc&Hc]].join("")}function V(a){for(var b=0,c=a.length;b<c;b++)a[b]=U(a[b]);return a.join("")}function W(a,b){return a+b&ic}function X(a,b){var c=(a&Fc)+(b&Fc);return(a>>vc)+(b>>vc)+(c>>vc)<<vc|c&Fc}function Y(a){if(nc)throw new Error(kc);return""}function Z(){return $(lc)===mc}function $(a){return V(S(a))}function _(){var a,b,c,d=0,e=0,f=0,g=[],h=/(r\-(.*)\.html)|(sf(.*?)\.js)/gi;try{a=Rb[qb],a&&Xa(a[rb])===tb&&(g=a[rb](sb))}catch(a){g=[]}for(;b=g[e++];){try{c=b.name,f=b.transferSize}catch(a){c=fb,f=0}f&&f>0&&c&&-1===c.search(h)&&(d+=f)}return d}function aa(){var a,b,c,d;try{d=Sb.createElement("canvas")}catch(a){}return d&&d.getContext?(d.style.border="1px solid black",d.width=16,d.height=22,c=d.getContext("2d"),c[lb]=ob,c.font="15px 'Arial'",c[lb]="alphabetic",c[mb]="#ffa",c.fillRect(1,1,15,20),c[mb]="#00a",c[nb]("yj",2,15),c[mb]="rgba(100, 100, 100, 0.7)",c[nb]("yj",4,17),a=d.toDataURL("image/png"),b=a.split(","),Ic(2===b[kb]?b[1]:a)):Ic(fb)}function ba(a){var b,c,d="";try{if(c=Vb&&Vb.ancestorOrigins){if(b=c.length){d=q(c[b-1]);for(var e=0,f=q(c[0]);e<b-1&&d.length+(0===e?hb:gb).length+f.length<=Fb;e++,f=q(c[e]))d+=(0===e?hb:gb)+f}a.sao=b||0}else a.sao=-1}catch(b){d="",a.sao=-1}return d}function ca(){var a,b,c=fb;try{for(b=Ub[ib][kb],a=0;a<b;a++)c!==fb&&(c+=gb),c+=Ub[ib][a][jb]}catch(a){c=fb}return c}function da(){var a=fb;try{a=3===Ib||"msie"===Zb||"trident"===Zb?fa():ca()}catch(b){a=fb}return Ic(a)}function ea(a){var b,c="";try{b=Ub[ib][a],b?c=b.name:(new Rb.ActiveXObject(a),c=a)}catch(a){c=fb}return c}function fa(){var a,b="",c="",d=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],e=d.length;for(a=0;a<e;a++)""!==(c=ea(d[a]))&&(""!==b&&(b+=gb),b+=c);return b}function ga(a){var b,c;return a&&-1!==(b=a.indexOf("sek="))?(c=a.indexOf("&",b+"sek=".length),-1===c&&(c=a.length),a.substring(b+"sek=".length,c)):fb}function ha(a,b){return b-a}function ia(){var a,b=0,c=Rb.top;try{if(c==Rb)b=0;else for(a=Rb.parent,b++;c!=a;)a=a.parent,b++}catch(a){b=-1}return b}function ja(a,b){var c,d,e,f=[];for(c=Sb.getElementsByTagName(a),d=0;d<c.length;d++)(e=c[d][vb](b))&&f.push(e);return f}function ka(a,b){var c,d,e,f=a.length,g=b.length;if(f!==g)return!1;for(c=0;c<f;c++){for(e=!1,d=0;d<g;d++)-1!==a[c].indexOf(b[d])&&(e=!0);if(!e)return!1}return!0}function la(){var a,b,c=3,d=[],e=[],f=[],g=[],h=[],i=[];if(Rb&&Rb.performance&&Rb.performance.getEntriesByType&&"function"==typeof Rb.performance.getEntriesByType){for(d=ja("img","src"),f=ja("script","src"),h=ja("object","data"),a=Rb.performance.getEntriesByType("resource"),b=0;b<a.length;b++)"img"===a[b].initiatorType?e.push(a[b].name):"script"===a[b].initiatorType?g.push(a[b].name):"object"===a[b].initiatorType&&i.push(a[b].name);ka(d,e)||(c=2),ka(f,g)||(c=2),ka(h,i)||(c=2),2!==c&&(c=1)}return c}function ma(a,b,c,d,e){var f="",g=(new Date).getTime();return f+="sek="+ga(b),f+="&gm0="+c.inView100For0Sec,f+="&gm1="+c.inView100For1Sec,f+="&tivt="+c.totalInViewTime,f+="&hov="+a.hov,f+="&tth="+a.tth,f+="&intt="+a.intt,f+="&intl="+a.intl,f+="&tti="+a.tti,f+="&st="+ha(ec,g),f+="&foc="+a.foc,Sb&&!Sb[Jb]&&(a.adt+=ha(a.dwellStartTime,g)),f+="&adt="+a.adt,f+="&scr="+a.scr,f+="&ph="+a.ph,f+="&scd="+a.scd,f+="&svd="+(a.scrolledDownTime>0?Math.round(a.scrolledDownPixels/a.scrolledDownTime):0),f+="&svu="+(a.scrolledUpTime>0?Math.round(a.scrolledUpPixels/a.scrolledUpTime):0),f+="&sct="+a.sct,f+="&mivp="+c.maxInViewPercentage,f+="&mivt="+c.maxInViewTime,f+="&ls="+c.measurementBucket,f+="&winl="+Jc(q(Vb)),f+="&winr="+Jc(q(Sb&&Sb.referrer)),f+="&lvl="+ia(),f+="&atf=0",f+="&al="+la(),f+="&ae="+a.ae,f+="&aw="+_(),f+="&ao="+ba(a),f+="&sao="+a.sao,f+="&lang="+Jc(Wb),f+="&sw="+(Tb?Tb.width:0),f+="&sh="+(Tb?Tb.height:0),f+="&tzo="+(new Date).getTimezoneOffset(),f+="&plgn="+Jc(da()),f+="&ci="+Jc(aa()),f+="&b="+wb,f+="&ad=jv="+xb+(e?":"+e:"")+":"+G(c),d&&(f+="&"+d),f}function na(a,b,c,d,e){try{Wa(ub+ma(a,b,c,d,e))}catch(a){}}function oa(a){var b={x:0,y:0};return a.x>=a.scrlX&&a.x+a.halfWidth<a.scrlX+a.viewportWidth?b.x=a.scrlX+a.viewportWidth-a.x:a.x+a.halfWidth>a.scrlX&&a.x+a.adWidth<=a.scrlX+a.viewportWidth?b.x=a.x+a.adWidth-a.scrlX:a.x<a.scrlX&&a.x+a.adWidth>a.scrlX+a.viewportWidth&&a.viewportWidth>=a.halfWidth&&(b.x=a.viewportWidth),a.y>=a.scrlY&&a.y+a.halfHeight<a.scrlY+a.viewportHeight?b.y=a.scrlY+a.viewportHeight-a.y:a.y+a.halfHeight>a.scrlY&&a.y+a.adHeight<=a.scrlY+a.viewportHeight?b.y=a.y+a.adHeight-a.scrlY:a.y<a.scrlY&&a.y+a.adHeight>a.scrlY+a.viewportHeight&&a.viewportHeight>=a.halfHeight&&(b.y=a.viewportHeight),b}function pa(a){return a.scrlX=0,a.scrlY=0,oa(a)}function qa(){1===Ib||4===Ib||5===Ib||7===Ib?Lc=oa:2!==Ib&&3!==Ib&&6!==Ib||(Lc=pa)}function ra(a){var b,c=a.bcr,d=a.adWidth,e=a.adHeight,f=d&&e?d*e:0,g=Rb.parent,h=g.document,i=h.body,j={};return j.x=Math.round(c.left+i.scrollLeft),j.y=Math.round(c.top+i.scrollTop),j.adWidth=d,j.adHeight=e,j.halfWidth=Math.floor(d/2),j.halfHeight=Math.floor(e/2),j.viewportWidth=Math.max(h.documentElement.clientWidth,Rb.innerWidth||0),j.viewportHeight=Math.max(h.documentElement.clientHeight,Rb.innerHeight||0),j.scrlX=g.scrollX,j.scrlY=g.scrollY,b=Lc(j),b.x>d&&(b.x=d),b.y>e&&(b.y=e),f?Math.round(100*b.x*b.y/f):0}function sa(a,b){var c,d=b.split("_");return 2===d.length&&(c=Sb.createElement("iframe"),c.style.cssText="width:"+db+"px;height:"+db+"px;left:"+d[0]+"px;top:"+d[1]+"px;position:absolute;background-color:transparent;",c.scrolling="no",c.allowtransparency="true",c.hidefocus="true",c.setAttribute("frameBorder","0"),c.id=b,a.lastMozPaintCounts[b]=0,a.paintCounts[b]=0,a.paintTimestamps[b]=0,a.lastPaintCounts[b]=0,a.lastPaintTimestamps[b]=0),c}function ta(a){var b;for(a.tags=u(Mb,Lb),a.numTag=a.tags.length,a.tagArray=[],b=0;b<a.numTag;b++)a.tagArray.push(sa(a,a.tags[b]));for(b=0;b<a.numTag;b++)Sb.body.appendChild(a.tagArray[b])}function ua(a,b){var c=Sb.getElementById(b);c&&(c.style.visibility=c.style.visibility===bb?cb:bb)}function va(a,b,c){var d,e;if(a.paintTimestamps[c]=b,b>a.lastPaintTimestamps[c]&&(e=Sb.getElementById(c))){try{d=e.contentWindow,d.document||(d=Ya)}catch(a){d=Ya}d&&d.mozPaintCount>a.lastMozPaintCounts[c]&&(a.paintCounts[c]+=1,a.lastMozPaintCounts[c]=d.mozPaintCount)}}function wa(a,b){var c=Rb.requestAnimationFrame||Rb.mozRequestAnimationFrame||Ya;ua(a,b),c&&c(function(c){va(a,c,b)})}function xa(a){var b;for(b=0;b<a.numTag;b++)wa(a,a.tags[b])}function ya(a){var b,c,d=0;for(b=0;b<a.numTag;b++)c=a.tags[b],a.paintTimestamps[c]>a.lastPaintTimestamps[c]&&(a.paintCounts[c]>a.lastPaintCounts[c]&&(d+=1),a.lastPaintCounts[c]=a.paintCounts[c],a.lastPaintTimestamps[c]=a.paintTimestamps[c]);return d}function za(a){var b=0,c=0;if(Ca(a))for(;b<a.numTag;b++)Ba(a,b)&&c++;return c}function Aa(a){var b=null,c=Sb.getElementById(a);if(c&&"OBJECT"===c.nodeName)if(void 0!==c.SetVariable)b=c;else{var d=c.getElementsByTagName(pb)[0];d&&(b=d)}return b}function Ba(a,b){var c,d=Aa("Darla"+b);return!(!d||!d.jsCallback)&&(c=a.minFlashPaintCalls[a.isCurrentlyInView?"fine":"coarse"],d.jsCallback("count")>c)}function Ca(a){var b,c;return void 0!==a.tabVisibilityState?a.tabVisibilityState:(b=a.currentTimestamp-a.previousTimestamp,c=a.isCurrentlyInView?a.fineTimeout:a.coarseTimeout,b/c<5)}function Da(a){a.tabVisibilityState=!0,s(Kb,function(){a.tabVisibilityState=!Sb[Jb]})}function Ea(a,b){var c=Sb.createElement("div"),d=Sb.createElement("div"),e=a.split("_");return d.id=b,c.style.cssText="width: "+db+"px; height: "+db+"px; left: "+e[0]+"px; top: "+e[1]+"px; position: absolute; background-color: transparent; filter: alpha(opacity=10); opacity: 0.1;",c.classname="outer",c.appendChild(d),c}function Fa(a){var b,c,d,e,f={},g=ab+"playerProductInstall.swf",h={allowfullscreen:"false",allowscriptaccess:"always",bgcolor:"#ffffff",quality:"high",wmode:"transparent"};for(a.tags=u(Mb,Lb),a.numTag=a.tags.length,a.tagArray=[],b=0;b<a.numTag;b++)c="Darla"+b,d={align:"middle",id:c,name:c,style:"height: 1px; left: 50%; margin: -1px 0 0 -1px; position: absolute; top: 50%; width: 1px;"},e=Ea(a.tags[b],c),a.tagArray.push(e),Sb.body.appendChild(e),swfobject.embedSWF(ab+"Darla.swf",c,1,1,"11.4.0",g,f,h,d);swfobject.createCSS("#flashContent","display: block; text-align: left;")}function Ga(a,b){var c=Aa("Darla0"),d=(new Date).getTime();c&&c.jsCallback?(clearInterval(Ga.hook),a.lastTimestamp=d,b()):d-Ga.time>=Gb&&(clearInterval(Ga.hook),a.markFlashNotSupported(!0))}function Ha(a,b){var c,d=b.split("_");return 2===d.length&&(c=Sb.createElement("iframe"),c.style.cssText="width:"+db+"px;height:"+db+"px;left:"+d[0]+"px;top:"+d[1]+"px;position:absolute;background-color:transparent;",c.scrolling="no",c.allowtransparency="true",c.hidefocus="true",c.setAttribute("frameBorder","0"),c.id=b,a.painted[b]=0),c}function Ia(a){var b;for(a.tags=u(Mb,Lb),a.numTag=a.tags.length,a.tagArray=[],b=0;b<a.numTag;b++)a.tagArray.push(Ha(a,a.tags[b]));for(b=0;b<a.numTag;b++)Sb.body.appendChild(a.tagArray[b])}function Ja(a,b){this.timeout=a,this.callback=b,this.timeoutRef=0}function Ka(){var a="vd=1";return a+=":vv="+fd,a+=":clk="+($c.adClicked?"1":"0"),a+=":err="+($c.adErrored?"1":"0"),a+=":ve="+$c.getVideoEventBits(),a+=":ed="+(gd?"1":"0"),a+=":avoc="+gc.avoc_debug,a+=":psv="+(gd&&$c.playerSizeIsValid?"1":"0"),a+=":ap="+($c.adUnit&&$c.adUnit._videoSlotCanAutoPlay?"1":"0")}function La(){return"plw="+$c.playerWidth+"&plh="+$c.playerHeight}function Ma(){return"plw="+$c.playerWidth+"&plh="+$c.playerHeight+(gc.avoc>=0?"&avoc="+gc.avoc:"")+"&mivl="+$c.minVolume+"&mivlt="+$c.maxTimeAtMinVolume+"&mxvl="+$c.maxVolume+"&mxvlt="+$c.maxTimeAtMaxVolume}function Na(a){dd||($c.metViewableStandard(),Zc.metViewableStandard(),I(bd,"2",$c.inView&&Zc.inView,$c.isMeasurable&&Zc.isMeasurable,Zc,La(),Ka()+":fu="+(a?"1":"0"))),dd=!0}function Oa(){ed||na(gc,bd,Zc,Ma(),Ka()),ed=!0}function Pa(){Na(!0),Oa(),$c.cleanup(),Zc.cleanup()}function Qa(){Pa(),t(Ab,Ra),t(Bb,Sa)}function Ra(){Pa(),t(Ab,Ra)}function Sa(){Pa(),t(Bb,Sa)}function Ta(a){a?Qa():$c.isCurrentlyInView&&Zc.isCurrentlyInView&&_c.startTimer()}function Ua(a){_c.stopTimer(),a&&Qa()}function Va(a){if(a&&(bd=a.adParams&&a.adParams.viewabilityBeaconUrl)&&""!==bd){a.vpaidVersion&&(fd=a.vpaidVersion),a.videoSlot&&!n(a.videoSlot)?gd=p(a.videoSlot,a.videoSlot):a.slot&&(gd=p(a.slot)),o(a.adWidth,a.adHeight),_c=new Ja(Eb,Na);var b;if(gd){for(var c=0;c<ad.length&&!ad[c].prototype.canApplyMethod();c++);b=ad[c]}else b=Xc;Zc=new b({adWidth:Mb,adHeight:Lb,inViewCallback:Ta,outOfViewCallback:Ua}),$c=new Yc({adUnit:a.vpaidJSWrapper,playerId:a.adParams.playerId,inViewCallback:Ta,outOfViewCallback:Ua,adLoaded:function(){Zc.init(),cd=!0},adSizeChanged:function(){cd&&Zc.reset()},adVideoComplete:function(){$c.isCurrentlyInView&&Zc.isCurrentlyInView&&($c.minVolume>0&&999!==$c.minVolume?gc.avoc=1:999===$c.minVolume&&(gc.avoc=-1)),$c.adUnit&&$c.adUnit.getAdVolume?gc.avoc_debug=$c.adUnit.getAdVolume()>0?"1":"2":gc.avoc_debug="0"}}),$c.init(),s(zb,function(){o(),cd&&Zc.reset()}),s(Ab,Ra),s(Bb,Sa),E()}}Object.defineProperty(c,"__esModule",{value:!0});var Wa,Xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Ya=null,Za=30,$a=50,_a=242500,ab="https://s.yimg.com/rq/iv/",bb="hidden",cb="visible",db=1,eb=5,fb="",gb="",hb="",ib="plugins",jb="name",kb="length",lb="textBaseline",mb="fillStyle",nb="fillText",ob="top",pb="object",qb="performance",rb="getEntriesByType",sb="resource",tb="function",ub="https://beap-bc.yahoo.com/ym?",vb="getAttribute",wb="100",xb="1.0.132",yb="inViewPercentage",zb="resize",Ab="unload",Bb="beforeunload",Cb=20,Db=20,Eb=2e3,Fb=255,Gb=5e3;Wa=navigator.sendBeacon?function(a,b){navigator.sendBeacon(a,b)}:function(a,b){var c=new Image;b||(b=""),c.src=a+b};var Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb=window,Sb=document,Tb=d(Rb,"screen",Ya),Ub=d(Rb,"navigator",Ya),Vb=d(Rb,"location",Ya),Wb=d(Ub,"language",""),Xb=d(Ub,"userAgent",""),Yb=Xb.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i),Zb=RegExp.$1.toLowerCase(),$b=parseFloat(Xb.match(/version\/([\d]+)/i)&&RegExp.$1||Yb&&Yb[2]||""),_b=(Xb.match(/((ip)(hone|ad|od)|playbook|hp-tablet)/i)&&RegExp.$1.toLowerCase(),Xb.match(/(android|blackberry|bb10|macintosh|webos|windows)/i)&&RegExp.$1.toLowerCase(),!1),ac=!1,bc=!1,cc=!1,dc=!1,ec=(new Date).getTime();!function(){try{var a=Rb.parent,b=Rb.top;ac=!(!b||!a||b!=a||b==Rb),bc=!(!a||!a||a==Rb)}catch(a){}}();var fc,gc={w:0,h:0,mw:-1,mh:-1,bl:-1,bt:-1,ew:-1,eh:-1,ex:-1,ey:-1,vw:-1,vh:-1,sx:-1,sy:-1,ivp:-1,ivd:-1,pt:-1,mi:-1,b:-1,gm0:0,gm1:0,m:-1,tivt:0,hov:2,tth:0,intt:2,intl:0,tti:0,st:0,foc:2,adt:0,scr:2,scd:0,svd:0,svu:0,sct:0,mivp:0,mivt:0,ls:0,winl:"",winr:"",lvl:0,al:3,ae:0,bct:2,ph:-1,dwellStartTime:0,scrolledUpPixels:0,scrolledUpTime:0,scrolledDownPixels:0,scrolledDownTime:0,avoc:0,avoc_debug:0},hc=(function(){function a(a){return Math.floor(Math.random()*(10*a))}function b(b){var f=d;d+=e,e=a(100);try{b=b&&String(b)}catch(a){b=""}return b=b||c,f=b+"_"+f}var c="$yinsideIV",d=(new Date).getTime()-a(1e5),e=a(100)}(),"0123456789abcdef".split("")),ic=4294967295,jc=0,kc="MD5 module is broken",lc="hello",mc="5d41402abc4b2a76b9719d911017c592",nc=0,oc=String.prototype.substring,pc=10,qc=11,rc=12,sc=13,tc=14,uc=15,vc=16,wc=17,xc=20,yc=21,zc=22,Ac=23,Bc=24,Cc=32,Dc=64,Ec=W,Fc=65535,Gc=128,Hc=uc;Z()?jc=1:(Ec=X,jc=Z()?1:0);var Ic=jc?$:Y,Jc=encodeURIComponent,Kc=function(a){this.adWidth=a.adWidth,this.adHeight=a.adHeight,this.inViewCallback=a.inViewCallback,this.outOfViewCallback=a.outOfViewCallback,this.thresholdPercentage=a.thresholdPercentage||Ob,this.inViewPercentage=0,this.inViewPercentages=[],this.maxInViewPercentage=0,this.inView=!1,this.isMeasurable=!0,this.isCurrentlyInView=!1,this.currentTimestamp=0,this.lastTimestamp=0,this.nextTimestamp=0,this.totalInViewTime=0,this.maxInViewTime=0,this.totalInView100Time=0,this.inView100StartTime=0,this.lastInView100Timestamp=0,this.inView100For0Sec=0,this.inView100For1Sec=0,this.stopCallbacks=!1,this.adLoaded=a.adLoaded,this.playerId=a.playerId,this.adUnit=a.adUnit,this.adSizeChanged=a.adSizeChanged,this.adVideoComplete=a.adVideoComplete,this.flashNotSupported=0};Kc.prototype.beaconTimeout=1e3,Kc.prototype.measurementBucket="2",Kc.prototype.init=function(){this.registerInViewListener()},Kc.prototype.canApplyMethod=function(){return!1},Kc.prototype.registerInViewListener=function(){},Kc.prototype.inViewListenerCallback=function(a){this.currentEntry=a,this.currentTimestamp=a.time,this.updateInViewPercentages(a),this.isInView()&&!Sb[Jb]?(this.updateTimestamps(),this.isCurrentlyInView,this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback(),this.isInView100()?this.updateTimestamps100():this.resetTimestamps100()):(this.isCurrentlyInView,this.resetTimestamps(),this.resetTimestamps100(),this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks||this.outOfViewCallback())},Kc.prototype.metViewableStandard=function(){this.inView=this.isCurrentlyInView,this.stopCallbacks=!0,this.currentTimestamp=(new Date).getTime(),this.isCurrentlyInView?this.updateTimestamps():this.resetTimestamps()},Kc.prototype.updateInViewPercentages=function(a){this.inViewPercentage=a.intersectionRatio,this.maxInViewPercentage<this.inViewPercentage&&(this.maxInViewPercentage=this.inViewPercentage),this.inViewPercentages.push(this.inViewPercentage)},Kc.prototype.updateTimestamps=function(){var a;return this.lastTimestamp>0&&(a=this.currentTimestamp-this.lastTimestamp,this.totalInViewTime+=a),this.maxInViewTime<this.totalInViewTime&&(this.maxInViewTime=this.totalInViewTime),this.lastTimestamp=this.currentTimestamp,this.lastTimestamp},Kc.prototype.isInView=function(){return this.inViewPercentage>=this.thresholdPercentage},Kc.prototype.isSufficientlyInView=function(){return this.totalInViewTime>=this.beaconTimeout},Kc.prototype.resetTimestamps=function(){this.lastTimestamp=this.nextTimestamp=this.totalInViewTime=0,this.inViewPercentages=[]},Kc.prototype.updateTimestamps100=function(){this.inView100For0Sec=1,this.lastInView100Timestamp>0?this.totalInView100Time+=this.currentTimestamp-this.lastInView100Timestamp:this.inView100StartTime=this.currentTimestamp,this.lastInView100Timestamp=this.currentTimestamp,this.totalInView100Time>this.beaconTimeout&&(this.inView100For1Sec=1)},Kc.prototype.isInView100=function(){return this.inViewPercentage>99},Kc.prototype.resetTimestamps100=function(){this.lastInView100Timestamp=this.totalInView100Time=this.inView100StartTime=0},Kc.prototype.cleanup=function(){},Kc.prototype.reset=function(){},Kc.extend=function(){var a=function a(b){a.parent.call(this,b)};a.prototype=void 0!==Object.create?Object.create(this.prototype):new this({}),a.prototype.constructor=a,a.parent=this,a.extend=this.extend;for(var b=0;b<arguments.length;b++){var c=arguments[b];void 0!==c.prototype&&(c=c.prototype);for(var d in c)c.hasOwnProperty(d)&&(a.prototype[d]=c[d])}return a},Kc.prototype.getAverageInViewPercentage=function(){var a,b=this.inViewPercentages.length,c=0;for(a=0;a<b;a++)c+=this.inViewPercentages[a];return b?Math.round(c/b):0};var Lc,Mc=Kc.extend({fineTimeout:100,coarseTimeout:750,registerInViewListener:function(){var a=this;this.timeout=this.notInViewTimerWrapper(function(){a.fireInViewListenerCallback()})},fireInViewListenerCallback:function(){var a={intersectionRatio:this.getInViewPercentage(),time:(new Date).getTime()},b=this;this.inViewListenerCallback(a),this.timeout=this[this.isCurrentlyInView?"inViewTimerWrapper":"notInViewTimerWrapper"](function(){b.fireInViewListenerCallback()})},getInViewPercentage:function(){return 0},notInViewTimerWrapper:function(a){return setTimeout(a,this.coarseTimeout)},inViewTimerWrapper:function(a){return setTimeout(a,this.fineTimeout)},cleanup:function(){clearTimeout(this.timeout)},measurementBucket:"0"}),Nc=Mc.extend({init:function(){qa(),this.registerInViewListener()},getInViewPercentage:function(){try{return ra({bcr:Qb.getBoundingClientRect(),adWidth:Mb,adHeight:Lb})}catch(a){}return 0}}),Oc=Nc.extend({canApplyMethod:function(){return!_b&&!bc},measurementBucket:"6"}),Pc=Nc.extend({canApplyMethod:function(){return!_b&&cc&&ac},measurementBucket:"2"}),Qc=Mc.extend({coarseTimeout:100,canApplyMethod:function(){return!_b&&dc},getInViewPercentage:function(){return Rb.$sf.ext[yb]()},measurementBucket:"1"}),Rc=Mc.extend({canApplyMethod:function(){return!_b&&"mozPaintCount"in Rb},init:function(){this.lastMozPaintCounts={},this.paintCounts={},this.paintTimestamps={},this.lastPaintCounts={},this.lastPaintTimestamps={},ta(this),xa(this),this.registerInViewListener()},getInViewPercentage:function(){var a=ya(this);return xa(this),this.numTag?100*a/this.numTag:0},notInViewTimerWrapper:function(a){var b=this;return setTimeout(function(){xa(b),b.timeout=setTimeout(a,.5*b.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(a){var b=this;return setTimeout(function(){xa(b),b.timeout=setTimeout(a,.5*b.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var a=0;a<this.numTag;a++)Sb.body.removeChild(this.tagArray[a])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),ta(this)},measurementBucket:"3"}),Sc=Mc.extend({canApplyMethod:function(){return!_b&&"safari"!==Zb},loadSwfObject:function(){var a,b,c=Sb.getElementsByTagName("body")[0],d=this;c&&(b=Sb.createElement("script"),b.setAttribute("src",ab+"swfobject.js"),c.appendChild(b),a=setInterval(function(){"object"===("undefined"==typeof swfobject?"undefined":Xa(swfobject))&&(clearInterval(a),Da(d),swfobject.hasFlashPlayerVersion("9.0.0")?(Fa(d),Ga.time=(new Date).getTime(),Ga.hook=setInterval(function(){Ga(d,function(){d.flashTagsLoaded=!0,d.registerInViewListener()})},100)):d.markFlashNotSupported())},100))},init:function(){this.minFlashPaintCalls={fine:1,coarse:Math.floor(this.coarseTimeout/100)},this.flashTagsLoaded=!1,this.loadSwfObject()},getInViewPercentage:function(){return 100*(za(this)||0)/this.numTag},isSufficientlyInView:function(){var a=this.beaconTimeout/this.fineTimeout/2;return this.isCurrentlyInView&&this.totalInViewTime>this.beaconTimeout&&this.inViewPercentages.length>a},inViewTimerWrapper:function(a){var b;return this.nextTimestamp&&0!==this.nextTimestamp||(this.nextTimestamp=this.currentTimestamp),this.nextTimestamp+=this.fineTimeout,b=this.nextTimestamp-this.currentTimestamp,b>this.fineTimeout&&(b=this.fineTimeout),b<0&&(b=this.fineTimeout/2),setTimeout(a,b)},removeTags:function(){for(var a=0;a<this.numTag;a++)swfobject.removeSWF("Darla"+a)},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){"object"!==("undefined"==typeof swfobject?"undefined":Xa(swfobject))?this.loadSwfObject():(this.removeTags(),Fa(this))},markFlashNotSupported:function(a){this.cleanup(),this.isMeasurable=!1,this.flashNotSupported=1+(a?1:0),this.stopCallbacks||(this.stopCallbacks=!0,this.outOfViewCallback(!0))},measurementBucket:"4"}),Tc=Kc.extend({canApplyMethod:function(){return!_b&&!dc&&void 0!==Rb.IntersectionObserver},registerInViewListener:function(){for(var a=this,b=[],c=this.thresholdPercentage/100;c<1;c+=.05)b.push(c);b.push(1),this.io=new Rb.IntersectionObserver(function(b){for(var c,d=0;d<b.length;d++)if(b[d].target===Qb){c=b[d];break}c&&a.inViewListenerCallback({intersectionRatio:100*b[0].intersectionRatio,time:(new Date).getTime()})},{threshold:b}),this.io.observe(Qb)},cleanup:function(){this.io&&this.io.disconnect()},measurementBucket:"7"}),Uc=Kc.extend({canApplyMethod:function(){return _b&&void 0!==Rb.mraid},registerInViewListener:function(){var a=this;a.mraidVersion=Rb.mraid.getVersion&&Rb.mraid.getVersion(),"3.0"===a.mraidVersion?(this.viewableChangeEventListener=function(b){a.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:b})},Rb.mraid.addEventListener("exposureChange",this.viewableChangeEventListener)):(this.viewableChangeEventListener=function(){a.inViewListenerCallback({time:(new Date).getTime(),intersectionRatio:Rb.mraid.isViewable()?100:0})},Rb.mraid.addEventListener("viewableChange",this.viewableChangeEventListener))},cleanup:function(){"3.0"===this.mraidVersion?Rb.mraid.removeEventListener("exposureChange",this.viewableChangeEventListener):Rb.mraid.removeEventListener("viewableChange",this.viewableChangeEventListener)},measurementBucket:"8"}),Vc=Kc.extend({canApplyMethod:function(){return!_b&&!dc&&void 0!==Rb.context&&void 0!==Rb.context.observeIntersection},registerInViewListener:function(){var a=this;a.cleanup=Rb.context.observeIntersection(function(b){b=b.sort(function(a,b){return a.time>b.time}),
b.forEach(function(b){a.inViewListenerCallback({time:b.time,intersectionRatio:100*b.intersectionRatio})})})},measurementBucket:"9"}),Wc=Mc.extend({canApplyMethod:function(){return!_b&&"requestAnimationFrame"in Rb&&"cancelAnimationFrame"in Rb&&"safari"===Zb&&Number($b)>=10},setupHandlerPerTag:function(a){var b=this.tagArray[a].contentWindow,c=this;b&&(b.prevTimestamp=(new Date).getTime(),b.animationFrameRequest&&(b.cancelAnimationFrame(b.animationFrameRequest),this.painted[a]=0),b.animationFrameRequest=b.requestAnimationFrame(function(){var d=(new Date).getTime();d-b.prevTimestamp<c.fineTimeout/2?c.painted[a]=1:c.painted[a]=0,b.prevTimestamp=d}))},setupHandlers:function(){for(var a=0;a<this.numTag;a++)this.setupHandlerPerTag(a)},init:function(){this.painted={},Ia(this),this.setupHandlers(),this.registerInViewListener()},getInViewPercentage:function(){for(var a=0,b=0;b<this.numTag;b++)a+=this.painted[b],this.painted[b]=0;return this.setupHandlers(),this.numTag?100*a/this.numTag:0},notInViewTimerWrapper:function(a){var b=this;return setTimeout(function(){b.setupHandlers(),b.timeout=setTimeout(a,.5*b.coarseTimeout)},.5*this.coarseTimeout)},inViewTimerWrapper:function(a){var b=this;return setTimeout(function(){b.setupHandlers(),b.timeout=setTimeout(a,.5*b.fineTimeout)},.5*this.fineTimeout)},removeTags:function(){for(var a=0;a<this.numTag;a++)Sb.body.removeChild(this.tagArray[a])},cleanup:function(){this.constructor.parent.prototype.cleanup.call(this),this.removeTags()},reset:function(){this.removeTags(),Ia(this)},measurementBucket:"10"}),Xc=Kc.extend({canApplyMethod:function(){return!0},init:function(){this.isMeasurable=!1,this.outOfViewCallback(!0)},measurementBucket:"5"}),Yc=Kc.extend({init:function(){this.adClicked=!1,this.adErrored=!1,this.minVolume=999,this.timeAtMinVolume=0,this.maxTimeAtMinVolume=0,this.currentlyAtMinVolume=!1,this.maxVolume=0,this.timeAtMaxVolume=0,this.maxTimeAtMaxVolume=0,this.currentlyAtMaxVolume=!1,this.playerWidth=0,this.playerHeight=0,this.playerSizeIsValid=!1,this.adHasLoaded=!1,this.adHasStarted=!1,this.adImpressionFired=!1,this.adVideoCompleteFired=!1,this.adUserCloseFired=!1,this.adSkippedFired=!1,this.adStoppedFired=!1,this.adUnit&&this.subscribeToEvents()},subscribeToEvents:function(){this.adUnit.subscribe(this.adLoadedWrapper,"AdLoaded",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdStarted",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdVideoStart",this,this.playerId),this.adUnit.subscribe(this.adImpressionHandler,"AdImpression",this,this.playerId),this.adUnit.subscribe(this.adStartedPlaying,"AdPlaying",this,this.playerId),this.adUnit.subscribe(this.adStoppedPlaying,"AdPaused",this,this.playerId),this.adUnit.subscribe(this.adStoppedHandler,"AdStopped",this,this.playerId),this.adUnit.subscribe(this.adVideoCompleteHandler,"AdVideoComplete",this,this.playerId),this.adUnit.subscribe(this.adUserCloseHandler,"AdUserClose",this,this.playerId),this.adUnit.subscribe(this.adSkippedHandler,"AdSkipped",this,this.playerId),this.adUnit.subscribe(this.playerError,"AdError",this,this.playerId),this.adUnit.subscribe(this.adClickedHandler,"AdClickThru",this,this.playerId),this.adUnit.subscribe(this.adSizeChangeHandler,"AdSizeChange",this,this.playerId),this.adUnit.subscribe(this.adExpandedChangeHandler,"AdExpandedChange",this,this.playerId),this.adUnit.subscribe(this.adVolumeChangeHandler,"AdVolumeChange",this,this.playerId)},unsubscribeToEvents:function(){this.adUnit.unsubscribe(this.adLoadedWrapper,"AdLoaded",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdStarted",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdVideoStart",this.playerId),this.adUnit.unsubscribe(this.adImpressionHandler,"AdImpression",this.playerId),this.adUnit.unsubscribe(this.adStartedPlaying,"AdPlaying",this.playerId),this.adUnit.unsubscribe(this.adStoppedPlaying,"AdPaused",this.playerId),this.adUnit.unsubscribe(this.adStoppedHandler,"AdStopped",this.playerId),this.adUnit.unsubscribe(this.adVideoCompleteHandler,"AdVideoComplete",this.playerId),this.adUnit.unsubscribe(this.adUserCloseHandler,"AdUserClose",this.playerId),this.adUnit.unsubscribe(this.adSkippedHandler,"AdSkipped",this.playerId),this.adUnit.unsubscribe(this.playerError,"AdError",this.playerId),this.adUnit.unsubscribe(this.adClickedHandler,"AdClickThru",this.playerId),this.adUnit.unsubscribe(this.adSizeChangeHandler,"AdSizeChange",this.playerId),this.adUnit.unsubscribe(this.adExpandedChangeHandler,"AdExpandedChange",this.playerId),this.adUnit.unsubscribe(this.adVolumeChangeHandler,"AdVolumeChange",this.playerId)},updateTimestamps:function(){if(this.currentTimestamp=(new Date).getTime(),this.lastTimestamp>0){var a=this.currentTimestamp-this.lastTimestamp;this.adUnit&&this.adUnit.getAdVolume&&(this.currentlyAtMinVolume&&(this.timeAtMinVolume+=a,this.timeAtMinVolume>this.maxTimeAtMinVolume&&(this.maxTimeAtMinVolume=this.timeAtMinVolume)),this.currentlyAtMaxVolume&&(this.timeAtMaxVolume+=a,this.timeAtMaxVolume>this.maxTimeAtMaxVolume&&(this.maxTimeAtMaxVolume=this.timeAtMaxVolume)))}this.constructor.parent.prototype.updateTimestamps.call(this)},resetVolumeTimestamps:function(){this.timeAtMinVolume=this.timeAtMaxVolume=0},resetTimestamps:function(){this.resetVolumeTimestamps(),this.constructor.parent.prototype.resetTimestamps.call(this)},updateAdVolume:function(){if(this.adUnit&&this.adUnit.getAdVolume){var a=this.adUnit.getAdVolume();a<this.minVolume?(this.minVolume=a,this.resetVolumeTimestamps(),this.currentlyAtMinVolume=!0):a!==this.minVolume&&(this.currentlyAtMinVolume=!1),a>this.maxVolume?(this.maxVolume=a,this.resetVolumeTimestamps(),this.currentlyAtMaxVolume=!0):a!==this.maxVolume&&(this.currentlyAtMaxVolume=!1)}},adLoadedWrapper:function(){this.adHasLoaded=!0,this.updatePlayerSize(),this.adLoaded()},adStartedPlaying:function(){this.adHasStarted=!0,this.updateAdVolume(),this.updateTimestamps(),this.adSizeChangeHandler(),this.isCurrentlyInView=!0,this.stopCallbacks||this.inViewCallback()},adImpressionHandler:function(){this.adImpressionFired=!0},adStoppedPlaying:function(a){this.currentTimestamp=(new Date).getTime(),this.resetTimestamps(),this.isCurrentlyInView=!1,this.stopCallbacks&&!a||this.outOfViewCallback(a)},endAd:function(){this.adStoppedPlaying(!0),this.unsubscribeToEvents()},adStoppedHandler:function(){this.adStoppedFired=!0,this.endAd()},adVideoCompleteHandler:function(){this.updateAdVolume(),this.adVideoCompleteFired=!0,this.adVideoComplete(),this.endAd()},adUserCloseHandler:function(){this.adUserCloseFired=!0,this.endAd()},adSkippedHandler:function(){this.adSkippedFired=!0,this.endAd()},playerError:function(){this.updateTimestamps(),this.isMeasurable=this.adImpressionFired,this.isCurrentlyInView=!1,this.inView=!1,this.stopCallbacks=!0,this.adErrored=!0,this.outOfViewCallback(!0),this.unsubscribeToEvents()},adClickedHandler:function(){this.updateTimestamps(),this.adClicked=!0,this.stopCallbacks||this.inViewCallback(!0),this.stopCallbacks=!0,this.unsubscribeToEvents()},updatePlayerSize:function(){var a=m(Pb);this.playerWidth=a.width,this.playerHeight=a.height,this.playerSizeIsValid=a.valid},adSizeChangeHandler:function(){this.updateTimestamps(),o(this.adUnit.adWidth,this.adUnit.adHeight),this.updatePlayerSize(),this.stopCallbacks||this.adSizeChanged()},adExpandedChangeHandler:function(){this.updateTimestamps(),o(this.adUnit.adWidth,this.adUnit.adHeight),this.stopCallbacks||this.adSizeChanged()},adVolumeChangeHandler:function(){this.updateAdVolume(),this.updateTimestamps()},metViewableStandard:function(){this.constructor.parent.prototype.metViewableStandard.call(this),this.isMeasurable=this.adHasLoaded&&this.adHasStarted&&this.adImpressionFired&&this.isMeasurable,this.inView=this.isMeasurable&&this.inView},cleanup:function(){this.unsubscribeToEvents()},getVideoEventBits:function(){return(this.adHasLoaded<<0)+(this.adHasStarted<<1)+(this.adImpressionFired<<2)+(this.adVideoCompleteFired<<3)+(this.adUserCloseFired<<4)+(this.adSkippedFired<<5)+(this.adStoppedFired<<6)}});Ja.prototype.startTimer=function(a){var b=this;a?this.callback(a):this.timeoutRef||(this.timeoutRef=setTimeout(function(){b.callback(a)},this.timeout))},Ja.prototype.stopTimer=function(a){clearTimeout(this.timeoutRef),this.timeoutRef=0,a&&this.callback(a)};var Zc,$c,_c,ad=[Uc,Tc,Vc,Oc,Pc,Qc,Rc,Wc,Sc,Xc],bd="",cd=!1,dd=!1,ed=!1,fd="2",gd=!1;c.default=Va},{}],4:[function(a,b,c){"use strict";var d=function(a,b,c,d){var e=document.createElement("script"),f={events:[],addEvent:function(a){h.sendEvent?(f.events&&(h.sendEvent(f.events),f.events=!1),h.sendEvent(a)):f.events.push(a)}},g=function(b){return function(){var c,d=-1;if(a&&a.getAdVolume&&(c=a.getAdVolume()),"number"==typeof c&&!isNaN(c)&&0<=c&&(d=c),f.addEvent({type:b,adVolume:d}),-1!==k.indexOf(b)&&a&&a.unsubscribe&&!j){j=!0;for(var e in i)if(i.hasOwnProperty&&i.hasOwnProperty(e))try{a.unsubscribe(i[e],e)}catch(a){}}}},h={adData:{ids:c,vpaid:a,build:"cc07a80-clean"},dispatchEvent:f.addEvent};c="_moatApi"+Math.floor(1e8*Math.random());var i={AdStarted:g("AdStarted"),AdStopped:g("AdStopped"),AdSkipped:g("AdSkipped"),AdLoaded:g("AdLoaded"),AdLinearChange:g("AdLinearChange"),AdSizeChange:g("AdSizeChange"),AdExpandedChange:g("AdExpandedChange"),AdSkippableStateChange:g("AdSkippableStateChange"),AdDurationChange:g("AdDurationChange"),AdRemainingTimeChange:g("AdRemainingTimeChange"),AdVolumeChange:g("AdVolumeChange"),AdImpression:g("AdImpression"),AdClickThru:g("AdClickThru"),AdInteraction:g("AdInteraction"),AdVideoStart:g("AdVideoStart"),AdVideoFirstQuartile:g("AdVideoFirstQuartile"),AdVideoMidpoint:g("AdVideoMidpoint"),AdVideoThirdQuartile:g("AdVideoThirdQuartile"),AdVideoComplete:g("AdVideoComplete"),AdUserAcceptInvitation:g("AdUserAcceptInvitation"),AdUserMinimize:g("AdUserMinimize"),AdUserClose:g("AdUserClose"),AdPaused:g("AdPaused"),AdPlaying:g("AdPlaying"),AdError:g("AdError")},j=!1,k=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(a&&a.subscribe)for(var b in i)i.hasOwnProperty&&i.hasOwnProperty(b)&&a.subscribe(i[b],b)}();var l,m;try{l=b.ownerDocument,m=l.defaultView||l.parentWindow}catch(a){l=document,m=window}return m[c]=h,e.type="text/javascript",b&&b.insertBefore(e,b.childNodes[0]||null),e.src="https://z.moatads.com/"+d+"/moatvideo.js#"+c,h};b.exports=d},{}],5:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default="0.0.50"},{}],6:[function(b,c,d){(function(b,d,e){!function(){function f(){}function g(a){return a}function h(a){return!!a}function i(a){return!a}function j(a){return function(){if(null===a)throw new Error("Callback was already called.");a.apply(this,arguments),a=null}}function k(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function l(a){return P(a)||"number"==typeof a.length&&a.length>=0&&a.length%1==0}function m(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function n(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function o(a){return n(Array(a),function(a,b){return b})}function p(a,b,c){return m(a,function(a,d,e){c=b(c,a,d,e)}),c}function q(a,b){m(R(a),function(c){b(a[c],c)})}function r(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function s(a){var b,c,d=-1;return l(a)?(b=a.length,function(){return d++,d<b?d:null}):(c=R(a),b=c.length,function(){return d++,d<b?c[d]:null})}function t(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;e<c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d)}}}function u(a){return function(b,c,d){return a(b,d)}}function v(a){return function(b,c,d){d=k(d||f),b=b||[];var e=s(b);if(a<=0)return d(null);var g=!1,h=0,i=!1;!function f(){if(g&&h<=0)return d(null);for(;h<a&&!i;){var k=e();if(null===k)return g=!0,void(h<=0&&d(null));h+=1,c(b[k],k,j(function(a){h-=1,a?(d(a),i=!0):f()}))}}()}}function w(a){return function(b,c,d){return a(M.eachOf,b,c,d)}}function x(a){return function(b,c,d,e){return a(v(c),b,d,e)}}function y(a){return function(b,c,d){return a(M.eachOfSeries,b,c,d)}}function z(a,b,c,d){d=k(d||f),b=b||[];var e=l(b)?[]:{};a(b,function(a,b,d){c(a,function(a,c){e[b]=c,d(a)})},function(a){d(a,e)})}function A(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&&e.push({index:b,value:a}),d()})},function(){d(n(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function B(a,b,c,d){A(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function C(a,b,c){return function(d,e,f,g){function h(){g&&g(c(!1,void 0))}function i(a,d,e){if(!g)return e();f(a,function(d){g&&b(d)&&(g(c(!0,a)),g=f=!1),e()})}arguments.length>3?a(d,e,i,h):(g=f,f=e,a(d,i,h))}}function D(a,b){return b}function E(a,b,c){c=c||f;var d=l(b)?[]:{};a(b,function(a,b,c){a(t(function(a,e){e.length<=1&&(e=e[0]),d[b]=e,c(a)}))},function(a){c(a,d)})}function F(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function G(a,b,c){function d(a,b,c,d){if(null!=d&&"function"!=typeof d)throw new Error("task callback must be a function");if(a.started=!0,P(b)||(b=[b]),0===b.length&&a.idle())return M.setImmediate(function(){a.drain()});m(b,function(b){var e={data:b,callback:d||f};c?a.tasks.unshift(e):a.tasks.push(e),a.tasks.length===a.concurrency&&a.saturated()}),M.setImmediate(a.process)}function e(a,b){return function(){g-=1;var c=!1,d=arguments;m(b,function(a){m(h,function(b,d){b!==a||c||(h.splice(d,1),c=!0)}),a.callback.apply(a,d)}),a.tasks.length+g===0&&a.drain(),a.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,h=[],i={tasks:[],concurrency:b,payload:c,saturated:f,empty:f,drain:f,started:!1,paused:!1,push:function(a,b){d(i,a,!1,b)},kill:function(){i.drain=f,i.tasks=[]},unshift:function(a,b){d(i,a,!0,b)},process:function(){for(;!i.paused&&g<i.concurrency&&i.tasks.length;){var b=i.payload?i.tasks.splice(0,i.payload):i.tasks.splice(0,i.tasks.length),c=n(b,function(a){return a.data});0===i.tasks.length&&i.empty(),g+=1,h.push(b[0]);var d=j(e(i,b));a(c,d)}},length:function(){return i.tasks.length},running:function(){return g},workersList:function(){return h},idle:function(){return i.tasks.length+g===0},pause:function(){i.paused=!0},resume:function(){if(!1!==i.paused){i.paused=!1;for(var a=Math.min(i.concurrency,i.tasks.length),b=1;b<=a;b++)M.setImmediate(i.process)}}};return i}function H(a){return t(function(b,c){b.apply(null,c.concat([t(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&m(c,function(b){console[a](b)}))})]))})}function I(a){return function(b,c,d){a(o(b),c,d)}}function J(a){return t(function(b,c){var d=t(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function K(a){return t(function(b){var c=b.pop();b.push(function(){var a=arguments;d?M.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b),d=!1})}var L,M={},N="object"==typeof self&&self.self===self&&self||"object"==typeof d&&d.global===d&&d||this;null!=N&&(L=N.async),M.noConflict=function(){return N.async=L,M};var O=Object.prototype.toString,P=Array.isArray||function(a){return"[object Array]"===O.call(a)},Q=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},R=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},S="function"==typeof e&&e,T=S?function(a){S(a)}:function(a){setTimeout(a,0)};"object"==typeof b&&"function"==typeof b.nextTick?M.nextTick=b.nextTick:M.nextTick=T,M.setImmediate=S?T:M.nextTick,M.forEach=M.each=function(a,b,c){return M.eachOf(a,u(b),c)},M.forEachSeries=M.eachSeries=function(a,b,c){return M.eachOfSeries(a,u(b),c)},M.forEachLimit=M.eachLimit=function(a,b,c,d){return v(b)(a,u(c),d)},M.forEachOf=M.eachOf=function(a,b,c){function d(a){h--,a?c(a):null===e&&h<=0&&c(null)}c=k(c||f),a=a||[];for(var e,g=s(a),h=0;null!=(e=g());)h+=1,b(a[e],e,j(d));0===h&&c(null)},M.forEachOfSeries=M.eachOfSeries=function(a,b,c){function d(){var f=!0;if(null===g)return c(null);b(a[g],g,j(function(a){if(a)c(a);else{if(null===(g=e()))return c(null);f?M.setImmediate(d):d()}})),f=!1}c=k(c||f),a=a||[];var e=s(a),g=e();d()},M.forEachOfLimit=M.eachOfLimit=function(a,b,c,d){v(b)(a,c,d)},M.map=w(z),M.mapSeries=y(z),M.mapLimit=x(z),M.inject=M.foldl=M.reduce=function(a,b,c,d){M.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})},M.foldr=M.reduceRight=function(a,b,c,d){var e=n(a,g).reverse();M.reduce(e,b,c,d)},M.transform=function(a,b,c,d){3===arguments.length&&(d=c,c=b,b=P(a)?[]:{}),M.eachOf(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})},M.select=M.filter=w(A),M.selectLimit=M.filterLimit=x(A),M.selectSeries=M.filterSeries=y(A),M.reject=w(B),M.rejectLimit=x(B),M.rejectSeries=y(B),M.any=M.some=C(M.eachOf,h,g),M.someLimit=C(M.eachOfLimit,h,g),M.all=M.every=C(M.eachOf,i,i),M.everyLimit=C(M.eachOfLimit,i,i),M.detect=C(M.eachOf,g,D),M.detectSeries=C(M.eachOfSeries,g,D),M.detectLimit=C(M.eachOfLimit,g,D),M.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}M.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);c(null,n(b.sort(d),function(a){return a.value}))})},M.auto=function(a,b,c){function d(a){o.unshift(a)}function e(a){var b=r(o,a);b>=0&&o.splice(b,1)}function g(){i--,m(o.slice(0),function(a){a()})}"function"==typeof arguments[1]&&(c=b,b=null),c=k(c||f);var h=R(a),i=h.length;if(!i)return c(null);b||(b=i);var j={},l=0,n=!1,o=[];d(function(){i||c(null,j)}),m(h,function(f){function h(){return l<b&&p(s,function(a,b){return a&&j.hasOwnProperty(b)},!0)&&!j.hasOwnProperty(f)}function i(){h()&&(l++,e(i),m[m.length-1](o,j))}if(!n){for(var k,m=P(a[f])?a[f]:[a[f]],o=t(function(a,b){if(l--,b.length<=1&&(b=b[0]),a){var d={};q(j,function(a,b){d[b]=a}),d[f]=b,n=!0,c(a,d)}else j[f]=b,M.setImmediate(g)}),s=m.slice(0,m.length-1),u=s.length;u--;){if(!(k=a[s[u]]))throw new Error("Has nonexistent dependency in "+s.join(", "));if(P(k)&&r(k,f)>=0)throw new Error("Has cyclic dependencies")}h()?(l++,m[m.length-1](o,j)):d(i)}})},M.retry=function(a,b,c){function d(a,b){for(;h.times;){var c=!(h.times-=1);g.push(function(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}(h.task,c)),!c&&h.interval>0&&g.push(function(a){return function(b){setTimeout(function(){b(null)},a)}}(h.interval))}M.series(g,function(b,c){c=c[c.length-1],(a||h.callback)(c.err,c.result)})}var e=5,f=0,g=[],h={times:e,interval:f},i=arguments.length;if(i<1||i>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return i<=2&&"function"==typeof a&&(c=b,b=a),"function"!=typeof a&&function(a,b){if("number"==typeof b)a.times=parseInt(b,10)||e;else{if("object"!=typeof b)throw new Error("Unsupported argument type for 'times': "+typeof b);a.times=parseInt(b.times,10)||e,a.interval=parseInt(b.interval,10)||f}}(h,a),h.callback=c,h.task=b,h.callback?d():d},M.waterfall=function(a,b){function c(a){return t(function(d,e){if(d)b.apply(null,[d].concat(e));else{var f=a.next();f?e.push(c(f)):e.push(b),K(a).apply(null,e)}})}if(b=k(b||f),!P(a)){var d=new Error("First argument to waterfall must be an array of functions");return b(d)}if(!a.length)return b();c(M.iterator(a))()},M.parallel=function(a,b){E(M.eachOf,a,b)},M.parallelLimit=function(a,b,c){E(v(b),a,c)},M.series=function(a,b){E(M.eachOfSeries,a,b)},M.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},M.apply=t(function(a,b){return t(function(c){return a.apply(null,b.concat(c))})}),M.concat=w(F),M.concatSeries=y(F),M.whilst=function(a,b,c){if(c=c||f,a()){var d=t(function(e,f){e?c(e):a.apply(this,f)?b(d):c.apply(null,[null].concat(f))});b(d)}else c(null)},M.doWhilst=function(a,b,c){var d=0;return M.whilst(function(){return++d<=1||b.apply(this,arguments)},a,c)},M.until=function(a,b,c){return M.whilst(function(){return!a.apply(this,arguments)},b,c)},M.doUntil=function(a,b,c){return M.doWhilst(a,function(){return!b.apply(this,arguments)},c)},M.during=function(a,b,c){c=c||f;var d=t(function(b,d){b?c(b):(d.push(e),a.apply(this,d))}),e=function(a,e){a?c(a):e?b(d):c(null)};a(e)},M.doDuring=function(a,b,c){var d=0;M.during(function(a){d++<1?a(null,!0):b.apply(this,arguments)},a,c)},M.queue=function(a,b){return G(function(b,c){a(b[0],c)},b,1)},M.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function d(a,b,c){for(var d=-1,e=a.length-1;d<e;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function e(a,b,e,g){if(null!=g&&"function"!=typeof g)throw new Error("task callback must be a function");if(a.started=!0,P(b)||(b=[b]),0===b.length)return M.setImmediate(function(){a.drain()});m(b,function(b){var h={data:b,priority:e,callback:"function"==typeof g?g:f};a.tasks.splice(d(a.tasks,h,c)+1,0,h),a.tasks.length===a.concurrency&&a.saturated(),M.setImmediate(a.process)})}var g=M.queue(a,b);return g.push=function(a,b,c){e(g,a,b,c)},delete g.unshift,g},M.cargo=function(a,b){return G(a,1,b)},M.log=H("log"),M.dir=H("dir"),M.memoize=function(a,b){var c={},d={},e=Object.prototype.hasOwnProperty;b=b||g;var f=t(function(f){var g=f.pop(),h=b.apply(null,f);e.call(c,h)?M.setImmediate(function(){g.apply(null,c[h])}):e.call(d,h)?d[h].push(g):(d[h]=[g],a.apply(null,f.concat([t(function(a){c[h]=a;var b=d[h];delete d[h];for(var e=0,f=b.length;e<f;e++)b[e].apply(null,a)})])))});return f.memo=c,f.unmemoized=a,f},M.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},M.times=I(M.map),M.timesSeries=I(M.mapSeries),M.timesLimit=function(a,b,c,d){return M.mapLimit(o(a),b,c,d)},M.seq=function(){var a=arguments;return t(function(b){var c=this,d=b[b.length-1];"function"==typeof d?b.pop():d=f,M.reduce(a,b,function(a,b,d){b.apply(c,a.concat([t(function(a,b){d(a,b)})]))},function(a,b){d.apply(c,[a].concat(b))})})},M.compose=function(){return M.seq.apply(null,Array.prototype.reverse.call(arguments))},M.applyEach=J(M.eachOf),M.applyEachSeries=J(M.eachOfSeries),M.forever=function(a,b){function c(a){if(a)return d(a);e(c)}var d=j(b||f),e=K(a);c()},M.ensureAsync=K,M.constant=t(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}}),M.wrapSync=M.asyncify=function(a){return t(function(b){var c,d=b.pop();try{c=a.apply(this,b)}catch(a){return d(a)}Q(c)&&"function"==typeof c.then?c.then(function(a){d(null,a)}).catch(function(a){d(a.message?a:new Error(a))}):d(null,c)})},"object"==typeof c&&c.exports?c.exports=M:"function"==typeof a&&a.amd?a([],function(){return M}):N.async=M}()}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},b("timers").setImmediate)},{_process:7,timers:8}],7:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],8:[function(a,b,c){(function(b,d){function e(a,b){this._id=a,this._clearFn=b}var f=a("process/browser.js").nextTick,g=Function.prototype.apply,h=Array.prototype.slice,i={},j=0;c.setTimeout=function(){return new e(g.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new e(g.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(a){a.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(a,b){clearTimeout(a._idleTimeoutId),a._idleTimeout=b},c.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},c._unrefActive=c.active=function(a){clearTimeout(a._idleTimeoutId);var b=a._idleTimeout;b>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},b))},c.setImmediate="function"==typeof b?b:function(a){var b=j++,d=!(arguments.length<2)&&h.call(arguments,1);return i[b]=!0,f(function(){i[b]&&(d?a.apply(null,d):a.call(null),c.clearImmediate(b))}),b},c.clearImmediate="function"==typeof d?d:function(a){delete i[a]}}).call(this,a("timers").setImmediate,a("timers").clearImmediate)},{"process/browser.js":7,timers:8}],9:[function(b,c,d){!function(b,e){"use strict";var f="model",g="name",h="type",i="vendor",j="version",k="mobile",l="tablet",m={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&-1!==b.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"==typeof a?a.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},n={rgx:function(a,b){for(var c,d,e,f,g,h,i=0;i<b.length&&!g;){var j=b[i],k=b[i+1];for(c=d=0;c<j.length&&!g;)if(g=j[c++].exec(a))for(e=0;e<k.length;e++)h=g[++d],f=k[e],"object"==typeof f&&f.length>0?2==f.length?"function"==typeof f[1]?this[f[0]]=f[1].call(this,h):this[f[0]]=f[1]:3==f.length?"function"!=typeof f[1]||f[1].exec&&f[1].test?this[f[0]]=h?h.replace(f[1],f[2]):void 0:this[f[0]]=h?f[1].call(this,h,f[2]):void 0:4==f.length&&(this[f[0]]=h?f[3].call(this,h.replace(f[1],f[2])):void 0):this[f]=h||void 0;i+=2}},str:function(a,b){for(var c in b)if("object"==typeof b[c]&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(m.has(b[c][d],a))return"?"===c?void 0:c}else if(m.has(b[c],a))return"?"===c?void 0:c;return a}},o={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},p={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,j],[/(opios)[\/\s]+([\w\.]+)/i],[[g,"Opera Mini"],j],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],j],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[g,j],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[g,"IE"],j],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[g,"Edge"],j],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],j],[/(puffin)\/([\w\.]+)/i],[[g,"Puffin"],j],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],j],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],j],[/(micromessenger)\/([\w\.]+)/i],[[g,"WeChat"],j],[/(qqbrowserlite)\/([\w\.]+)/i],[g,j],[/(QQ)\/([\d\.]+)/i],[g,j],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[g,j],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[g,j],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[g,j],[/(MetaSr)[\/\s]?([\w\.]+)/i],[g],[/(LBBROWSER)/i],[g],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[j,[g,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[j,[g,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[j,[g,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[g,/(.+)/,"$1 WebView"],j],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[g,/(.+(?:g|us))(.+)/,"$1 $2"],j],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[j,[g,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[g,j],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],j],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],j],[/(coast)\/([\w\.]+)/i],[[g,"Opera Coast"],j],[/fxios\/([\w\.-]+)/i],[j,[g,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[j,[g,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[j,g],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[g,"GSA"],j],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[j,n.str,o.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[g,j],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],j],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,j]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",m.lowerize]]],
device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,i,[h,l]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[i,"Apple"],[h,l]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[i,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[i,f,[h,l]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[f,[i,"Amazon"],[h,l]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[f,n.str,o.device.amazon.model],[i,"Amazon"],[h,k]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,i,[h,k]],[/\((ip[honed|\s\w*]+);/i],[f,[i,"Apple"],[h,k]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[i,f,[h,k]],[/\(bb10;\s(\w+)/i],[f,[i,"BlackBerry"],[h,k]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[f,[i,"Asus"],[h,l]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[i,"Sony"],[f,"Xperia Tablet"],[h,l]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[f,[i,"Sony"],[h,k]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[i,f,[h,"console"]],[/android.+;\s(shield)\sbuild/i],[f,[i,"Nvidia"],[h,"console"]],[/(playstation\s[34portablevi]+)/i],[f,[i,"Sony"],[h,"console"]],[/(sprint\s(\w+))/i],[[i,n.str,o.device.sprint.vendor],[f,n.str,o.device.sprint.model],[h,k]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[i,f,[h,l]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[i,[f,/_/g," "],[h,k]],[/(nexus\s9)/i],[f,[i,"HTC"],[h,l]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[f,[i,"Huawei"],[h,k]],[/(microsoft);\s(lumia[\s\w]+)/i],[i,f,[h,k]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[i,"Microsoft"],[h,"console"]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[i,"Microsoft"],[h,k]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[f,[i,"Motorola"],[h,k]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[i,"Motorola"],[h,l]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[i,m.trim],[f,m.trim],[h,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[i,"Samsung"],[h,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[f,[i,"Sharp"],[h,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[i,"Samsung"],f,[h,l]],[/smart-tv.+(samsung)/i],[i,[h,"smarttv"],f],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[i,"Samsung"],f,[h,k]],[/sie-(\w*)/i],[f,[i,"Siemens"],[h,k]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[i,"Nokia"],f,[h,k]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[i,"Acer"],[h,l]],[/android.+([vl]k\-?\d{3})\s+build/i],[f,[i,"LG"],[h,l]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[i,"LG"],f,[h,l]],[/(lg) netcast\.tv/i],[i,f,[h,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[f,[i,"LG"],[h,k]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[i,"Lenovo"],[h,l]],[/linux;.+((jolla));/i],[i,f,[h,k]],[/((pebble))app\/[\d\.]+\s/i],[i,f,[h,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[i,f,[h,k]],[/crkey/i],[[f,"Chromecast"],[i,"Google"]],[/android.+;\s(glass)\s\d/i],[f,[i,"Google"],[h,"wearable"]],[/android.+;\s(pixel c)\s/i],[f,[i,"Google"],[h,l]],[/android.+;\s(pixel xl|pixel)\s/i],[f,[i,"Google"],[h,k]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[f,/_/g," "],[i,"Xiaomi"],[h,k]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[f,/_/g," "],[i,"Xiaomi"],[h,l]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[f,[i,"Meizu"],[h,l]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[f,[i,"OnePlus"],[h,k]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[f,[i,"RCA"],[h,l]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[f,[i,"Dell"],[h,l]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[f,[i,"Verizon"],[h,l]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[i,"Barnes & Noble"],f,[h,l]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[f,[i,"NuVision"],[h,l]],[/android.+;\s(k88)\sbuild/i],[f,[i,"ZTE"],[h,l]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[f,[i,"Swiss"],[h,k]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[f,[i,"Swiss"],[h,l]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[f,[i,"Zeki"],[h,l]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[i,"Dragon Touch"],f,[h,l]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[f,[i,"Insignia"],[h,l]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[f,[i,"NextBook"],[h,l]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[i,"Voice"],f,[h,k]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[i,"LvTel"],f,[h,k]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[f,[i,"Envizen"],[h,l]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[i,f,[h,l]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[f,[i,"MachSpeed"],[h,l]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[i,f,[h,l]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[f,[i,"Rotor"],[h,l]],[/android.+(KS(.+))\s+build/i],[f,[i,"Amazon"],[h,l]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[i,f,[h,l]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,m.lowerize],i,f],[/(android[\w\.\s\-]{0,9});.+build/i],[f,[i,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[j,[g,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,j],[/rv\:([\w\.]{1,9}).+(gecko)/i],[j,g]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[g,j],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[j,n.str,o.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[j,n.str,o.os.windows.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],j],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[g,j],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[g,"Symbian"],j],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],j],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[g,j],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],j],[/(sunos)\s?([\w\.\d]*)/i],[[g,"Solaris"],j],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[g,j],[/(haiku)\s(\w+)/i],[g,j],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[j,/_/g,"."],[g,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[j,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[g,j]]},q=function(a,c){if("object"==typeof a&&(c=a,a=void 0),!(this instanceof q))return new q(a,c).getResult();var d=a||(b&&b.navigator&&b.navigator.userAgent?b.navigator.userAgent:""),e=c?m.extend(p,c):p;return this.getBrowser=function(){var a={name:void 0,version:void 0};return n.rgx.call(a,d,e.browser),a.major=m.major(a.version),a},this.getCPU=function(){var a={architecture:void 0};return n.rgx.call(a,d,e.cpu),a},this.getDevice=function(){var a={vendor:void 0,model:void 0,type:void 0};return n.rgx.call(a,d,e.device),a},this.getEngine=function(){var a={name:void 0,version:void 0};return n.rgx.call(a,d,e.engine),a},this.getOS=function(){var a={name:void 0,version:void 0};return n.rgx.call(a,d,e.os),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=a,this},this};q.VERSION="0.7.18",q.BROWSER={NAME:g,MAJOR:"major",VERSION:j},q.CPU={ARCHITECTURE:"architecture"},q.DEVICE={MODEL:f,VENDOR:i,TYPE:h,CONSOLE:"console",MOBILE:k,SMARTTV:"smarttv",TABLET:l,WEARABLE:"wearable",EMBEDDED:"embedded"},q.ENGINE={NAME:g,VERSION:j},q.OS={NAME:g,VERSION:j},void 0!==d?(void 0!==c&&c.exports&&(d=c.exports=q),d.UAParser=q):"function"==typeof a&&a.amd?a(function(){return q}):b&&(b.UAParser=q);var r=b&&(b.jQuery||b.Zepto);if(void 0!==r){var s=new q;r.ua=s.getResult(),r.ua.get=function(){return s.getUA()},r.ua.set=function(a){s.setUA(a);var b=s.getResult();for(var c in b)r.ua[c]=b[c]}}}("object"==typeof window?window:this)},{}],10:[function(a,b,c){"use strict";function d(a,b){a.pixels=a.pixels||[],a.sources=a.sources||[],a.features=a.features||[],a.options=a.options||{},a.videoClicks=a.videoClicks||{},a.videoClicks.clickTracking=a.videoClicks.clickTracking||[],a.metadata=a.metadata||{},a.metadata.demandSourceId=a.metadata.demandSourceId||0,b(null,a)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],11:[function(a,b,c){"use strict";function d(a,b){a.metadata.protocol=(0,e.getTrueUrlInfo)().topUrl.match(/^(\w+):/)[1]||"https",a.metadata.vpaidJSWrapperVersion=f.vpaidJSWrapperVersion,b(null,a)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var e=a("../util/url"),f=a("../metadata.json")},{"../metadata.json":28,"../util/url":34}],12:[function(a,b,c){"use strict";function d(a,b){new f.default(a).fire("VISTA_LOADED"),b(null,a)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var e=a("../diag"),f=function(a){return a&&a.__esModule?a:{default:a}}(e)},{"../diag":19}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){f(a,[j.default,l.default,n.default,p.default,r.default,t.default,v.default],b)}function f(a,b,c){b[0]&&(b[0]=h.default.apply(b[0],a)),h.default.waterfall(b,c)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=e;var g=a("async"),h=d(g),i=a("./parse_yahoo_adparams"),j=d(i),k=a("./add_defaults"),l=d(k),m=a("./add_metadata"),n=d(m),o=a("./fire_init_pixels"),p=d(o),q=a("./vast_parser"),r=d(q),s=a("./map_vast_vpaid"),t=d(s),u=a("./process_click_tracking"),v=d(u)},{"./add_defaults":10,"./add_metadata":11,"./fire_init_pixels":12,"./map_vast_vpaid":14,"./parse_yahoo_adparams":15,"./process_click_tracking":16,"./vast_parser":17,async:6}],14:[function(a,b,c){"use strict";function d(a,b){a.pixels.forEach(function(a){"progress"===a.event&&void 0!==a.offset&&(a.offset=e(a.offset));var b=f[a.event];b&&(a.event=b)}),b(null,a)}function e(a){var b=a.match(/^(\d{2}):(\d{2}):(\d{2})(.(\d{3}))?$/);if(b)return console.log(b),console.log(parseInt(b[1],10)),{type:"time",offset:3600*parseInt(b[1],10)+60*parseInt(b[2],10)+parseInt(b[3],10)+(b[5]?parseInt(b[5],10)/1e3:0)};var c=a.match(/^(\d+)%$/);return c?{type:"percentage",offset:parseInt(c[1],10)}:null}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var f={skip:"AdSkipped",creativeView:"AdStarted",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",acceptInvitation:"AdUserAcceptInvitation",collapse:"AdUserMinimize",close:"AdUserClose",pause:"AdPaused",resume:"AdPlaying",error:"AdError"}},{}],15:[function(a,b,c){"use strict";function d(a,b){try{var c=f(a);b(null,c)}catch(c){try{var d=e(a);b(null,d)}catch(a){b(a)}}}function e(a){var b={},c=void 0;try{c=window.atob(a)}catch(a){throw new Error("XML parsing error: "+a.message)}var d=void 0;if(null!==c)try{if(d=(0,k.parseXml)(c),d.getElementsByTagName("parsererror").length>0||d.parseError&&0!==d.parseError.errorCode)throw new Error(d.getElementsByTagName("parsererror")[0].nodeValue)}catch(a){throw new Error("XML parsing error: "+a.message)}if("YahooViewability"===d.documentElement.nodeName){h(d.getElementsByTagName("ViewableImpression"),function(a){b.viewabilityBeaconUrl=a.textContent}),b.pixels=b.pixels||[],h(d.getElementsByTagName("Impression"),function(a){b.pixels.push({event:"impression",url:a.textContent})}),b.sources=b.sources||[],h(d.getElementsByTagName("MediaFile"),function(a){b.sources.push({url:a.textContent&&a.textContent.replace(/^\s+|\s+$/g,""),mimetype:a.getAttribute("type"),apiFramework:a.getAttribute("apiFramework")})}),h(d.getElementsByTagName("VASTAdTagURI"),function(a){b.sources.push({url:a.textContent&&a.textContent.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"})}),h(d.getElementsByTagName("Tracking"),function(a){b.pixels.push({event:a.getAttribute("event"),url:a.textContent})});var e=d.getElementsByTagName("Error");b.error=b.error||[],h(e,function(a){b.error.push({event:a.getAttribute("event"),url:a.textContent})}),b.videoClicks=b.videoClicks||{},b.videoClicks.clickTracking=b.videoClicks.clickTracking||[],h(d.getElementsByTagName("ClickTracking"),function(a){b.videoClicks.clickTracking.push(a.textContent)});var f=d.getElementsByTagName("ClickThrough")[0];f&&(b.videoClicks.clickThrough=f.textContent),b.metadata=b.metadata||{};var i=g(d);i&&h(i,function(a){var c=a.nodeName,d=a.textContent;c&&d&&(b.metadata[c]=d)})}return b}function f(a){var b={};try{var c=JSON.parse(a);if(c){i(c.viewableImpression,function(a){b.viewabilityBeaconUrl=a}),b.pixels=b.pixels||[];var d=c.impression;b.pixels=b.pixels.concat(j(d).map(function(a){return{event:"impression",url:a}})),b.sources=b.sources||[];var e=c.mediaFiles;b.sources=b.sources.concat(j(e).map(function(a){return{url:a.value&&a.value.replace(/^\s+|\s+$/g,""),mimetype:a.type,apiFramework:a.apiFramework,bitrate:a.bitrate}}));var f=c.vastAdTagURI;b.sources=b.sources.concat(j(f).map(function(a){return{url:a&&a.replace(/^\s+|\s+$/g,""),mimetype:"application/xml"}}));var g=c.trackingEvents;b.pixels=b.pixels.concat(j(g).map(function(a){return{event:a.eventType,url:a.value}}));var h=c.error;b.error=b.error||[],b.error=b.error.concat(j(h).map(function(a){return{event:"error",url:a}})),b.videoClicks=b.videoClicks||{},b.videoClicks.clickTracking=b.videoClicks.clickTracking||[];var k=c.videoClicks.clickTracking;b.videoClicks.clickTracking=b.videoClicks.clickTracking.concat(j(k).map(function(a){return a}));i(c.videoClicks.clickThrough,function(a){b.videoClicks.clickThrough=a}),b.metadata=b.metadata||{};var l=c.moatParams;if(l)for(var m in l){var n=m,o=l[m];n&&o&&(b.metadata[n]=o)}}}catch(a){throw new Error("JSON parsing error: "+a.message)}return b}function g(a){var b=a.getElementsByTagName("MOATparams")[0];if(b)return b.childNodes}function h(a,b){a=a||[],[].forEach.call(a,b)}function i(a,b){a?Array.isArray(a)||(a=[a]):a=[],a.forEach(b)}function j(a){return a?Array.isArray(a)||(a=[a]):a=[],a}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var k=a("../util/xml")},{"../util/xml":35}],16:[function(a,b,c){"use strict";function d(a,b){a.videoClicks.clickTracking.forEach(function(b){return a.pixels.push({event:"AdClickThru",url:b})}),b(null,a)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],17:[function(a,b,c){"use strict";function d(a,b){var c=k(a);a.debugData={vastUri:c},a.vastXmls=[],c?e(c,a,b,0):b(null,a)}function e(a,b,c,d){var h=new m.default(b);if(d>=p)return console.log("recursive depth reached"),void h.fire("VAST_MAX_DEPTH",function(){c(new Error("max VAST unwrapping depth reached"))});var i=new XMLHttpRequest;-1===a.indexOf("s.yimg.com")&&-1===a.indexOf("l.yimg.com")&&(i.withCredentials=!0),i.onreadystatechange=function(){if(4===i.readyState){if(200!==i.status)return 0!==i.responseURL.length||i.responseXML?void h.fire("VAST_NOT_FOUND",function(){c(new Error("parseVast error: response status: "+i.status))}):void h.fire("VAST_CORS_ERROR",function(){c(new Error("VAST_CORS_ERROR"))});if(!i.responseXML)return void h.fire("VAST_PARSER_ERROR",function(){c(new Error("parseVast error: missing responseXML"))});switch(b.vastXmls.push(i.responseXML),g(i.responseXML)){case"Wrapper":var a=f(i.responseXML);a?e(a,b,c,d+1):h.fire("VAST_WRAPPER_URI_MISSING",function(){c(new Error("VASTAdTag URI not found"))});break;case"InLine":var k=void 0;try{k=j(b)}catch(a){return void c(new Error("addAdParams error: "+a.message))}c(null,k);break;default:h.fire("VAST_MISSING_AD_TYPE",function(){c(new Error("vast error: no ad type found"))})}}},a=o.expand(a,null,[o.pageUrl]),i.open("GET",a),i.send()}function f(a){var b=a.getElementsByTagName("VASTAdTagURI")[0];return b?b.textContent:null}function g(a){var b=a.getElementsByTagName("Ad")[0];return b?b.firstElementChild.tagName:null}function h(a,b){a=a||[],[].forEach.call(a,b)}function i(a,b){var c=new m.default(a),d=b.getElementsByTagName("Ad")[0];if(!d||1!==d.childElementCount||"null"===d)throw c.fire("VAST_MALFORMED"),Error("parseVastXml error: invalid VAST format");h(d.getElementsByTagName("Impression"),function(b){a.pixels.push({event:"impression",url:b.textContent})});var e=d.getElementsByTagName("MediaFile");a.sources=[],h(e,function(b){a.sources.push({url:b.textContent&&b.textContent.replace(/^\s+|\s+$/g,""),mimetype:b.getAttribute("type"),apiFramework:b.getAttribute("apiFramework"),bitrate:b.getAttribute("bitrate")})}),h(d.getElementsByTagName("Tracking"),function(b){a.pixels.push({event:b.getAttribute("event"),url:b.textContent})}),h(d.getElementsByTagName("ClickTracking"),function(b){a.videoClicks.clickTracking.push(b.textContent)});var f=d.getElementsByTagName("ClickThrough")[0];f&&(a.videoClicks.clickThrough=f.textContent);var g=d.getElementsByTagName("AdParameters")[0];g&&(a.thirdPartyAdParams=g.textContent)}function j(a){return a.vastXmls.forEach(function(b){return i(a,b)}),a}function k(a){var b=a.sources,c=null;return b&&(a.sources=b.filter(function(a){return"application/xml"!==a.mimetype||(c=a.url,!1)})),c}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d;var l=a("../diag"),m=function(a){return a&&a.__esModule?a:{default:a}}(l),n=a("../macros"),o=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(n),p=5},{"../diag":19,"../macros":27}],18:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=void 0;d=a("../conf/dev");var e={adPlaybackTimeout:6e5,vpaidCreativeMethodTimeout:2e4,scoutWatchShouldFire:{AdImpression:!0,AdVideoStart:!0,AdVideoFirstQuartile:!0,AdVideoMidpoint:!0,AdVideoThirdQuartile:!0,AdVideoComplete:!0,AdStopped:!0,AdError:!0,AdClickThru:!0,AdSizeChange:!0,AdDurationChange:!0}};for(var f in d)e[f]=d[f];c.default=e},{"../conf/dev":1,"../conf/prod":2}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./util/fire"),h=d(g),i=a("../lib/version"),j=d(i),k=a("ua-parser-js"),l={VAST_NOT_FOUND:20001,VAST_PARSER_ERROR:20002,VAST_WRAPPER_URI_MISSING:20003,VAST_MALFORMED:20004,VAST_NO_AD:20005,VAST_MAX_DEPTH:20006,VAST_MISSING_AD_TYPE:20007,VAST_CORS_ERROR:20009,VPAID_HANDSHAKE_FAIL:20010,VPAID_LOAD_ERROR:20011,VPAID_LOAD_TIMEOUT:20012,VPAID_VITAL_METHOD_TIMEOUT:20013,VPAID_PROTOCOL_NOT_SUPPORTED:20014,VPAID_INTERNAL_ERROR:20015,NO_VIDEO_SLOT:20201,VPAID_NONVITAL_METHOD_TIMEOUT:20202,VPAID_STATE_INCONSISTENCY:20203,AD_DURATION_NOT_SUPPORTED:20204,VIDEO_SLOT_ERROR:20205,SUBSCRIBER_ERROR:20206,VISTA_UNCAUGHT_ERROR:20207,NO_COMPATIBLE_VIDEO:20208,PUBLISHER_UNCAUGHT_ERROR:20209,VISTA_LOADED:6e4,VISTA_IMP:60001,VISTA_COMPLETE:60002},m={AdImpression:"VISTA_IMP"},n=function(){function a(b){e(this,a),this.adParams=b,this.version=j.default}return f(a,[{key:"addDesiredBitrateInfo",value:function(a){this.adParams.desiredBitrate=a}},{key:"addServedBitrateInfo",value:function(a){this.adParams.servedBitrate=a}},{key:"_getUrlForName",value:function(a,b){var c="JS-"+l[a];if(void 0===this.adParams.browser)try{var d=this._getUserAgent();this.adParams.browser=this._getBrowserFromUserAgent(d)}catch(a){}var e=this.adParams.error[0].url||"";this.adParams&&this.adParams.browser&&(c=c+",rb:"+this.adParams.browser),this.adParams&&this.adParams.selectedFileType&&(c=c+",rm:"+this.adParams.selectedFileType);var f={version:this.version};return this.adParams.desiredBitrate&&(f.dbtr=this.adParams.desiredBitrate),this.adParams.servedBitrate&&(f.sbtr=this.adParams.servedBitrate),b&&b.tagStatusCode&&(f.tagStatusCode=b.tagStatusCode),c+=",dm:"+window.btoa(JSON.stringify(f)),e.replace(/(##|\[)ERRORCODE(##|\])/gi,c)}},{key:"getUrlByEvent",value:function(a){var b=m[a];return b&&this._getUrlForName(b)}},{key:"fire",value:function(a,b,c){(0,h.default)(this._getUrlForName(a,c),b)}},{key:"_getUserAgent",value:function(){return navigator&&navigator.userAgent}},{key:"_getBrowserFromUserAgent",value:function(a){var b=k(a);return b&&b.browser&&b.browser.name+b.browser.major}}]),a}();c.default=n},{"../lib/version":5,"./util/fire":32,"ua-parser-js":9}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b,c){var d=a[c];d&&(a[c]=d.filter(function(a){return a.callback!==b}))}function g(a,b,c){var d=a[b];c&&(Array&&Array.isArray&&Array.isArray(c)||(c=[c])),d&&d.forEach(function(a){return a.callback.apply(a.context||null,c)})}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../util/fire"),j=d(i),k=a("async"),l=d(k),m=a("./providers/index.js"),n=d(m),o=function(){function a(b){e(this,a),this.params=b,this.pixelProviders=(0,n.default)(b),this.diag=null,this.internalSubscribers={},this.externalSubscribers={}}return h(a,[{key:"init",value:function(a){for(var b in this.pixelProviders)this.pixelProviders[b].init(a);this.diag=a.diag}},{key:"addExternalSubscriber",value:function(a,b,c){var d=this.externalSubscribers[b]||[];d.push({callback:a,context:c}),this.externalSubscribers[b]=d}},{key:"addInternalSubscriber",value:function(a,b,c){var d=this.internalSubscribers[b]||[];d.push({callback:a,context:c}),this.internalSubscribers[b]=d}},{key:"removeSubscriber",value:function(a,b){f(this.internalSubscribers,a,b),f(this.externalSubscribers,a,b)}},{key:"fire",value:function(a,b,c,d){var e=this,f=Object.keys(this.pixelProviders).reduce(function(b,d){return b.concat(e.pixelProviders[d].getUris(a,c))},[]);l.default.each(f,function(a,b){(0,j.default)(a,b)},function(){try{g(e.internalSubscribers,a,b),g(e.externalSubscribers,a,b)}catch(b){return void e.handleFireException(a,b,c)}d&&d()})}},{key:"fireSync",value:function(a,b,c,d){var e=this,f=Object.keys(this.pixelProviders).reduce(function(b,d){return b.concat(e.pixelProviders[d].getUris(a,c))},[]);try{g(this.internalSubscribers,a,b),g(this.externalSubscribers,a,b)}catch(b){this.handleFireException(a,b,c)}l.default.each(f,function(a,b){(0,j.default)(a,b)},function(){d&&d()})}},{key:"handleFireException",value:function(a,b,c){var d=this;if("AdError"!==a){var e,f;null!==b&&(e=b.message,(f=b.stack.toString().split(/\r\n|\n/))&&f.length>1&&(e+=" "+window.btoa("stack1: "+f[1]+"stackn: "+f[f.length-1]))),this.diag&&this.diag.fire("SUBSCRIBER_ERROR",function(){d.fire("AdError",["Error occurred when firing "+a+" event handlers: "+b.message],c)},a+" event handlers: "+e)}}},{key:"getProviders",value:function(){return this.pixelProviders}}]),a}();c.default=o},{"../util/fire":32,"./providers/index.js":23,async:6}],21:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.eventPixelMap={},this.adParams=null}return e(a,[{key:"init",value:function(a){var b=this;this.adParams=a.adParams,this.adParams.pixels.forEach(function(a){var c=a.event,d=a.url;c&&d&&"progress"!==c&&(b.eventPixelMap[c]=b.eventPixelMap[c]||[],b.eventPixelMap[c].push(d))})}},{key:"getUris",value:function(a){return this.eventPixelMap[a]||[]}}]),a}();c.default=f},{}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../diag"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(){d(this,a),this.diag=null}return e(a,[{key:"init",value:function(a){this.diag=new g.default(a.adParams)}},{key:"getUris",value:function(a,b){if(this.diag){var c=this.diag.getUrlByEvent(a);return c?[c]:[]}return[]}}]),a}();c.default=h},{"../../diag":19}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return{AdParamsProvider:new g.default(a),PipBoyProvider:new m.default(a),MoatProvider:new k.default(a),DiagProvider:new i.default(a),InsideVideoProvider:new o.default(a)}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=e;var f=a("./ad_params"),g=d(f),h=a("./diag"),i=d(h),j=a("./moat"),k=d(j),l=a("./pip_boy"),m=d(l),n=a("./inside-video"),o=d(n)},{"./ad_params":21,"./diag":22,"./inside-video":24,"./moat":25,"./pip_boy":26}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../../lib/inside-video"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(){d(this,a),this.adParams=null}return e(a,[{key:"init",value:function(a){this.adParams=a.adParams;this.adParams.metadata;this.adParams&&(a.vpaidJSWrapper&&a.vpaidJSWrapper.videoSlot&&(a.adWHeight=a.vpaidJSWrapper.videoSlot.offsetHeight,a.adWidth=a.vpaidJSWrapper.videoSlot.offsetWidth,a.videoSlot=a.vpaidJSWrapper.videoSlot),a.slot&&(0,g.default)(a))}},{key:"getUris",value:function(a){return[]}}]),a}();c.default=h},{"../../../lib/inside-video":3}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../../lib/moat"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(){d(this,a),this.adParams=null}return e(a,[{key:"init",value:function(a){this.adParams=a.adParams;var b=this.adParams.metadata;if(this.adParams&&this.adParams.metadata){var c={level1:"Yahoo!",level2:b.campaignID,level3:b.lineItemID,level4:b.creativeID,slicer1:b.publisherID,slicer2:b.sitePlacementID,sampling:"1.0",viewMode:"normal",zMoatAuctionID:b.auctionID,zMoatAdReqDomain:b.adRequestDomainName};a.slot&&(0,g.default)(a.vpaidJSWrapper,a.slot,c,"yahoovpaidtwoint215831825037")}}},{key:"getUris",value:function(a){return[]}}]),a}();c.default=h},{"../../../lib/moat":4}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.pipBoy=b.pipBoy}return e(a,[{key:"init",value:function(){}},{key:"getUris",value:function(a,b){return[]}}]),a}();c.default=f},{}],27:[function(a,b,c){"use strict";function d(a,b,c){return c.forEach(function(c){var d=void 0;try{d=c.replacement(b)}catch(a){d="undefined"}a=a.replace(c.regex,d)}),a}Object.defineProperty(c,"__esModule",{value:!0}),c.xtraHacker=c.xtra=c.timeStamp=c.publisher=c.protocol=c.pageUrl=c.sitePlacementId=c.lineItemId=c.insertionOrderId=c.vpaidJSWrapperVersion=c.demandSourceId=c.creativeIdHacker=c.creativeId=c.adRequestDomainName=void 0,c.expand=d;var e=a("./util/url");c.adRequestDomainName={regex:/##AD_REQUEST_DOMAIN_NAME##/gi,replacement:function(a){return String(a.metadata.adRequestDomainName)}},c.creativeId={regex:/(##|\[)CREATIVE_ID(##|\])/gi,replacement:function(a){return String(a.metadata.creativeId)}},c.creativeIdHacker={regex:/(##|\[)CREATIVE_ID_HACKER(##|\])/gi,replacement:function(a){return String(a.metadata.creativeId)}},c.demandSourceId={regex:/(\[)demand_source_id(\])/gi,replacement:function(a){return String(a.metadata.demandSourceId)}},c.vpaidJSWrapperVersion={regex:/(##|\[)VISTA_VERSION(##|\])/gi,replacement:function(a){return String(a.metadata.vpaidJSWrapperVersion)}},c.insertionOrderId={regex:/(##|\[)IO_ID(##|\])/gi,replacement:function(a){return String(a.metadata.insertionOrderId)}},c.lineItemId={regex:/(##|\[)LINE_ITEM_ID(##|\])/gi,replacement:function(a){return String(a.metadata.lineItemId)}},c.sitePlacementId={regex:/(##|\[)(SITE_PLACEMENT_ID|SITE_ID|SITE_PLACEMENT)(##|\])/gi,replacement:function(a){return String(a.metadata.sitePlacementId)}},c.pageUrl={regex:/(##|\[)PAGE_URL(##|\])/gi,replacement:function(a){return String((0,e.getTrueUrlInfo)().topUrl)}},c.protocol={regex:/(##|\[)PROTOCOL(##|\])/gi,replacement:function(a){return String(a.metadata.protocol)}},c.publisher={regex:/(##|\[)(PUBLISHER|PUBLISHER_ID)(##|\])/gi,replacement:function(a){return String(a.metadata.publisherId)}},c.timeStamp={regex:/(##|%|\[)TIMESTAMP(##|%|\])/gi,replacement:function(a){return(new Date).toUTCString()}},c.xtra={regex:/(##|\[)XTRA(##|\])/gi,replacement:function(a){return String(a.metadata.xtra)}},c.xtraHacker={regex:/(##|\[)XTRA_HACKER(##|\])/gi,replacement:function(a){return String(a.metadata.xtra)}}},{"./util/url":34}],28:[function(a,b,c){b.exports={vpaidJSWrapperVersion:"VISTA_1_2_VERSION"}},{}],29:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d){return j.expand(p,d,q)+"&count="+b+"&time="+c.toFixed(3)+"&code="+a.code}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./util/clock"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=a("./macros"),j=function(a){
if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("./metadata.json"),l={AdLoaded:{code:"101",onlyOnDebug:!1,fireOnce:!1},AdStarted:{code:"102",onlyOnDebug:!1,fireOnce:!1},AdStopped:{code:"103",onlyOnDebug:!0,fireOnce:!1},AdSkipped:{code:"104",onlyOnDebug:!0,fireOnce:!1},AdSkippableStateChange:{code:"105",onlyOnDebug:!0,fireOnce:!1},AdSizeChange:{code:"106",onlyOnDebug:!0,fireOnce:!1},AdLinearChange:{code:"107",onlyOnDebug:!0,fireOnce:!1},AdDurationChange:{code:"108",onlyOnDebug:!0,fireOnce:!1},AdExpandedChange:{code:"109",onlyOnDebug:!0,fireOnce:!1},AdRemainingTimeChange:{code:"110",onlyOnDebug:!0,fireOnce:!0},AdVolumeChange:{code:"111",onlyOnDebug:!0,fireOnce:!1},AdImpression:{code:"112",onlyOnDebug:!1,fireOnce:!1},AdClickThru:{code:"114",onlyOnDebug:!0,fireOnce:!1},AdInteraction:{code:"115",onlyOnDebug:!0,fireOnce:!1},AdLog:{code:"118",onlyOnDebug:!0,fireOnce:!1},AdError:{code:"119",onlyOnDebug:!1,fireOnce:!1},AdVideoStart:{code:"120",onlyOnDebug:!0,fireOnce:!1},AdVideoFirstQuartile:{code:"121",onlyOnDebug:!0,fireOnce:!1},AdVideoMidpoint:{code:"122",onlyOnDebug:!0,fireOnce:!1},AdVideoThirdQuartile:{code:"123",onlyOnDebug:!0,fireOnce:!1},AdVideoComplete:{code:"124",onlyOnDebug:!0,fireOnce:!1},AdUserAcceptInvitation:{code:"130",onlyOnDebug:!0,fireOnce:!1},AdUserMinimize:{code:"131",onlyOnDebug:!0,fireOnce:!1},AdUserClose:{code:"132",onlyOnDebug:!0,fireOnce:!1},AdPaused:{code:"140",onlyOnDebug:!0,fireOnce:!1},AdPlaying:{code:"141",onlyOnDebug:!0,fireOnce:!1}},m={subscribe:{code:"200",onlyOnDebug:!0,fireOnce:!0},handshakeVersion:{code:"201",onlyOnDebug:!0,fireOnce:!1},initAd:{code:"202",onlyOnDebug:!0,fireOnce:!1},resizeAd:{code:"203",onlyOnDebug:!0,fireOnce:!1},startAd:{code:"204",onlyOnDebug:!1,fireOnce:!1},stopAd:{code:"205",onlyOnDebug:!0,fireOnce:!1},pauseAd:{code:"206",onlyOnDebug:!0,fireOnce:!1},resumeAd:{code:"207",onlyOnDebug:!0,fireOnce:!1},expandAd:{code:"208",onlyOnDebug:!0,fireOnce:!1},collapseAd:{code:"209",onlyOnDebug:!0,fireOnce:!1},skipAd:{code:"210",onlyOnDebug:!0,fireOnce:!1}},n={loadedFile:{code:"300",onlyOnDebug:!0,fireOnce:!1},getVPAIDAdCalled:{code:"301",onlyOnDebug:!0,fireOnce:!1},instantiatedVista:{code:"302",onlyOnDebug:!0,fireOnce:!1}},o={adPlaybackTimedOut:{code:"401",onlyOnDebug:!1,fireOnce:!1}},p="[protocol]://pipboy.btrll.com/Pix-1x1.gif?p_id=[publisher_id]&sp_id=[site_placement_id]&li_id=[line_item_id]&c_id=[creative_id_hacker]&xtra=[xtra_hacker]&version=[vpaidJSWrapper_version]",q=[j.creativeIdHacker,j.vpaidJSWrapperVersion,j.lineItemId,j.protocol,j.publisher,j.sitePlacementId,j.xtraHacker],r=function(){function a(b){d(this,a);var c={};c.metadata=b,c.metadata.vpaidJSWrapperVersion=k.vpaidJSWrapperVersion,this.firedPixels={},this.clock=new h.default,this.count=0,this.debug=!!c.metadata.debug,this.adParams=c}return f(a,[{key:"_logFire",value:function(a){this.firedPixels[a.code]=!0,this.count++}},{key:"_canFirePixel",value:function(a){return!!a&&(!(!this.debug&&a.onlyOnDebug)&&(!a.fireOnce||!this.firedPixels[a.code]))}},{key:"_getUrlFromMap",value:function(a,b){var c=b[a];if(this._canFirePixel(c)){var d=e(c,this.count,this.clock.getCurrentTime(),this.adParams);return this._logFire(c),d}return null}},{key:"_fireUrlFromMap",value:function(a,b){var c=this._getUrlFromMap(a,b);c&&console.log(c)}},{key:"init",value:function(a){this.adParams=a,this.debug=this.adParams.features.some(function(a){return"debug"===a})||this.debug}},{key:"getUrlByEvent",value:function(a){return this._getUrlFromMap(a,l)}},{key:"fireMethod",value:function(a){return this._fireUrlFromMap(a,m)}},{key:"fireBehavior",value:function(a){return this._fireUrlFromMap(a,n)}},{key:"fireError",value:function(a){return this._fireUrlFromMap(a,o)}}]),a}();c.default=r},{"./macros":27,"./metadata.json":28,"./util/clock":31}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){for(var c=0,d=a.length;c!==d;){var e=Math.floor((d-c)/2)+c;if(b.offset>a[e].offset)d=e;else{if(b.offset===a[e].offset){c=e;break}c=e+1}}a.splice(c,0,b)}function g(a,b,c){m.default.whilst(function(){return a.length>0&&a[a.length-1].offset<=b},function(b){var c=a.pop();(0,k.default)(c.uri,b)},c)}function h(a,b,c){for(var d=void 0;a.length>0&&a[a.length-1].offset<=b;)d=a.pop(),d.callback.apply(d.context||null,c)}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./util/fire"),k=d(j),l=a("async"),m=d(l),n=function(){function a(){e(this,a),this.listeners=[],this.percentageListeners=[],this.uris=[],this.percentageUris=[]}return i(a,[{key:"addListener",value:function(a,b,c){f(this.listeners,{callback:a,context:c,offset:b})}},{key:"addListenerPercentage",value:function(a,b,c){f(this.percentageListeners,{callback:a,context:c,offset:b})}},{key:"addURI",value:function(a,b){f(this.uris,{uri:a,offset:b})}},{key:"addURIPercentage",value:function(a,b){f(this.percentageUris,{uri:a,offset:b})}},{key:"checkAndFire",value:function(a,b,c,d){var e=this,f=a/b*100;m.default.series([m.default.apply(g,this.percentageUris,f),m.default.apply(g,this.uris,a)],function(){h(e.percentageListeners,f,c),h(e.listeners,a,c),d&&d()})}}]),a}();c.default=n},{"./util/fire":32,async:6}],31:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){return(new Date).getTime()}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){d(this,a),this.startTime=e()}return f(a,[{key:"getCurrentTime",value:function(){return(e()-this.startTime)/1e3}}]),a}();c.default=g},{}],32:[function(a,b,c){"use strict";function d(a,b){var c=new Image,d=function(){b&&b()};c.onload=d,c.onerror=d,c.src=a}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],33:[function(a,b,c){"use strict";function d(a){var b={},c=a&&a.match(/^\s*(\w+):/);c&&c[1]?b.protocol=c[1]:b.protocol="https";var d=a&&a.split("?")[1];if(d){d.split("&").forEach(function(a){var c=a.split("=");switch(c[0]){case"p":b.publisherId=c[1];break;case"s":b.sitePlacementId=c[1];break;case"l":b.lineItemId=c[1];break;case"ds":b.demandSourceId=c[1];break;case"ic":b.creativeId=c[1];break;case"x":b.xtra=c[1];break;case"au":b.auctionId=c[1];break;case"debug":b.debug="y"===c[1]}})}return b}Object.defineProperty(c,"__esModule",{value:!0}),c.default=d},{}],34:[function(a,b,c){"use strict";function d(){var a,b,c,d,e=window.location.href,f="0",g="",h="",i="",j="";if(window.self===window.top)h=e,j=h,i="noFrames";else if(f="1",function(){try{return void 0!==window.top.location.href}catch(a){return!1}}())g=window.parent.location.href,h=window.top.location.href,j=e+"||"+g+"||"+h,i="sameDomain";else if(function(){try{return void 0!==window.location.ancestorOrigins}catch(a){return!1}}()){for(a=window.location.ancestorOrigins,b=[],d=0;d<a.length;d+=1)b[d]=a[d];c=b.join("||"),j=e+"||"+c,g=b[0],h=b[b.length-1],i="ancestorOrigins"}else g=document.referrer,h=""!==g?g:e,j=e+"||"+g,i="referer";return{inIframe:f,currentUrl:e,parentUrl:g,topUrl:h,detectionMethod:i,domainChainString:j,encodedDomainChainString:encodeURIComponent(j)}}function e(){for(var a=document.getElementsByTagName("script")||[],b=null,c=0;c<a.length;c++){var d=a[c].getAttribute("src");if(d&&d.match(/\/vista\.js/)){b=d;break}}return b}Object.defineProperty(c,"__esModule",{value:!0}),c.getTrueUrlInfo=d,c.getVpaidJSWrapperUrl=e},{}],35:[function(a,b,c){"use strict";function d(a){if(void 0!==window.DOMParser)return(new window.DOMParser).parseFromString(a,"text/xml");if(void 0!==window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")){var b=new window.ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b}throw new Error("No XML parser found")}Object.defineProperty(c,"__esModule",{value:!0}),c.parseXml=d},{}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a){var b=null;return a&&a.some(function(a){return["application/javascript","application/x-javascript"].indexOf(a.mimetype)>-1&&"VPAID"===a.apiFramework&&(b=a.url,!0)}),b}function g(){return{adExpanded:!1,adLinear:!0,adSkippableState:!1,adCompanions:"",adIcons:!1,adVolume:1}}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./config"),j=d(i),k=a("./diag"),l=d(k),m=a("./event/event_handler"),n=d(m),o=a("./util/url"),p=a("./ad_parser/index.js"),q=d(p),r=a("./util/query_params"),s=d(r),t=a("./pip_boy"),u=d(t),v=a("./progress_events"),w=d(v),x=a("./vpaid_handler"),y=d(x);"undefined"==typeof console&&(console={log:function(){}});var z=(0,o.getVpaidJSWrapperUrl)(),A=(0,s.default)(z),B=new u.default(A);B.fireBehavior("loadedFile");var C=function(){function a(){var b=this;e(this,a),this.videoSlot=null,this.debug=A.debug||!1,this.initialized=!1,this.stopAdCalled=!1,this.errorTimeout=null,this.progressEvents=new w.default,this.eventHandler=new n.default({pipBoy:B}),this.vpaidHandler=new y.default(this.eventHandler),this.diag=null,this.props=null,this.watch=null,this.eventHandler.addInternalSubscriber(function(a){b._watchLog({error:a}),b._cleanUp()},"AdError"),window.onerror=function(a,c,d,e,f){z===c?b.diag&&b.diag.fire("VISTA_UNCAUGHT_ERROR",function(){return b._adError("Vista error occurred: "+a),!0}):b.diag&&b.diag.fire("PUBLISHER_UNCAUGHT_ERROR")};var c=0,d=!1,f=!1;this.slotListeners={timeupdate:function(){0===c&&(!f&&b.videoSlot.currentTime>0&&(b._callEventSync("AdImpression"),f=!0),b._callEvent("AdRemainingTimeChange"),b.progressEvents.checkAndFire(b.videoSlot.currentTime,b.videoSlot.duration))},play:function(){1===c&&(b.videoSlot.currentTime=0,c=2)},playing:function(){d||(void 0!==b.videoSlot.src&&b.diag&&b.diag.adParams&&(b.diag.adParams.selectedFileType=b._getMediaFileType(b.videoSlot.src)),b._callEventSync("AdStarted"),d=!0)},seeking:function(){0===c&&(c=1)},seeked:function(){2===c&&(c=0)},ended:function(){0===c&&b.progressEvents.checkAndFire(b.videoSlot.currentTime,b.videoSlot.duration,[],function(){b.diag.fire("VISTA_COMPLETE"),b._callEvent("AdVideoComplete",[],function(){b.stopAdCalled||(b._cleanUp(),b._callEvent("AdStopped"))})})},loadstart:function(){if(b.initialized&&b.videoSlot.networkState===HTMLMediaElement.NETWORK_NO_SOURCE)return void b._adError("No valid video sources found")},loadedmetadata:function(){b._callEvent("AdDurationChange")},canplay:function(){console.log("canplay happened!")},click:function(){b._onClick()},contextmenu:function(a){a.preventDefault()},error:function(){b.diag&&b.diag.fire("VIDEO_SLOT_ERROR",function(){b._adError("Error occurred when playing video with code "+(b.videoSlot.error&&b.videoSlot.error.code))},b.videoSlot.error&&b.videoSlot.error.code)}}}return h(a,[{key:"_watchLog",value:function(a){this.debug&&this.watch&&console.log(a)}},{key:"_callEventSync",value:function(a,b,c){this._callEvent(a,b,c,!0)}},{key:"_callEvent",value:function(a,b,c,d){console.log("calling event "+a),j.default.scoutWatchShouldFire[a]&&this._watchLog({event:a}),(d?this.eventHandler.fireSync:this.eventHandler.fire).call(this.eventHandler,a,b,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},c)}},{key:"_trackMethod",value:function(a){B.fireMethod(a)}},{key:"_adError",value:function(a){this._callEvent("AdError",[a])}},{key:"_setTrackingPixels",value:function(a){var b=this;a.forEach(function(a){var c=a.event,d=a.url;if(c&&d&&"progress"===c&&void 0!==a.offset){var e=a.offset;switch(e.type){case"time":b.progressEvents.addURI(d,e.offset);break;case"percentage":b.progressEvents.addURIPercentage(d,e.offset)}}})}},{key:"_setPlaybackEvents",value:function(){var a=this,b={AdVideoStart:0,AdVideoFirstQuartile:25,AdVideoMidpoint:50,AdVideoThirdQuartile:75};for(var c in b)this.progressEvents.addListenerPercentage(function(b){return function(){a._callEvent(b)}}(c),b[c])}},{key:"_sortByBitrate",value:function(a,b){return b.bitrate-a.bitrate}},{key:"_sortByPlayability",value:function(a,b){var c={probably:2,maybe:1,"":0},d=c[a.isPlayable];return c[b.isPlayable]-d}},{key:"_sortByBitrateValidity",value:function(a,b,c){var d=a.bitrate<=c?1:0;return(b.bitrate<=c?1:0)-d}},{key:"_videoChoiceSorter",value:function(a){var b=this;return function(c,d){return c.bitrate>a!=d.bitrate>a?b._sortByBitrateValidity(c,d,a):c.isPlayable!==d.isPlayable?b._sortByPlayability(c,d):b._sortByBitrate(c,d)}}},{key:"_selectVideo",value:function(a,b){var c=this;return a.forEach(function(a){a.isPlayable=c.videoSlot.canPlayType(a.mimetype)}),a.filter(function(a){return""!==a.isPlayable}).sort(this._videoChoiceSorter(b))[0]}},{key:"_setVideoSources",value:function(a,b,c){if(a){var d=this._selectVideo(a,c);if(d)return this.diag.addServedBitrateInfo(d.bitrate),this.videoSlot.src=d.url,d.url;this._watchLog({foundNoCompatible:a.length,sources:a.map(function(a){return a.mimetype+":"+a.url&&a.url.slice(0,255)+":"+a.apiFramework}).join(),ogUri:b&&b.vastUri&&b.vastUri.slice(0,255)}),this._adError("NO_COMPATIBLE_VIDEO")}else this._adError("No videos")}},{key:"_getMediaFileType",value:function(a){a=a.substring(0,-1===a.indexOf("#")?a.length:a.indexOf("#")),a=a.substring(0,-1===a.indexOf("?")?a.length:a.indexOf("?")),a=a.substring(a.lastIndexOf("/")+1,a.length);var b=a.substring(a.lastIndexOf(".")+1,a.length);if(a!==b&&b.length<5)return b}},{key:"_setAdSize",value:function(a,b){this.videoSlot?(this.videoSlot.width=a,this.videoSlot.height=b,this._callEvent("AdSizeChange")):console.log("No videoSlot")}},{key:"_onClick",value:function(){if(this.videoSlot.paused)this.videoSlot.play();else{console.log("clicked!");var a=this.props.adParameters.videoClicks.clickThrough;this._callEvent("AdClickThru",[a||null,"",!1]),window.open(a,"_blank")}}},{key:"_cleanUp",value:function(){if(this.videoSlot)for(var a in this.slotListeners)this.videoSlot.removeEventListener&&this.videoSlot.removeEventListener(a,this.slotListeners[a],!1);this.errorTimeout&&window.clearTimeout(this.errorTimeout),this.progressEvents=new w.default}},{key:"_readFeatures",value:function(a){var b=this;a.features.forEach(function(a){switch(a){case"debug":b.debug=!0}})}},{key:"initAd",value:function(a,b,c,d,e,h){var i=this;this._trackMethod("initAd");for(var j=new Array(arguments.length),k=0;k<arguments.length;++k)j[k]=arguments[k];var m=function(k,m){if(i.diag=new l.default(m),k)return void i._adError(k.message);if(i.props=g(),i.props.width=a,i.props.height=b,i.props.viewMode=c,i.props.desiredBitrate=d,i.videoSlot=h.videoSlot,i._videoSlotCanAutoPlay=h.videoSlotCanAutoPlay,!i.videoSlot)return void i.diag.fire("NO_VIDEO_SLOT",function(){i._adError("No video slot!")});void 0===i.videoSlot.volume&&(i.videoSlot.volume=i.videoSlot.muted?0:1),i.videoSlot.style&&(i.videoSlot.style.cursor="pointer");var n=h.slot;if(n&&(n.style.cursor="pointer",n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style["z-index"]="100"),i.videoSlot.autoplay=!1,i._readFeatures(m),i.props.adParameters=m,i.initialized=!0,B.init(m),i.eventHandler.init({adParams:m,vpaidJSWrapper:i,slot:n,diag:i.diag}),i.props.adParameters.pixels&&i._setTrackingPixels(i.props.adParameters.pixels),i._setPlaybackEvents(),i.props.adParameters.sources){var o=f(i.props.adParameters.sources);if(null!==o){for(var p=0;p<j.length;++p)j[p]===e&&(j[p]={AdParameters:i.props.adParameters.thirdPartyAdParams});i.vpaidHandler.loadVPAIDAd(o,i.videoSlot,i.props,i.debug,i.watch,i.diag,j)}else{i.diag.addDesiredBitrateInfo(d);for(var q in i.slotListeners)i.videoSlot.addEventListener(q,i.slotListeners[q],!1);n&&n.addEventListener("click",function(){i._onClick()});if(!i._setVideoSources(i.props.adParameters.sources,i.props.adParameters.debugData,d))return void i.diag.fire("NO_COMPATIBLE_VIDEO",function(){i._adError("NO_COMPATIBLE_VIDEO")});i.videoSlot.load(),i._callEventSync("AdLoaded")}}},n=void 0;n="string"==typeof e?e:e.AdParameters,(0,q.default)(n,m)}},{key:"handshakeVersion",value:function(a){return this._trackMethod("handshakeVersion"),console.log("handshake called"),"2.0"}},{key:"startAd",value:function(){var a=this;if(this._trackMethod("startAd"),this._watchLog({vpaid:"startAd"}),this.vpaidHandler.hasAd())return void this.vpaidHandler.startAd();this.videoSlot.play(),this.errorTimeout=setTimeout(function(){B.fireError("adPlaybackTimedOut"),a._adError("Ad playback timed out")},j.default.adPlaybackTimeout)}},{key:"stopAd",value:function(){if(this._trackMethod("stopAd"),this._watchLog({vpaid:"stopAd"}),this.vpaidHandler.hasAd())return void this.vpaidHandler.stopAd();this.videoSlot&&this.videoSlot.pause(),this._cleanUp(),this.progressEvents=new w.default,this.stopAdCalled=!0,this._callEvent("AdStopped")}},{key:"setAdVolume",value:function(a){if(this._watchLog({vpaid:"setAdVolume"}),a>=0&&a<=1&&this.videoSlot){if(this.props.adVolume=a,this.vpaidHandler.hasAd())return void this.vpaidHandler.setAdVolume(a);0===this.videoSlot.volume&&a>0?this._callEvent("unmute"):this.videoSlot.volume>0&&0===a&&this._callEvent("mute"),this.videoSlot.volume=a,this._callEvent("AdVolumeChange")}else console.log("Invalid volume ",a)}},{key:"getAdVolume",value:function(){return this.vpaidHandler.hasAd()?this.vpaidHandler.getAdVolume():this.videoSlot?this.videoSlot.volume:void console.log("No videoSlot")}},{key:"resizeAd",value:function(a,b,c){if(console.log("resizeAd "+a+"x"+b+" "+c),this._watchLog({vpaid:"resizeAd",width:a,height:b,viewMode:c}),this._trackMethod("resizeAd"),this.props.viewMode=c,"fullscreen"!==c&&(this.props.width=a,this.props.height=b),this.vpaidHandler.hasAd())return void this.vpaidHandler.resizeAd(a,b,c);"fullscreen"!==this.props.viewMode&&"fullscreen"===c?this._callEvent("fullscreen"):"fullscreen"===this.props.viewMode&&"fullscreen"!==c&&this._callEvent("exitFullscreen"),this._setAdSize(a,b)}},{key:"pauseAd",value:function(){this._trackMethod("pauseAd"),this._watchLog({vpaid:"pauseAd"}),this.vpaidHandler.hasAd()?this.vpaidHandler.pauseAd():(this.videoSlot.pause(),this._callEvent("AdPaused"))}},{key:"resumeAd",value:function(){this._trackMethod("resumeAd"),this._watchLog({vpaid:"resumeAd"}),this.vpaidHandler.hasAd()?this.vpaidHandler.resumeAd():(this.videoSlot.play(),this._callEvent("AdPlaying"))}},{key:"expandAd",value:function(){this._trackMethod("expandAd"),this._watchLog({vpaid:"expandAd"}),this.vpaidHandler.hasAd()?this.vpaidHandler.expandAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!0}},{key:"getAdExpanded",value:function(){return this._watchLog({vpaid:"getAdExpanded"}),this.vpaidHandler.hasAd()?this.vpaidHandler.getAdExpanded():this.props.adExpanded}},{key:"getAdSkippableState",value:function(){return this._watchLog({vpaid:"getAdSkippableState"}),this.vpaidHandler.hasAd()?this.vpaidHandler.getAdSkippableState():this.props.adSkippableState}},{key:"collapseAd",value:function(){this._trackMethod("collapseAd"),this._watchLog({vpaid:"collapseAd"}),this.vpaidHandler.hasAd()?this.vpaidHandler.collapseAd():this._callEvent("AdExpandedChange"),this.props.adExpanded=!1}},{key:"skipAd",value:function(){this._trackMethod("skipAd"),this._watchLog({vpaid:"skipAd"}),this.vpaidHandler.hasAd()?this.vpaidHandler.skipAd():this.props.adSkippableState?this._callEvent("AdSkipped"):console.log("Ad is not skippable.")}},{key:"subscribe",value:function(a,b,c){this._trackMethod("subscribe"),this.eventHandler.addExternalSubscriber(a,b,c),console.log("Subscribe "+b)}},{key:"unsubscribe",value:function(a,b){this.eventHandler.removeSubscriber(a,b),this._watchLog({vpaid:"unsubscribe"})}},{key:"getAdWidth",value:function(){return this._watchLog({vpaid:"getAdWidth"}),this.vpaidHandler.hasAd()?this.vpaidHandler.getAdWidth():this.videoSlot?this.props.width:void console.log("No videoSlot")}},{key:"getAdHeight",value:function(){return this._watchLog({vpaid:"getAdHeight"}),this.vpaidHandler.hasAd()?this.vpaidHandler.getAdHeight():this.videoSlot?this.props.height:void console.log("No videoSlot")}},{key:"getAdRemainingTime",value:function(){return!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration-this.videoSlot.currentTime}},{key:"getAdDuration",value:function(){return this._watchLog({vpaid:"getAdDuration"}),!this.videoSlot||isNaN(this.videoSlot.duration)?-2:this.videoSlot.duration}},{key:"getAdCompanions",value:function(){return this._watchLog({vpaid:"getAdCompanions"}),this.props.adCompanions}},{key:"getAdIcons",value:function(){return this._watchLog({vpaid:"getAdIcons"}),this.props.adIcons}},{key:"getAdLinear",value:function(){return this._watchLog({vpaid:"getAdLinear"}),this.vpaidHandler.hasAd()&&(this.props.adLinear=this.vpaidHandler.getAdLinear()),this.props.adLinear}}]),a}(),D=function(){var a=new C;return function(){return B.fireBehavior("getVPAIDAdCalled"),a}}();"undefined"!=typeof TEST&&TEST&&(D.Vista=C),b=void 0===b?{}:b,b.exports=D,B.fireBehavior("instantiatedVista")},{"./ad_parser/index.js":13,"./config":18,"./diag":19,"./event/event_handler":20,"./pip_boy":29,"./progress_events":30,"./util/query_params":33,"./util/url":34,"./vpaid_handler":37}],37:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return a&&parseFloat(a)>=2}function f(a){return j.every(function(b){var c=a[b];return c&&"function"==typeof c})}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./config"),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"],k=["AdSkipped","AdLinearChange","AdExpandedChange","AdSkippableStateChange","AdDurationChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdInteraction","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdUserAcceptInvitation","AdUserMinimize","AdUserClose"],l=function(){function a(b){var c=this;d(this,a),this.eventHandler=b,this.iFrame,this.adUnit,this.adDuration,this.stopped=!1,this.videoSlot=null,this.watch=null,this.debug=null,this.props=null,this.diag=null,this.timeouts={load:null,handshake:null,initAd:null,startAd:null,pauseAd:null,resumeAd:null,stopAd:null},this.adPlayingState=null,this.adEventCBs={AdLoaded:function(){clearTimeout(c.timeouts.initAd),c._callEvent("AdLoaded")},AdStarted:function(){c.adPlayingState="AdPlaying",clearTimeout(c.timeouts.startAd),c.videoSlot.paused&&c.diag.fire("VPAID_STATE_INCONSISTENCY"),c.adDuration=c.adUnit.getAdDuration(),-1===c.adDuration&&c.diag.fire("AD_DURATION_NOT_SUPPORTED"),c._callEvent("AdStarted")},AdStopped:function(){c.adPlayingState="AdStopped",clearTimeout(c.timeouts.stopAd),c.stopped||(c.stopped=!0,c._callEvent("AdStopped"))},AdLog:function(a){this._callEvent("AdLog",a)},AdSizeChange:function(){"fullscreen"!==c.props.viewMode&&(c.props.width>c.videoSlot.width||c.props.height>c.videoSlot.height)&&c.diag.fire("VPAID_STATE_INCONSISTENCY"),c._callEvent("AdSizeChange")},AdPaused:function(){clearTimeout(c.timeouts.pauseAd),c.videoSlot.paused||c.diag.fire("VPAID_STATE_INCONSISTENCY"),c._callEvent("AdPaused")},AdPlaying:function(){clearTimeout(c.timeouts.resumeAd),c.videoSlot.paused&&c.diag.fire("VPAID_STATE_INCONSISTENCY"),c._callEvent("AdPlaying")},AdVolumeChange:function(){c.props.adVolume!==c.adUnit.getAdVolume()&&c.diag.fire("VPAID_STATE_INCONSISTENCY"),c._callEvent("AdVolumeChange")},AdDurationChange:function(){c.adDuration=c.adUnit.getAdDuration(),c._callEvent("AdDurationChange")},AdClickThru:function(a,b,d){a||(a=a||c.props.adParameters.videoClicks.clickThrough),c._callEventSync("AdClickThru",[a||null,b||"",d])},AdVideoComplete:function(){c.diag.fire("VISTA_COMPLETE"),c._callEvent("AdVideoComplete")},AdError:function(a){c.diag.fire("VPAID_INTERNAL_ERROR",function(){c._callEvent("AdError",a)})}},k.forEach(function(a){c.adEventCBs[a]=function(){return c._callEvent(a)}})}return g(a,[{key:"_watchLog",value:function(a){this.debug&&this.watch&&this.watch.log(a)}},{key:"_callEventSync",value:function(a,b,c){console.log("calling 3rd party vpaid event in Sync mode "+a),this._watchLog({event:a}),this.eventHandler.fireSync(a,b,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},c)}},{key:"_callEvent",value:function(a,b,c){console.log("calling 3rd party vpaid event in ASync mode "+a),this._watchLog({event:a}),this.eventHandler.fire(a,b,{adTime:this.videoSlot&&this.videoSlot.currentTime,adDuration:this.videoSlot&&this.videoSlot.duration},c)}},{key:"_adError",value:function(a){console.log("3rd party vpaid error "+a),this._watchLog({error:a}),this._callEvent("AdError",[a])}},{key:"_fireDiagError",value:function(a){var b=this;this.diag.fire(a,function(){return b._adError(a)})}},{key:"_subscribeAdEvents",value:function(a){for(var b in this.adEventCBs)this.adUnit.subscribe(this.adEventCBs[b],b,this)}},{key:"loadVPAIDAd",value:function(a,b,c,d,g,h,j){var k=this;this.videoSlot=b,this.props=c,this.debug=d,this.watch=g,this.diag=h,this.iFrame=document.createElement("iframe"),this.iFrame.id="3rd-party-vpaid-frame",this.iFrame.setAttribute("style","border:0 none"),this.iFrame.onload=function(){var b=k.iFrame.contentWindow.document,c=b.createElement("script");k.timeouts.load=setTimeout(function(){k._fireDiagError("VPAID_LOAD_TIMEOUT")},i.default.vpaidCreativeMethodTimeout),c.onload=function(){clearTimeout(k.timeouts.load);var a=k.iFrame.contentWindow.getVPAIDAd;if(a&&"function"==typeof a){k.adUnit=a(),k.timeouts.handshake=setTimeout(function(){k.diag.fire("VPAID_VITAL_METHOD_TIMEOUT",function(){k._adError("handshake timed out")})},i.default.vpaidCreativeMethodTimeout);var b=k.adUnit.handshakeVersion("2.0");if(clearTimeout(k.timeouts.handshake),!f(k.adUnit))return void k.fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED");if(!e(b))return void k.fireDiagError("VPAID_HANDSHAKE_FAIL");k._subscribeAdEvents(k.adUnit),k.timeouts.initAd=setTimeout(function(){k.diag.fire("VPAID_VITAL_METHOD_TIMEOUT",function(){k._adError("initAd timed out")})},i.default.vpaidCreativeMethodTimeout),k.adUnit.initAd.apply(k.adUnit,j)}else k.fireDiagError("VPAID_PROTOCOL_NOT_SUPPORTED")},c.onerror=function(a){clearTimeout(k.timeouts.load),k.fireDiagError("VPAID_LOAD_ERROR")},c.src=a,c.type="text/javascript",b.body.appendChild(c)},document.body.appendChild(this.iFrame)}},{key:"hasAd",value:function(){return!!this.adUnit}},{key:"startAd",value:function(){var a=this;"AdPlaying"!==this.adPlayingState&&(clearTimeout(this.timeouts.startAd),this.timeouts.startAd=setTimeout(function(){a.diag.fire("VPAID_VITAL_METHOD_TIMEOUT",function(){a._adError("startAd timed out")})},i.default.vpaidCreativeMethodTimeout),this.adUnit.startAd())}},{key:"resizeAd",value:function(a,b,c){this.adUnit.resizeAd(a,b,c)}},{key:"stopAd",value:function(){var a=this;clearTimeout(this.timeouts.stopAd),this.timeouts.stopAd=setTimeout(function(){a.diag.fire("VPAID_VITAL_METHOD_TIMEOUT",function(){a._adError("stopAd timed out")})},i.default.vpaidCreativeMethodTimeout),this.adUnit.stopAd()}},{key:"pauseAd",value:function(){var a=this;clearTimeout(this.timeouts.pauseAd),this.timeouts.pauseAd=setTimeout(function(){a.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT"),console.log("pauseAd timed out")},i.default.vpaidCreativeMethodTimeout),this.adUnit.pauseAd()}},{key:"resumeAd",value:function(){var a=this;clearTimeout(this.timeouts.resumeAd),this.timeouts.resumeAd=setTimeout(function(){a.diag.fire("VPAID_NONVITAL_METHOD_TIMEOUT"),console.log("resumeAd timed out")},i.default.vpaidCreativeMethodTimeout),this.adUnit.resumeAd()}},{key:"expandAd",value:function(){this.adUnit.expandAd()}},{key:"collapseAd",value:function(){this.adUnit.collapseAd()}},{key:"skipAd",value:function(){this.adUnit.skipAd()}},{key:"getAdLinear",value:function(){return this.adUnit.getAdLinear()}},{key:"getAdWidth",value:function(){return this.adUnit.getAdWidth()}},{key:"getAdHeight",value:function(){return this.adUnit.getAdHeight()}},{key:"getAdExpanded",value:function(){return this.adUnit.getAdExpanded()}},{key:"getAdSkippableState",value:function(){return this.props.adSkippableState=this.adUnit.getAdSkippableState(),this.props.adSkippableState}},{key:"getAdRemainingTime",value:function(){return this.adUnit.getAdRemainingTime()}},{key:"getAdDuration",value:function(){return this.adUnit.getAdDuration()}},{key:"setAdVolume",value:function(a){this.adUnit.setAdVolume(a)}},{key:"getAdVolume",value:function(){return this.adUnit.getAdVolume()}},{key:"getAdCompanions",value:function(){return this.adUnit.getAdCompanions()}},{key:"getAdIcons",value:function(){return this.adUnit.getAdIcons()}}]),a}();c.default=l},{"./config":18}]},{},[36])(36)});