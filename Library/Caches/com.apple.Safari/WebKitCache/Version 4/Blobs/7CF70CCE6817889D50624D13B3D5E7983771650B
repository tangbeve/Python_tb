/** Copyright © 2005-2018 Apple Inc. All Rights Reserved. **/
experimentData={log_host:"log.optimizely.com",goal_expressions:{1342040577:["^ipadeducationclicks$"],1348180616:["^ipadaccessoriesclicks$"],1348180617:["^ipadrefurbclicks$"],1463362711:[".apple.com/us/checkout"],2353300291:["^golf\\_glove\\_clicks$"],1348170647:["^ipadnowtrendingclicks$"],1459922713:["^shiponlycount$"],1460892699:["^ppucount$"],776980255:["^(https?://)?(www\\.)?store\\.apple\\.com\\/us\\/cart/?(\\?.*)?(#.*)?$"],708710945:["^smallbento\\-link$"],1344850599:[".apple.com/us/cart"],749003052:["^businessclicks$"],2403650481:["^ipad\\_air\\_2\\_button\\_clicks$"],1698720052:["^atc\\-us$"],1007340085:["^accessoriesclicks$"],2447230984:["^ipad\\_mini\\_3\\_button\\_clicks$"],702255930:["^nowtrendingclicks$"],719385909:["^refurbclicks$"],721900742:["^banner\\-click$"],718030795:["^ribbon\\_clicks$"],2361520331:["^wahoo\\_tickr\\_clicks$"],2955870935:["^macforbusinessclicks$"],715790689:["^smallbento\\_clicks$"],1348190690:["^ipadbusinessclicks$"],703207792:["^educationclicks$"],341615730:["^engagement$"],1011150078:[".apple.com/us/checkout/thankyou"],740081783:["^banner\\-link\\_clicks$"],746437369:["^communityclicks$"],2369490111:["^oakley\\_airwave\\_clicks$"],1344820606:["^ipadcomparemodelsclicks$"],1344820607:["^ipadqaclicks$"]},experiments:{11089678342:{audiences:[11136920076],variation_weights:{11125331987:2500,11114624720:2499,11085826100:2501,11083655300:2500},name:"HideCommunityFeatures_MOW_CON-EDU_20180726p",enabled:!0,variation_ids:["11085826100","11083655300","11114624720","11125331987"],site_catalyst_evar:53,urls:[{match:"regex",value:".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)"}],enabled_variation_ids:["11085826100","11083655300","11114624720","11125331987"]},11110986997:{audiences:[11095704931],variation_weights:{11101508001:2500,11174330061:2501,11081987884:2499,11116226440:2500},name:"HideCommunityFeatures_Desktop_CON-EDU_20180726p",enabled:!0,variation_ids:["11174330061","11116226440","11081987884","11101508001"],site_catalyst_evar:53,urls:[{match:"regex",value:".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave)"},{negate:!0,match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)"}],enabled_variation_ids:["11174330061","11116226440","11081987884","11101508001"]},11076121685:{audiences:[11075940600],variation_weights:{11106632374:5e3,11112211817:5e3},name:"ExpandWatchFilters_Desk_Con_20180706p",enabled:!0,variation_ids:["11106632374","11112211817"],site_catalyst_evar:52,urls:[{match:"regex",value:".apple.com/shop/buy-watch/apple-watch($|/.*|#.*|\\?cid|\\?afid|.*cid=)"},{match:"regex",value:".apple.com/us/shop/buy-watch/apple-watch($|/.*|#.*|\\?cid|\\?afid|.*cid=)"},{negate:!0,match:"regex",value:".apple.com/shop/buy-watch/*.*step=(attach)"},{negate:!0,match:"regex",value:".apple.com/us/shop/buy-watch/*.*step=(attach)"}],enabled_variation_ids:["11106632374","11112211817"]}},audiences:{862060009:{conditions:["and",{dimension_id:856271453,value:'window.optimizely.push(["activate"]);\nfalse;'}],name:"Trigger Manual Activation Call",segment_id:856540696},11075940600:{conditions:["and",["or",["or",{dimension_id:856271453,value:"var optlyaovtm = 0; //1 = ALWAYS ON, 0 = OBEY TIMER\nvar optlytmb = 1494010800000 //BEGIN TIME IN MILLISECONDS 05/05/2017 12:00:00 AM\nvar optlytme = 1533884399000; //END TIME IN MILLISECONDS 08/9/2018 11:59:59 PM PDT\n\n// *** DO NOT MODIFY BELOW THIS LINE ***\n\n//soft time logic \nvar optlytm = false; \nif(window.optimizely_tm >= optlytmb && window.optimizely_tm <= optlytme){\n\toptlytm = true;\n} \n\n//return val \noptlytm || optlyaovtm;"}]],["or",["or",{dimension_id:696316307,value:"ff"},{dimension_id:696316307,value:"ff2"},{dimension_id:696316307,value:"ff3"},{dimension_id:696316307,value:"ff4"},{dimension_id:696316307,value:"gc"},{dimension_id:696316307,value:"ie10"},{dimension_id:696316307,value:"ie11"},{dimension_id:696316307,value:"ie8"},{dimension_id:696316307,value:"ie9"},{dimension_id:696316307,value:"opera"},{dimension_id:696316307,value:"safari3"},{dimension_id:696316307,value:"safari4"},{dimension_id:696316307,value:"safari5"},{dimension_id:696316307,value:"safari6"},{dimension_id:696316307,value:"safari7"},{dimension_id:696316307,value:"safari8"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/9') !== -1"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/10') !== -1"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/11') !== -1"}],["or",{dimension_id:7973551847,value:"ipad"},{dimension_id:7973551847,value:"tablet"}]],["or",["not",["or",{dimension_id:7973551847,value:"iphone"},{dimension_id:7973551847,value:"mobile"}]]]],name:"ExpandWatchFilters"},11095704931:{conditions:["and",["or",["or",{dimension_id:856271453,value:"var optlyaovtm = 0; //1 = ALWAYS ON, 0 = OBEY TIMER\nvar optlytmb = 1493942430000 //BEGIN TIME IN MILLISECONDS 05/05/2017 12:00:00 AM\nvar optlytme = 1535741999000; //END TIME IN MILLISECONDS 8/31/2018 11:59:59 PM PDT\n\n// *** DO NOT MODIFY BELOW THIS LINE ***\n\n//soft time logic \nvar optlytm = false; \nif(window.optimizely_tm >= optlytmb && window.optimizely_tm <= optlytme){\n\toptlytm = true;\n} \n\n//return val \noptlytm || optlyaovtm;"}]],["or",["or",{dimension_id:696316307,value:"ff"},{dimension_id:696316307,value:"ff2"},{dimension_id:696316307,value:"ff3"},{dimension_id:696316307,value:"ff4"},{dimension_id:696316307,value:"gc"},{dimension_id:696316307,value:"ie10"},{dimension_id:696316307,value:"ie11"},{dimension_id:696316307,value:"ie8"},{dimension_id:696316307,value:"ie9"},{dimension_id:696316307,value:"opera"},{dimension_id:696316307,value:"safari3"},{dimension_id:696316307,value:"safari4"},{dimension_id:696316307,value:"safari5"},{dimension_id:696316307,value:"safari6"},{dimension_id:696316307,value:"safari7"},{dimension_id:696316307,value:"safari8"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/9') !== -1"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/10') !== -1"}],["or",{dimension_id:7973551847,value:"tablet"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/11') !== -1"}]],["or",["not",["or",{dimension_id:7973551847,value:"mobile"},{dimension_id:7973551847,value:"iphone"}]]]],name:"Community Features Desktop"},11136920076:{conditions:["and",["or",["or",{dimension_id:856271453,value:"var optlyaovtm = 0; //1 = ALWAYS ON, 0 = OBEY TIMER\nvar optlytmb = 1474502400000; //BEGIN TIME IN MILLISECONDS 09/22/2016 12:00:00 AM\nvar optlytme = 1535741999000; //END TIME IN MILLISECONDS 08/31/2018 11:59 PM PST\n\n// *** DO NOT MODIFY BELOW THIS LINE ***\n\n//soft time logic \nvar optlytm = false; \nif(window.optimizely_tm >= optlytmb && window.optimizely_tm <= optlytme){\n\toptlytm = true;\n} \n\n//return val \noptlytm || optlyaovtm;"}]],["or",["or",{dimension_id:696316307,value:"android"},{dimension_id:696316307,value:"blackberry"},{dimension_id:696316307,value:"windows phone"},{dimension_id:696316307,value:"iphone"},{dimension_id:696316307,value:"mobile"}]],["or",["not",["or",{dimension_id:7973551847,value:"ipad"}]]]],name:"Community Features for MOW"}},www_host:"app.optimizely.com",public_suffixes:{"apple.com":["www.apple.com"]},dimensions:{7973551847:{condition_type:"device"},1464880010:{api_name:"LZ",condition_type:"custom_dimension",name:"Landing Zone",segment_id:1469580014},696316307:{condition_type:"browser"},856271453:{condition_type:"code"}},version:"master-14-48-4.411388766316498604",admin_account_id:199382811,blacklisted_experiments:[11079241215,10645970053,7465832279,11091704720,10312335385,10948033315,10684440996,11085675813,10671193011,11116185016,11091666887,7475301072,10309786578,11140871638,11132295770,11113044699,11113033564,11089678303,7483440609,10654324195,10648460017,11083635443,11113891318,7456163192,11095574777,10651173755],project_id:341800575,revision:886,summary_revenue_goal_id:341892035,installation_verified:!0,preview_host:"//optimizely.s3.amazonaws.com",api_host:"api.optimizely.com",variations:{11101508001:{code:"/* _optimizely_variation_url include=\".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)\" exclude=\".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)\" include_match_types=\"regex regex regex regex regex regex regex regex regex regex regex regex\" exclude_match_types=\"regex regex regex regex regex regex regex regex regex regex regex\" id=\"1524070334363\" */\njQuery('<style>.us .as-pdp-productrating, .as-accordion-item.as-pdp-accordionbox.as-pdp-rating,.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection,.as-accordion-container.rs-buyflow-communityanswers { display: none; } .rs-buyflow-accordion>.as-accordion-item { border: 0;}  .as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0) {border-top:1px solid #e3e3e3;}</style>').appendTo('head');\n\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-rating').css({'display':'none'});\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection').css({'display':'none'});\n\njQuery('.as-accordion-container.rs-buyflow-communityanswers').css({'display':\"none\"});\n\njQuery('.rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n\n// Treate iPad and Watch Differently\njQuery('.as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0)').css({'border-top':'1px solid #e3e3e3'});\nif(jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').length ===1) {\n    jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n}\n\njQuery('<style>.us .as-pdp-productrating { display: none !important; }</style>').appendTo('head');\n/* _optimizely_variation_url_end */",name:"Variation #3"},11083655300:{code:"/* _optimizely_variation_url include=\".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)\" exclude=\".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)\" include_match_types=\"regex regex regex regex regex regex regex regex regex regex regex regex\" exclude_match_types=\"regex regex regex regex regex regex regex regex regex regex regex\" id=\"1524070334363\" */\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-rating').css({'display':'none'});\n\njQuery('<style>.us .as-pdp-productrating,.as-accordion-item.as-pdp-accordionbox.as-pdp-rating { display: none; }</style>').appendTo('head');\n\njQuery('<style>.us .as-pdp-productrating { display: none !important; }</style>').appendTo('head');\n/* _optimizely_variation_url_end */",name:"Variation #1"},11116226440:{code:"/* _optimizely_variation_url include=\".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)\" exclude=\".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)\" include_match_types=\"regex regex regex regex regex regex regex regex regex regex regex regex\" exclude_match_types=\"regex regex regex regex regex regex regex regex regex regex regex\" id=\"1524070334363\" */\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-rating').css({'display':'none'});\n\njQuery('<style>.us .as-pdp-productrating,.as-accordion-item.as-pdp-accordionbox.as-pdp-rating { display: none; }</style>').appendTo('head');\n\njQuery('<style>.us .as-pdp-productrating { display: none !important; }</style>').appendTo('head');\n/* _optimizely_variation_url_end */",name:"Variation #1"},11112211817:{code:"window.isForceClosedMVT = false;\njQuery(\"<style> .rs-wuipselect-filter-buttons .rs-wuipselect-filter-toggle {    outline: none;} .as-keyboarduser .rs-wuipselect-filter-buttons .rs-wuipselect-filter-toggle:focus {    outline: 3px solid rgba(131,192,253,.5);}</style>\").appendTo( \"head\" );\ndocument.getElementById('filter-toggle').click();\nwindow.addEventListener('scroll', function() {\n    if(jQuery('.ase-sticky-stuck .rs-wuipselect-filter-isscrolled').length !== 0) {\n        window.isForceClosedMVT = true;\n    }\n    if(window.isForceClosedMVT && jQuery('.ase-sticky-stuck .rs-wuipselect-filter-isscrolled').length === 0) {\n         document.getElementById('filter-toggle').click();\n         window.isForceClosedMVT = false;\n    }\n});",name:"Variation #1"},11081987884:{code:"/* _optimizely_variation_url include=\".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)\" exclude=\".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)\" include_match_types=\"regex regex regex regex regex regex regex regex regex regex regex regex\" exclude_match_types=\"regex regex regex regex regex regex regex regex regex regex regex\" id=\"1524070334363\" */\njQuery('<style>.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection,.as-accordion-container.rs-buyflow-communityanswers { display: none; } .rs-buyflow-accordion>.as-accordion-item { border: 0;} .as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0) {border-top:1px solid #e3e3e3;} .us .as-pdp-productrating { display: block; }</style>').appendTo('head');\n\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection').css({'display':'none'});\njQuery('.as-accordion-container.rs-buyflow-communityanswers').css({'display':'none'});\njQuery('.rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n\n\n// Treate iPad and Watch Differently\njQuery('.as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0)').css({'border-top':'1px solid #e3e3e3'});\nif(jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').length ===1) {\n    jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n}\n/* _optimizely_variation_url_end */",name:"Variation #2"},11174330061:{code:'/* _optimizely_variation_url include=".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=)" exclude=".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach)" include_match_types="regex regex regex regex regex regex regex regex regex regex regex regex" exclude_match_types="regex regex regex regex regex regex regex regex regex regex regex" id="1524070334363" */\njQuery(\'<style>.us .as-pdp-productrating { display: block; }</style>\').appendTo(\'head\');\n/* _optimizely_variation_url_end */',name:"Original"},11114624720:{code:"/* _optimizely_variation_url include=\".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)\" exclude=\".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)\" include_match_types=\"regex regex regex regex regex regex regex regex regex regex regex regex\" exclude_match_types=\"regex regex regex regex regex regex regex regex regex regex regex\" id=\"1524070334363\" */\njQuery('<style>.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection,.as-accordion-container.rs-buyflow-communityanswers { display: none; } .rs-buyflow-accordion>.as-accordion-item { border: 0;} .as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0) {border-top:1px solid #e3e3e3;} .us .as-pdp-productrating { display: block; }</style>').appendTo('head');\n\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection').css({'display':'none'});\njQuery('.as-accordion-container.rs-buyflow-communityanswers').css({'display':'none'});\njQuery('.rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n\n\n// Treate iPad and Watch Differently\njQuery('.as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0)').css({'border-top':'1px solid #e3e3e3'});\nif(jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').length ===1) {\n    jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n}\n/* _optimizely_variation_url_end */",
name:"Variation #2"},11125331987:{code:"/* _optimizely_variation_url include=\".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)\" exclude=\".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)\" include_match_types=\"regex regex regex regex regex regex regex regex regex regex regex regex\" exclude_match_types=\"regex regex regex regex regex regex regex regex regex regex regex\" id=\"1524070334363\" */\njQuery('<style>.us .as-pdp-productrating, .as-accordion-item.as-pdp-accordionbox.as-pdp-rating,.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection,.as-accordion-container.rs-buyflow-communityanswers { display: none; } .rs-buyflow-accordion>.as-accordion-item { border: 0;}  .as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0) {border-top:1px solid #e3e3e3;}</style>').appendTo('head');\n\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-rating').css({'display':'none'});\njQuery('.as-accordion-item.as-pdp-accordionbox.as-pdp-communityanswersection').css({'display':'none'});\n\njQuery('.as-accordion-container.rs-buyflow-communityanswers').css({'display':'none'});\n\njQuery('.rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n\n// Treate iPad and Watch Differently\njQuery('.as-productdecision-family-ipad .rs-buyflow-accordion>.as-accordion-item:eq(0),.watch .rs-buyflow-accordion>.as-accordion-item:eq(0)').css({'border-top':'1px solid #e3e3e3'});\nif(jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').length ===1) {\n    jQuery('.watch .rs-buyflow-accordion>.as-accordion-item').css({'border':'0'});\n}\n\njQuery('<style>.us .as-pdp-productrating { display: none !important; }</style>').appendTo('head');\n/* _optimizely_variation_url_end */",name:"Variation #3"},11085826100:{code:'/* _optimizely_variation_url include=".apple.com/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/us/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-ipad/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/product/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)/.*($|\\?cid|\\?afid|.*cid=) .apple.com/(us-hed|us-k12)/shop/buy-iphone/.*($|\\?cid|\\?afid|.*cid=)" exclude=".apple.com/us/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/us/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/us/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/shop/buy-ipod/ipod-touch\\?*.*step=(attach|engrave) .apple.com/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-ipad/(ipad-pro|ipad-9-7|ipad-mini-4)\\?*.*step=(attach|engrave) .apple.com/(us-hed|us-k12)/shop/buy-iphone/(iphone-x|iphone-8|iphone-7|iphone6s|iphone-se)\\?*.*step=(attach) .apple.com/(us-hed|us-k12)/shop/buy-watch/(apple-watch|apple-watch-nike|apple-watch-hermes|apple-watch-edition|apple-watch-series-1)\\?*.*step=(attach)" include_match_types="regex regex regex regex regex regex regex regex regex regex regex regex" exclude_match_types="regex regex regex regex regex regex regex regex regex regex regex" id="1524070334363" */\njQuery(\'<style>.us .as-pdp-productrating { display: block; }</style>\').appendTo(\'head\');\n/* _optimizely_variation_url_end */',name:"Original"},11106632374:{name:"Original"}},project_js:"\n",segments:{341793217:{segment_value_type:"source_type",api_name:"optimizely_source_type",id:341793217,name:"Source Type"},1469580014:{api_name:"LZ",is_api_only:!0,dimension_id:1464880010,id:1469580014,name:"Landing Zone"},856540696:{audience_id:862060009,api_name:"trigger_manual_activation_call_2_2_3_1",id:856540696,name:"Trigger Manual Activation Call"},341824156:{segment_value_type:"browser",api_name:"optimizely_browser",id:341824156,name:"Browser"},341794206:{segment_value_type:"mobile",api_name:"optimizely_mobile",id:341794206,name:"Mobile Visitors"},341932127:{segment_value_type:"campaign",api_name:"optimizely_campaign",id:341932127,name:"Campaign"}},click_goals:[{event_name:"nowtrendingclicks",experiments:{996095837:!0,698469559:!0},selector:".tiles-12 > .tile-8"},{event_name:"educationclicks",experiments:{996095837:!0,698469559:!0},selector:".tiles-12 > .tile-11"},{event_name:"smallbento-link",experiments:{739950725:!0},selector:"#coherent_id_41"},{event_name:"smallbento_clicks",experiments:{739950725:!0},selector:"#coherent_id_40"},{event_name:"ribbon_clicks",experiments:{2908211473:!0,739950725:!0},selector:".superlink-hover"},{event_name:"refurbclicks",experiments:{996095837:!0,698469559:!0},selector:".tiles-12 > .tile-10"},{event_name:"banner-click",experiments:{739950725:!0},selector:"#coherent_id_16"},{event_name:"banner-link_clicks",experiments:{739950725:!0},selector:"#coherent_id_17"},{event_name:"communityclicks",experiments:{996095837:!0,698469559:!0},selector:".tiles-12 > .tile-9"},{event_name:"businessclicks",experiments:{2908211473:!0,996095837:!0,698469559:!0},selector:".tiles-12 > .tile-12"},{event_name:"AccessoriesClicks",experiments:{996095837:!0},selector:".tiles-12 > .tile-6"},{event_name:"iPadEducationClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-10"},{event_name:"iPadCompareModelsClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-6"},{event_name:"iPadQAClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-8"},{event_name:"iPadNowTrendingClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-7"},{event_name:"iPadAccessoriesClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-5"},{event_name:"iPadRefurbClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-9"},{event_name:"iPadBusinessClicks",experiments:{1344830616:!0},selector:".tiles-11 > .tile-11"},{event_name:"atc-us",experiments:{3119010084:!0,3105240360:!0,2908211473:!0,1685430802:!0,3068642131:!0,3142810488:!0,3049860825:!0},selector:"button[name='add-to-cart']"},{event_name:"golf_glove_clicks",experiments:{2362730385:!0},selector:".pinwheel > .row > div:eq(0) > div:eq(0)"},{event_name:"wahoo_tickr_clicks",experiments:{2362730385:!0},selector:".pinwheel > .row > div:eq(2) > div:eq(0)"},{event_name:"oakley_airwave_clicks",experiments:{2362730385:!0},selector:".pinwheel > .row > div:eq(0) > div:eq(1)"},{event_name:"ipad_air_2_button_clicks",experiments:{2454550454:!0},selector:".info > .button"},{event_name:"ipad_mini_3_button_clicks",experiments:{2454550454:!0},selector:"span.button"},{event_name:"macforbusinessclicks",experiments:{2908211473:!0},selector:".tiles-more > li:eq(13) > a:eq(0)"}]},function(){var asyncRequest={},preview_loader={},integrator={},api={},distributor={},query={},id={},redirect={},detect={},directive={},json={},tracker={},condition={facade:{}},template={},visitor={},activator={},rule_builder={},main={},rules={},feature_detect={},cookie={},user={},iapi={},evaluator={},data={},dcp={},asyncInfo={},segmenter={},timer={},optly={murmur3:{},Visitor:{},taint:{},nativity:{},timeAndDayInterval:{},client:{third_party:{},geolocation:{},rum:{RumCollector:{}},storage:{Storage:{}},diagnostic:{},Facade:{},preview:{Logger:{}}},CIDR:{},Cleanse:{},match:{},hashing:{}},common={},behavior={Policy:{},FIELDS:{},Store:{},Event:{},EventBase:{}},useragent={},plan={};geolocation={},optly.client.geolocation.makeRequest=function(e,t,i){geolocation.cdn3Requested=+new Date,optly.client.geolocation.addScriptTag(e)},optly.client.geolocation.addScriptTag=function(e){var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,t.insertBefore(i,t.firstChild)},geolocation.requestGeo=optly.client.geolocation.makeRequest,optly.nativity.getNativeGetElementsByClassName=function(){var e=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(e)){var t=window.optimizely||{},i=t.getElementsByClassName,a=window.optly||{},n=a.getElementsByClassName;e=optly.nativity.isNativeFunction(i)?i:optly.nativity.isNativeFunction(n)?n:null}return e},optly.nativity.isNativeFunction=function(e){return e&&String(e).indexOf("[native code]")!==-1},optly.Cleanse.each=function(e,t,i){var a=!!Object.prototype.__lookupGetter__,n=!!Object.prototype.__lookupSetter__;for(var r in e)if(e.hasOwnProperty(r)){var o=a?e.__lookupGetter__(r):null,s=n?e.__lookupSetter__(r):null;try{var c=o?null:e[r];t.call(i,r,c,o,s)}catch(d){}}},optly.Cleanse.finish=function(){if(optly.Cleanse.running){optly.Cleanse.running=!1,optly.Cleanse.each(optly.Cleanse.types,function(e,t){if(Object.prototype.__defineGetter__){var i=optly.Cleanse.getters[e];optly.Cleanse.each(i,function(i,a){t.prototype.__defineGetter__(i,a),optly.Cleanse.log("restored getter",e,i)})}if(Object.prototype.__defineSetter__){var a=optly.Cleanse.setters[e];optly.Cleanse.each(a,function(i,a){t.prototype.__defineSetter__(i,a),optly.Cleanse.log("restored setter",e,i)})}var n=optly.Cleanse.properties[e];optly.Cleanse.each(n,function(i,a){t.prototype[i]=a,optly.Cleanse.log("restored property",e,i)})}),optly.Cleanse.unfixGetElementsByClassName(),optly.Cleanse.log("finish");var e=window.console,t="optimizely_log=true",i=window.location.hash.indexOf(t)!==-1||window.location.search.indexOf(t)!==-1;if(i&&e&&e.log)for(var a=optly.Cleanse.logs,n=0;n<a.length;n++)e.log(a[n])}},optly.Cleanse.log=function(e,t,i){t?(t=t.replace(/_/g,""),optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+e+": "+t+"."+i)):optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+e)},optly.Cleanse.start=function(){var e=window.location.hostname;if(e.indexOf("optimizely")===-1||e.indexOf("edit")!==-1||e.indexOf("preview")!==-1||e.indexOf("test")!==-1){if(optly.Cleanse.running)return void optly.Cleanse.log("already running so didn't start");optly.Cleanse.log("start"),optly.Cleanse.running=!0;for(var t in optly.Cleanse.types)optly.Cleanse.types[t]||delete optly.Cleanse.types[t];optly.Cleanse.each(optly.Cleanse.types,function(e,t){optly.Cleanse.getters[e]={},optly.Cleanse.properties[e]={},optly.Cleanse.setters[e]={},optly.Cleanse.each(t.prototype,function(i,a,n,r){return optly.nativity.isNativeFunction(a)||optly.nativity.isNativeFunction(n)||optly.nativity.isNativeFunction(r)?void optly.Cleanse.log("ignore native code",e,i):(n?(optly.Cleanse.getters[e][i]=n,optly.Cleanse.log("cleansed getter",e,i)):(optly.Cleanse.properties[e][i]=a,optly.Cleanse.log("cleansed property",e,i)),r&&(optly.Cleanse.setters[e][i]=r,optly.Cleanse.log("cleansed setter",e,i)),void delete t.prototype[i])})}),optly.Cleanse.fixGetElementsByClassName(),optly.Cleanse.hasRunStart=!0}},optly.Cleanse.fixGetElementsByClassName=function(){if(!optly.nativity.isNativeFunction(document.getElementsByClassName)){var e=optly.nativity.getNativeGetElementsByClassName();e?(optly.Cleanse.getElementsByClassName=document.getElementsByClassName,document.getElementsByClassName=e):optly.Cleanse.log("Error: native HTMLElement.prototype.getElementsByClassName missing")}},optly.Cleanse.unfixGetElementsByClassName=function(){optly.Cleanse.getElementsByClassName&&(document.getElementsByClassName=optly.Cleanse.getElementsByClassName,optly.Cleanse.getElementsByClassName=null)},optly.Cleanse.getElementsByClassName=null,optly.Cleanse.getters={},optly.Cleanse.logs=[],optly.Cleanse.properties={},optly.Cleanse.setters={},optly.Cleanse.types={Object_:Object},window.optly=window.optly||{},window.optly.Cleanse={finish:optly.Cleanse.finish,logs:optly.Cleanse.logs,start:optly.Cleanse.start},optly.Cleanse.start();var $=jQuery,optimizelyCode=function(){function appendArray(e,t){e.push.apply(e,t)}function arrayContains(e,t){for(var i=0;i<e.length;i++)if(t==e[i])return!0;return!1}function containsString(e,t){return e.indexOf(t)!==-1}function containsRegEx(e,t){return Boolean(e.match(t))}function curry(e,t){var i=slice(arguments,1);return function(){var t=slice(arguments);return prependArray(t,i),e.apply(this,t)}}function each(e,t,i){var a=null;if(isArrayLike(e)){for(var n=e.length,r=0;r<n;++r)if(a=t.call(i,e[r],r),isDefined(a))return a}else for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&(a=t.call(i,o,e[o]),isDefined(a)))return a;return a}function map(e,t){if("function"==typeof e.map)return e.map(t);for(var i=[],a=0;a<e.length;a++)i.push(t(e[a],a));return i}function extend(e,t){return each(t,function(t,i){e[t]=i}),e}function getFieldValue(e,t){if(isArrayLike(t)){for(var i=e,a=0;a<t.length;a++){var n=t[a];if(!goog.isObject(i)||!i.hasOwnProperty(n))return;i=i[n]}return i}}function filter(e,t){for(var i=[],a=0,n=e.length;a<n;a++){var r=e[a];t(r)&&i.push(r)}return i}function format(e,t){var i=arguments,a=1;return e.replace(/%s/g,function(){return i[a++]})}function generateRandomHexString(){return Math.random().toString(16).replace("0.","")}function inArray(e,t){return each(t,function(t){if(t===e)return!0})||!1}function isArrayLike(e){return!!e&&"object"==typeof e&&"number"==typeof e.length}function isDefined(e){return"undefined"!=typeof e}function isNonNullObject(e){return"object"==typeof e&&null!==e}function isNumberLike(e){return("number"==typeof e||"string"==typeof e)&&Number(e)==e}function isString(e){return"string"==typeof e}function prependArray(e,t){e.unshift.apply(e,t)}function quote(e){return e.replace(/([\f\n\r\t\\'"])/g,"\\$1")}function safeDecodeUriComponent(e){try{return decodeURIComponent(e)}catch(t){return e}}function slice(e,t,i){return Array.prototype.slice.call(e,t||0,i||e.length)}function trim(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function safeToAttemptDocumentWrite(){return"loading"===document.readyState}function beginsWith(e,t){return 0===e.indexOf(t)}function canonicalizeOperator(e){return e=trim((e||"").toString()),OP_MAP[e]||e}function buildPicker(e,t,i){var a={where:t};if(e.count&&(a.limit=e.count),e.modifier===rule_builder.FREQUENCY_FILTERS.MOST_FREQUENT){var n=rule_builder.getFieldKeyPathForSource(e.name,i),r=rule_builder.aggregate("count"),o=rule_builder.aggregateField("count"),s=rule_builder.groupField(n);return extend(a,{select:[{field:s}],groupBy:rule_builder.groupBy([n]),aggregate:[r],orderBy:[{field:o,direction:"DESC"}]})}return extend(a,{orderBy:[{field:[behavior.FIELDS.TIME],direction:"DESC"}]})}var DATA=experimentData,asyncRequest={},preview_loader={},integrator={},api={},distributor={},query={},id={},redirect={},detect={},directive={},json={},tracker={},condition={facade:{}},template={},visitor={},activator={},rule_builder={},main={},rules={},feature_detect={},cookie={},user={},iapi={},evaluator={},data={},dcp={},asyncInfo={},segmenter={},timer={},optly={murmur3:{},Visitor:{},taint:{},nativity:{},timeAndDayInterval:{},client:{third_party:{},geolocation:{},rum:{RumCollector:{}},storage:{Storage:{}},diagnostic:{},Facade:{},preview:{Logger:{}}},CIDR:{},Cleanse:{},match:{},hashing:{}},common={},behavior={Policy:{},FIELDS:{},Store:{},Event:{},EventBase:{}},useragent={},plan={},COMPILED=!1,goog=goog||{};goog.global=this,goog.DEBUG=!0,goog.LOCALE="en",goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!goog.getObjectByName(t);)goog.implicitNamespaces_[t]=!0}goog.exportPath_(e)},goog.setTestOnly=function(e){if(COMPILED&&!goog.DEBUG)throw e=e||"",Error(": "+e)},COMPILED||(goog.isProvided_=function(e){return!goog.implicitNamespaces_[e]&&!!goog.getObjectByName(e)},goog.implicitNamespaces_={}),goog.exportPath_=function(e,t,i){var a=e.split("."),n=i||goog.global;a[0]in n||!n.execScript||n.execScript("var "+a[0]);for(var r;a.length&&(r=a.shift());)!a.length&&goog.isDef(t)?n[r]=t:n=n[r]?n[r]:n[r]={}},goog.getObjectByName=function(e,t){for(var i,a=e.split("."),n=t||goog.global;i=a.shift();){if(!goog.isDefAndNotNull(n[i]))return null;n=n[i]}return n},goog.globalize=function(e,t){var i=t||goog.global;for(var a in e)i[a]=e[a]},goog.addDependency=function(e,t,i){if(!COMPILED){for(var a,n,r=e.replace(/\\/g,"/"),o=goog.dependencies_,s=0;a=t[s];s++)o.nameToPath[a]=r,r in o.pathToNames||(o.pathToNames[r]={}),o.pathToNames[r][a]=!0;for(var c=0;n=i[c];c++)r in o.requires||(o.requires[r]={}),o.requires[r][n]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.require=function(e){if(!COMPILED){if(goog.isProvided_(e))return;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,void goog.writeScripts_()}var i="goog.require could not find: "+e;throw goog.global.console&&goog.global.console.error(i),Error(i)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS=!0,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.identityFunction=function(e,t){return e},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return"undefined"!=typeof e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("script"),i=t.length-1;i>=0;--i){var a=t[i].src,n=a.lastIndexOf("?"),r=n==-1?a.length:n;if("base.js"==a.substr(r-7,7))return void(goog.basePath=a.substr(0,r-7))}},goog.importScript_=function(e){var t=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&t(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){if(goog.inHtmlDocument_()){var t=goog.global.document;return t.write('<script type="text/javascript" src="'+e+'"></script>'),!0}return!1},goog.writeScripts_=function(){function e(n){if(!(n in a.written)){if(n in a.visited)return void(n in i||(i[n]=!0,t.push(n)));if(a.visited[n]=!0,n in a.requires)for(var r in a.requires[n])if(!goog.isProvided_(r)){if(!(r in a.nameToPath))throw Error("Undefined nameToPath for "+r);e(a.nameToPath[r])}n in i||(i[n]=!0,t.push(n))}}var t=[],i={},a=goog.dependencies_;for(var n in goog.included_)a.written[n]||e(n);for(var r=0;r<t.length;r++){if(!t[r])throw Error("Undefined script input");goog.importScript_(goog.basePath+t[r])}},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var i=Object.prototype.toString.call(e);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isDef=function(e){return void 0!==e},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);/** @preserveTry */
try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var i="array"==t?[]:{};for(var a in e)i[a]=goog.cloneObject(e[a]);return i}return e},goog.bindNative_=function(e,t,i){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,i){if(!e)throw new Error;if(arguments.length>2){var a=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,a),e.apply(t,i)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,i){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.unshift.apply(t,i),e.apply(this,t)}},goog.mixin=function(e,t){for(var i in t)e[i]=t[i]},goog.now=Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,i=t.createElement("script");i.type="text/javascript",i.defer=!1,i.appendChild(t.createTextNode(e)),t.body.appendChild(i),t.body.removeChild(i)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var i,a=function(e){return goog.cssNameMapping_[e]||e},n=function(e){for(var t=e.split("-"),i=[],n=0;n<t.length;n++)i.push(a(t[n]));return i.join("-")};return i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?a:n:function(e){return e},t?e+"-"+i(t):i(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){var i=t||{};for(var a in i){var n=(""+i[a]).replace(/\$/g,"$$$$");e=e.replace(new RegExp("\\{\\$"+a+"\\}","gi"),n)}return e},goog.exportSymbol=function(e,t,i){goog.exportPath_(e,t,i)},goog.exportProperty=function(e,t,i){e[t]=i},goog.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new i,e.prototype.constructor=e},goog.base=function(e,t,i){var a=arguments.callee.caller;if(a.superClass_)return a.superClass_.constructor.apply(e,Array.prototype.slice.call(arguments,1));for(var n=Array.prototype.slice.call(arguments,2),r=!1,o=e.constructor;o;o=o.superClass_&&o.superClass_.constructor)if(o.prototype[t]===a)r=!0;else if(r)return o.prototype[t].apply(e,n);if(e[t]===a)return e.constructor.prototype[t].apply(e,n);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},json.stringify=function(e){try{return window.JSON.stringify(e)}catch(t){throw new Error("JSON: Unable to stringify ("+t.message+")")}},json.parse=function(e){try{return window.JSON.parse(e)}catch(t){throw new Error("JSON: Unable to parse ("+t.message+")")}},optly.client.preview.ENABLED=!1,optly.client.preview.Logger.log=[],optly.client.preview.Logger.reasons={},optly.client.preview.Logger.addEvent=optly.client.preview.ENABLED?function(e,t){t=extend(t||{},{message:e,date:(new Date).getTime()}),optly.client.preview.Logger.log.push(t)}:goog.nullFunction,optly.client.preview.Logger.setReason=optly.client.preview.ENABLED?function(e,t){optly.client.preview.Logger.reasons[e]=t}:goog.nullFunction,optly.client.preview.Logger.getReason=optly.client.preview.ENABLED?function(e){return optly.client.preview.Logger.reasons[e]}:goog.nullFunction,optly.client.preview.Logger.deleteReason=optly.client.preview.ENABLED?function(e){delete optly.client.preview.Logger.reasons[e]}:goog.nullFunction,optly.client.preview.Logger.clear=optly.client.preview.ENABLED?function(){optly.client.preview.Logger.log=[]}:goog.nullFunction,data.getAdminAccountId=function(){return data.getProperty("admin_account_id")},data.getAudience=function(e){return data.getProperty("audiences",e)},data.getAudienceProperty=function(e,t){return data.getProperty("audiences",e,t)},data.getAudiences=function(){return data.getProperty("audiences")},data.getAudienceSegmentId=function(e){var t=data.getAudienceProperty(e,"segment_id");return t?t:null},data.getClickGoals=function(){if(!data.clickGoalsWithSeparatedSelectors){var e=data.getProperty("click_goals")||[];data.clickGoalsWithSeparatedSelectors=[];for(var t=0,i=e.length;t<i;t++)for(var a=e[t],n=a.selector.split(SELECTOR_DELIMITER),r=0,o=n.length;r<o;r++){var s=n[r];if(s){var c={event_name:a.event_name,selector:s};"experiments"in a?c.experiments=a.experiments:"url_conditions"in a&&(c.url_conditions=a.url_conditions),"revenue"in a&&(c.revenue=a.revenue),data.clickGoalsWithSeparatedSelectors.push(c)}}}return data.clickGoalsWithSeparatedSelectors},data.getConditions=function(e,t){switch(t){case"experiment":return data.getExperimentConditions(e);case"segment":return data.getSegmentConditions(e);default:return[]}},data.usesAudiences=function(e){return!(data.getExperimentConditions(e)||data.getSegmentConditions(e))},data.getCustomRevenueGoals=function(){return data.getProperty("custom_revenue_goals")},data.getDCPServiceId=function(){return data.getProperty("dcp_service_id")||null},data.dcpKeyfieldLocator,data.getDCPKeyfieldLocators=function(){return data.getProperty("dcp_keyfield_locators")||[]},data.getSummaryRevenueGoalId=function(){return data.getProperty("summary_revenue_goal_id")||null},data.getDimension=function(e){return data.getProperty("dimensions",e)},data.getDimensions=function(){return data.getProperty("dimensions")||{}},data.getDimensionIdByApiName=function(e){for(var t in data.getDimensions())if(e===data.getDimensionApiName(t))return t;return null},data.getDimensionProperty=function(e,t){return data.getProperty("dimensions",e,t)},data.getDimensionApiName=function(e){var t=data.getDimensionProperty(e,"api_name");return t?t:null},data.getDimensionType=function(e){var t=data.getDimensionProperty(e,"condition_type");return t?t:null},data.getDimensionName=function(e){var t=data.getDimensionProperty(e,"name");return t?t:null},data.getDimensionSegmentId=function(e){var t=data.getDimensionProperty(e,"segment_id");return t?t:null},data.getEnabledExperimentIds=function(){return data.cachedEnabledExperimentIds||(data.cachedEnabledExperimentIds=filter(data.getExperimentIds(),data.isExperimentEnabled)),data.cachedEnabledExperimentIds},data.getEnabledVariationIds=function(e){return data.getExperimentProperty(e,"enabled_variation_ids")||[]},data.getExperimentAudienceIds=function(e){return data.getExperimentProperty(e,"audiences")||[]},data.getExperimentCode=function(e){return data.getExperimentProperty(e,"code")||""},data.getExperimentStatus=optly.client.preview.ENABLED?function(e){return data.getExperimentProperty(e,"status")}:goog.nullFunction,data.getExperimentConditions=function(e){return data.getExperimentProperty(e,"conditions")},data.getExperimentUrls=function(e){return data.getExperimentProperty(e,"urls")},data.getGoalExpressions=function(){return data.getProperty("goal_expressions")},data.getLegacyUUID=function(){return data.getProperty("legacy_uuid")||!1},data.getMatchingGoalIds=function(e){var t=data.getGoalExpressions(),i=[];for(var a in t)if(t.hasOwnProperty(a))for(var n=t[a],r=0;r<n.length;r++)try{if(new RegExp(n[r],"i").test(e)){i.push(a);break}}catch(o){}return i},data.getProjectClickGoalsWithCustomTargeting=function(){var e=filter(data.getClickGoals(),function(e){return!e.experiments&&condition.testUrls(e.url_conditions||[])});return e},data.getSegmentIdByIdentifier=function(e){var t=data.getSegments();for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i];if(a&&a.api_name===e)return String(i)}return null},data.getSegementIsDefault=optly.client.preview.ENABLED?function(e){return data.getSegmentProperty(e,"is_default")||!1}:goog.nullFunction,data.getSegment=function(e){return data.getSegments()[e]},data.getSegmentAPIOnly=function(e){return data.getSegmentProperty(e,"is_api_only")||!1},data.getSegmentAudienceId=function(e){return data.getSegmentProperty(e,"audience_id")},data.getSegmentConditions=function(e){return data.getSegmentProperty(e,"add_condition")},data.getSegmentIdentifier=function(e){return data.getSegmentProperty(e,"api_name")||""},data.getSegmentName=function(e){return data.getSegmentProperty(e,"name")||"Seg "+e},data.getSegmentValueType=function(e){return data.getSegmentProperty(e,"segment_value_type")||""},data.getUrlConditions=function(e){var t=data.getExperimentConditions(e),i=[];return each(t,function(e){"url"===e.type&&i.push(t)}),i},data.getExperimentCss=function(e){return data.getExperimentProperty(e,"css")||""},data.getExperimentEvents=function(e){var t={},i=data.getExperimentProperty(e,"events")||{};each(i,function(e,i){t[e]=[i]});for(var a=(filter(data.getClickGoals(),function(t){return"experiments"in t&&e in t.experiments})),n=0;n<a.length;n++){var r=a[n];t[r.selector]||(t[r.selector]=[]),t[r.selector].push({eventName:r.event_name,revenue:r.revenue,experimentIds:r.experiments})}return t},data.getExperiments=function(){return data.getProperty("experiments")||{}},data.getBlacklistedExperiments=function(){return data.getProperty("blacklisted_experiments")||{}},data.getExperimentIds=function(){return keys(data.getProperty("experiments")||{})},data.getExperimentIgnorePercentage=function(e){return data.getExperimentProperty(e,"ignore")||0},data.isExperimentManuallyActivated=function(e){return"manual"===data.getExperimentProperty(e,"activation_mode")},data.isExperimentConditionallyActivated=function(e){return"conditional"===data.getExperimentProperty(e,"activation_mode")},data.getConditionalActivationCode=function(e){return data.getExperimentProperty(e,"conditional_code")},data.getExperimentName=function(e){return data.getExperimentProperty(e,"name")||"Exp "+e},data.getExperimentString=function(e){var t=data.getExperimentName(e);return'experiment "'+t+'" ('+e+")"},data.getExperimentSectionIds=function(e){return data.getExperimentProperty(e,"section_ids")||[]},data.getExperimentVariationIds=function(e){return data.getExperimentProperty(e,"variation_ids")||[]},data.getExperimentVariationWeights=function(e){return data.getExperimentProperty(e,"variation_weights")||{}},data.getExperimentSteps=function(e){return data.getExperimentProperty(e,"steps")},data.getGoogleAnalyticsSlot=function(e){var t=data.getGoogleAnalyticsProperty(e),i=0;return isDefined(t)&&(i=t.slot||i),i},data.getGoogleAnalyticsTracker=function(e){var t=data.getGoogleAnalyticsProperty(e),i="";return isDefined(t)&&(i=t.tracker||i),i},data.getInsecurePreview=function(){return!!data.getProperty("insecure_preview")},data.getIPAnonymization=function(){return!!data.getProperty("ip_anonymization")},data.getListTargetedKey=function(e){return data.getListTargetedKeys()[e]},data.getListTargetedKeys=function(){return data.getProperty("list_targeted_keys")||{}},data.getLogUrlRoot=function(){return data.getUrlRoot("log_host",data.getProjectId())+"/event"},data.getPreviewHost=function(){return data.getProperty("preview_host")},data.getProjectId=function(){return data.getProperty("project_id")},data.getProjectCode=function(){return data.getProperty("project_js")},data.getRevision=function(){return data.getProperty("revision")},data.getSectionIds=function(){return keys(data.getProperty("sections")||{})},data.getSegments=function(){return data.getProperty("segments")||{}},data.getSegmentIds=function(){return keys(data.getSegments())},data.getExperimentVariationSectionId=function(e,t){for(var i=data.getExperimentSectionIds(e),a=0;a<i.length;a++){var n=data.getSectionVariationIds(i[a]);if(arrayContains(n,t))return i[a]}return""},data.getPublicSuffix=function(e){var t={},i=data.getProperty("public_suffixes")||{};return each(i,function(e,i){each(i,function(i){t[i]=e})}),data.getPublicSuffix=function(e){return t[e]||""},data.getPublicSuffix.call(null,e)},data.getSectionName=function(e){return data.getSectionProperty(e,"name")||"Sec "+e},data.getSectionVariationIds=function(e){return data.getSectionProperty(e,"variation_ids")||[]},data.getSiteCatalystEVar=function(e){return data.getExperimentProperty(e,"site_catalyst_evar")||null},data.getSiteCatalystProp=function(e){return data.getExperimentProperty(e,"site_catalyst_prop")||null},data.getVariations=function(){return data.getProperty("variations")||{}},data.getVariationIds=function(){return keys(data.getProperty("variations")||{})},data.getVariationCode=function(e){var t=[],i=e.split(VARIATION_ID_DELIMITER);return each(i,function(e){var i=data.getVariationProperty(e,"code");i&&t.push(i)}),t.join("\n")},data.UrlMatchCondition,data.VariationPage,data.getVariationPages=function(e){return data.getVariationProperty(e,"pages")},data.getVariationExperimentId=function(e){if(!data.cachedVariationExperimentIds){var t={};each(data.getExperimentIds(),function(e){each(data.getExperimentSectionIds(e),function(i){each(data.getSectionVariationIds(i),function(i){t[i]=e})}),each(data.getExperimentVariationIds(e),function(i){t[i]=e})}),data.cachedVariationExperimentIds=t}var i=e.split(VARIATION_ID_DELIMITER);return data.cachedVariationExperimentIds[i[0]]||""},data.getVariationIdByIndex=function(e,t){var i=data.getExperimentVariationIds(e),a=null;try{a=i[t]}catch(n){}return a},data.getVariationIndex=function(e){var t=data.getVariationExperimentId(e),i=data.getExperimentSectionIds(t);if(0===i.length){for(var a=data.getExperimentVariationIds(t),n=0;n<a.length;n++)if(a[n]===e)return n}else{for(var r=e.split(VARIATION_ID_DELIMITER),o=[],s=0;s<i.length;s++)for(var c=i[s],d=data.getSectionVariationIds(c),l=0;l<d.length;l++){var u=d[l];u===r[s]&&o.push(l)}if(o!==[])return o}return-1},data.getVariationName=function(e,t){t=t||", ";var i=data.getVariationNamesArray(e);return i.join(t)},data.getVariationNamesArray=function(e){var t=[],i=e.split(VARIATION_ID_DELIMITER);return each(i,function(e){t.push(data.getVariationProperty(e,"name")||"Var "+e)}),t},data.getVariationSectionId=function(e){var t={};return each(data.getSectionIds(),function(e){each(data.getSectionVariationIds(e),function(i){t[i]=e})}),data.getVariationSectionId=function(e){var i=e.split(VARIATION_ID_DELIMITER);return t[i[0]]||""},data.getVariationSectionId.call(null,e)},data.getVersion=function(){return data.getProperty("version")},data.getWebHost=function(){return data.getProperty("www_host")},data.isProductionHost=function(){return/\.optimizely\.(?!test)[^.]+$/.test(data.getWebHost())},data.isExperimentEnabled=function(e){return!!data.getExperimentProperty(e,"enabled")},data.isChartbeatEnabled=function(e){return!!data.getChartbeatProperty(e)},data.isClickTaleEnabled=function(e){return!!data.getClickTaleProperty(e)},data.isComscoreEnabled=function(e){return!!data.getComscoreProperty(e,"url")},data.isCrazyEggEnabled=function(e){return!!data.getCrazyEggProperty(e)},data.isForceVariationEnabled=function(){return!!data.getProperty("force_variation")},data.isGeotargetingEnabled=function(e){return!!data.getGeotargetingProperty(e)},data.isGoogleAnalyticsEnabled=function(e){return!!data.getGoogleAnalyticsProperty(e)},data.isUniversalAnalyticsEnabled=function(e){return!!data.getUniversalAnalyticsProperty(e,"slot")},data.isInstallationVerified=function(){return!!data.getProperty("installation_verified")},data.isInspectletEnabled=function(e){return!!data.getInspectletProperty(e)},data.isKissMetricsEnabled=function(){return!!data.getProperty("kissmetrics")},data.isListTargetingEnabled=function(){return!!data.getProperty("uses_list_targeting")},data.isMixpanelEnabled=function(e){return!!data.getMixpanelProperty(e)},data.isMoatEnabled=function(e){return!!data.getMoatProperty(e)},data.isSessioncamEnabled=function(e){return!!data.getSessioncamProperty(e)},data.isATInternetEnabled=function(e){return!!data.getExperimentProperty(e,"at_internet")},data.isRemotePublicSuffixEnabled=function(){return!!data.getProperty("remote_public_suffix")},data.isSimpleCookiesEnabled=function(){return!!data.getProperty("simple_cookies")},data.isStagingLogEnabled=function(){return!!data.getProperty("use_staging_log")},data.isDynamicCustomerProfileTargetingEnabled=function(){return!!data.getProperty("uses_dynamic_customer_profile_targeting")},data.getExperimentProperty=function(e,t){return data.getProperty("experiments",e,t)},data.getChartbeatProperty=function(e){return data.getExperimentProperty(e,"chartbeat")},data.getRedirectTimeout=function(){return data.getProperty("redirect_timeout")||REDIRECT_COOKIE_SECONDS},data.getClickTaleProperty=function(e){return data.getExperimentProperty(e,"clicktale")},data.getComscoreProperty=function(e,t){var i=data.getExperimentProperty(e,"comscore");return isDefined(i)?i[t]:null},data.getCrazyEggProperty=function(e){return data.getExperimentProperty(e,"crazyegg")},data.getGeotargetingProperty=function(e){var t="uses_geotargeting";return data.getExperimentProperty(e,t)||data.getSegmentProperty(e,t)},data.getGoogleAnalyticsProperty=function(e){return data.getExperimentProperty(e,"google_analytics")},data.getUniversalAnalyticsProperty=function(e,t){var i=data.getExperimentProperty(e,"universal_analytics");return isDefined(i)?i[t]:null},data.getInspectletProperty=function(e){return data.getExperimentProperty(e,"inspectlet")},data.getMixpanelProperty=function(e){return data.getExperimentProperty(e,"mixpanel")},data.getMoatProperty=function(e){return data.getExperimentProperty(e,"moat")},data.getSessioncamProperty=function(e){return data.getExperimentProperty(e,"sessioncam")},data.getProperty=function(e){var t=DATA,i=each(arguments,function(e){var i=t[e];return isDefined(i)?void(t=i):null});if(null!==i)return t},data.getSectionProperty=function(e,t){return data.getProperty("sections",e,t)},data.getSegmentProperty=function(e,t){return data.getProperty("segments",e,t)},data.getUrlRoot=function(e,t){var i=data.getProperty(e);return t&&(i=t.toString()+"."+i),"https://"+i},data.getVariationProperty=function(e,t){return data.getProperty("variations",e,t)},data.rumSamplingRate=function(){var e=data.getProperty("rum_sampling_rate");return isDefined(e)?e:.003},data.isBehaviorEnabled=function(){return!!data.getProperty("is_behavior_enabled")},data.hasSlave=function(){return!!data.getProperty("slave")},data.clickGoalsWithSeparatedSelectors=null,data.cachedEnabledExperimentIds=null,data.cachedVariationExperimentIds=null,cookie.delimiterPattern=/\s*;\s*/,cookie.valuePattern=/^([^=]+)=?(.*)$/,cookie.get=function(e){var t=[];return each(cookie.getAll(),function(i){e===i.name&&t.push(safeDecodeUriComponent(i.value))}),0===t.length?null:(t.length>1&&log("Cookie","Values found for %s: %s",e,t.length),t.pop())},cookie.initialized=!1,cookie.initialize=function(){if(cookie.initialized)return void log("Cookie","Already initialized.");log("Cookie","Initializing.");var e=document.location.hostname;data.isSimpleCookiesEnabled()?(cookie.highestLevelDomain=e,cookie.possibleDomains=cookie.findPossibleDomains(),cookie.possibleDomains.length>0?(cookie.highestLevelDomain=cookie.possibleDomains[0],log("Cookie","Highest level domain: %s",cookie.highestLevelDomain)):(log("Cookie","Disabling event tracking because cookies could not be set"),directive.shouldTrackEvents=!1)):(cookie.guessedPublicSuffix=cookie.guessPublicSuffix(e),log("Cookie","Guessed public suffix: %s",cookie.guessedPublicSuffix),cookie.publicSuffix=data.getPublicSuffix(e),log("Cookie","Public suffix (from data): %s",cookie.publicSuffix)),cookie.apiPublicSuffix&&log("Cookie","Domain specified by API: %s",cookie.apiPublicSuffix),cookie.initialized=!0,log("Cookie","Done initializing.")},cookie.remove=function(e){cookie.deleteFromDomain(e,cookie.getCurrentSuffix())},cookie.getAll=function(e){var t=[];return e=e||"",each((document.cookie||"").split(cookie.delimiterPattern),function(i){var a=i.match(cookie.valuePattern);a&&0===a[1].indexOf(e)&&t.push({name:a[1],value:a[2],raw:i})}),t},cookie.set=function(e,t,i){if(cookie.initialize(),t=t||"",data.isSimpleCookiesEnabled())return void cookie.setUsingSimpleLogic(e,t,i);var a=cookie.getCurrentSuffix(),n=document.location.hostname;!cookie.publicSuffix&&data.isRemotePublicSuffixEnabled()&&cookie.queue.push({age:i,name:e,value:t}),a&&a===cookie.publicSuffix&&a!==cookie.guessedPublicSuffix&&(cookie.deleteFromDomain(e,n),cookie.deleteFromDomain(e,cookie.guessedPublicSuffix)),cookie.setOnDomain(e,t,a,i);var r=cookie.get(e);r===t?log("Cookie","Successfully set %s=%s on %s",e,t,a):(log("Cookie","Setting %s on %s apparently failed (%s != %s)",e,a,r,t),log("Cookie","Setting %s on %s",e,n),cookie.setOnDomain(e,t,n,i),r=cookie.get(e),r===t?(log("Cookie","Setting %s on %s worked; saving as new public suffix",e,n),cookie.guessedPublicSuffix=n):(log("Cookie","Could not set cookie %s, disabling event tracking.",e),directive.shouldTrackEvents=!1))},cookie.deleteFromDomain=function(e,t){var i=[e,"=","; ",cookie.formatDomainString(t),"; path=/","; expires=",new Date(0).toUTCString()];document.cookie=i.join("")},cookie.findPossibleDomains=function(){for(var e=document.location.hostname.split("."),t=[],i=e.length-1;i>=0;--i){var a=e.slice(i).join("."),n=DOMAIN_TEST_COOKIE_NAME_PREFIX+generateRandomHexString(),r=generateRandomHexString();cookie.setOnDomain(n,r,a,DOMAIN_TEST_COOKIE_EXPIRATION);var o=cookie.get(n);o===r&&t.push(a)}return t},cookie.getCurrentSuffix=function(){return data.isSimpleCookiesEnabled()?cookie.apiPublicSuffix||cookie.highestLevelDomain:cookie.apiPublicSuffix||cookie.publicSuffix||cookie.guessedPublicSuffix},cookie.formatDomainString=function(e){var t=[];return t.push("domain="),"localhost"!==e&&(t.push("."),t.push(e)),t.join("")},cookie.guessPublicSuffix=function(e){var t=e.split("."),i=e,a=t[t.length-1];return t.length>2&&"appspot"===t[t.length-2]&&"com"===a?i=t[t.length-3]+".appspot.com":t.length>1&&inArray(a,TOP_LEVEL_DOMAINS)&&(i=t[t.length-2]+"."+a),i},cookie.setOnDomain=function(e,t,i,a){var n=[e,"=",encodeURIComponent(t),"; ",cookie.formatDomainString(i),"; path=/"];if(a){var r=new Date(+new Date+1e3*a);n.push("; expires=",r.toUTCString())}document.cookie=n.join("")},cookie.setUsingSimpleLogic=function(e,t,i){each(cookie.possibleDomains,function(t){cookie.deleteFromDomain(e,t)});var a=cookie.getCurrentSuffix();cookie.setOnDomain(e,t,a,i);var n=cookie.get(e),r=n===t?"Succeeded":"Failed";log("Cookie","%s setting %s=%s on %s",r,e,t,a)},cookie.setApiPublicSuffix=function(e){var t=cookie.getCurrentSuffix();t!==e&&(cookie.apiPublicSuffix=String(e)||"",log("Cookie","Api public suffix set to: %s",cookie.apiPublicSuffix))},cookie.guessedPublicSuffix="",cookie.apiPublicSuffix="",cookie.highestLevelDomain="",cookie.possibleDomains=[],cookie.publicSuffix="",cookie.queue=[];var AUDIENCE_COOKIE_NAME="optimizelyAudiences",DAY_IN_SECONDS=86400,DEFAULT_TRACKING_COOKIE_EXPIRATION=31536e4,MINIMUM_TRACKING_COOKIE_EXPIRATION=7776e3,BEHAVIOR_EVENT_HASH_SEED=2716770798,BUCKET_COOKIE_NAME="optimizelyBuckets",CUSTOM_EVENTS_COOKIE_NAME="optimizelyCustomEvents",CUSTOM_EVENTS_STORAGE_NAME="customEvents",DOMAIN_TEST_COOKIE_EXPIRATION=3,DOMAIN_TEST_COOKIE_NAME_PREFIX="optimizelyDomainTest-",EVALUATION_WAIT_INTERVAL=50,FIRST_EVALUATION_WAIT_INTERVAL=10,GLOBAL="optimizely",GLOBAL_DATA="data",GEO_CONDITION_WAIT_INTERVAL=1e3,GEO_TIMEOUT=2e3,IGNORED_VARIATION_ID="0",OPT_OUT_COOKIE_NAME="optimizelyOptOut",PENDING_LOG_EVENTS_COOKIE_AGE=15,PENDING_LOG_EVENTS_COOKIE_MAX_LENGTH=1536,PENDING_LOG_EVENTS_COOKIE_NAME="optimizelyPendingLogEvents",PREVIEW_COOKIE_NAME="optimizelyPreview",REDIRECT_COOKIE_FALSE="false",REDIRECT_COOKIE_SECONDS=5,REDIRECT_COOKIE_TRUE="true",REDIRECT_COOKIE_NAME="optimizelyRedirect",REFERRAL_CHARTBEAT_COOKIE_NAME="optimizelyChartbeat",REFERRER_REDIRECT_COOKIE_NAME="optimizelyReferrer",SEGMENTS_COOKIE_NAME="optimizelySegments",SELECTOR_DELIMITER=",",SOURCE_COOKIE_AGE=3,SOURCE_COOKIE_DELIMITER="|||",SOURCE_COOKIE_NAME="sourceCookie",TEST_MODULE=window.OPTIMIZELY_TEST_MODULE,TOKEN_COOKIE_KEEP_ALIVE=15,TOKEN_COOKIE_NAME="optimizelyToken",TOP_LEVEL_DOMAINS=["com","local","net","org","xxx","edu","es","gov","biz","info","fr","nl","ca","de","kr","it","me","ly","tv","mx","cn","jp","il","in","iq","test"],USER_ID_COOKIE_NAME="optimizelyEndUserId",PPID_COOKIE_NAME="optimizelyPPID",VARIATION_CODE_DELIMITER="\n",VARIATION_ID_DELIMITER="_",VARIATION_URL_DELIMITER=" ",VARIATION_URL_START="_optimizely_variation_url",VARIATION_URL_START_RE=/\/\*\s*_optimizely_variation_url( +include="([^"]*)")?( +exclude="([^"]*)")?( +match_type="([^"]*)")?( +include_match_types="([^"]*)")?( +exclude_match_types="([^"]*)")?( +id="([^"]*)")?\s*\*\//,VARIATION_URL_END="/* _optimizely_variation_url_end */",VARIATION_URL_END_RE=/\/\*\s*_optimizely_variation_url_end\s*\*\//,SIGNED_IN_BODY_CLASS="signed-in",HOTFIX_ENG_1636_COOKIE="optimizelyReportableFix";directive.delayPageviewTracking=0,directive.forceTracking=!1,directive.isSomeClientEnabled=function(){return directive.isEnabled||directive.isNewClientEnabled},directive.isEnabled=!0,directive.isNewClientEnabled=!0,directive.isEditor=!1,directive.isPersonalizationEditor=!1,directive.isDesktopAppEditor=!1,directive.optOutThirdPartyCookies=!1,directive.previewScriptName="",directive.previewVerified=!1,directive.requestedInvalidForceParameters=!1,directive.shouldLoadPreview=!1,directive.shouldLog=!1,directive.shouldLogVerbosely=!1,directive.shouldOverrideThirdPartyCookie=!1,directive.shouldSkipPageTracking=!1,directive.shouldTrackEvents=!0,directive.trackingCookieExpiration=DEFAULT_TRACKING_COOKIE_EXPIRATION,id.getId=function(){return cookie.get(USER_ID_COOKIE_NAME)},id.getOrGenerateId=function(){var e=cookie.get(USER_ID_COOKIE_NAME);return e||(e="oeu"+ +new Date+"r"+Math.random(),cookie.set(USER_ID_COOKIE_NAME,e,directive.trackingCookieExpiration)),e},id.getPPID=function(){return data.getLegacyUUID()?cookie.get(PPID_COOKIE_NAME):(id.unsetPPID(),null)},id.setPPID=function(e){data.getLegacyUUID()&&cookie.set(PPID_COOKIE_NAME,e,directive.trackingCookieExpiration)},id.unsetPPID=function(){cookie.remove(PPID_COOKIE_NAME)},id.hasPPID=function(){return null!==id.getPPID()};var every=function(e,t){var i=!0;return each(e,function(e){if(!t(e))return i=!1}),i},any=function(e,t){var i=!1;return each(e,function(e){if(t(e))return i=!0}),i},keys=function(e){return keys=Object.keys||function(e){var t=[];return each(e,function(e){t.push(e)}),t},keys.call(null,e)},loadScript=function(scriptUrl,attemptSynchronousLoad){var loadScriptAsynchronously=function(){var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("script");t.src=scriptUrl,t.type="text/javascript",e.appendChild(t)};if(attemptSynchronousLoad)try{if(!safeToAttemptDocumentWrite())throw new Error(goog.DEBUG&&"Not safe to attempt document.write");var id="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(scriptUrl.indexOf('"')!==-1)return void timer.addEvent("loadScript","Blocked attempt to load unsafe script: "+scriptUrl);if(document.write('<script id="'+id+'" src="'+scriptUrl+'"></script>'),1!==$("#"+id).length)throw new Error(goog.DEBUG&&"Document.write failed to append script")}catch(e){try{var request=new XMLHttpRequest;request.open("GET",scriptUrl,!1),request.onload=function(){eval(request.responseText)},request.onerror=function(){throw new Error},request.send()}catch(err){log("Common","Failed to load %s synchronously",scriptUrl),loadScriptAsynchronously()}}else loadScriptAsynchronously()},log=function(e,t,i){var a=window.console;if(directive.shouldLog&&a&&a.log){var n=slice(arguments,1);n[0]="Optimizely / "+e+" / "+t,Function.prototype.apply.call(a.log,a,n)}};optly.client.storage.StorageMetrics,optly.client.storage.Storage=function(e){this.storage=e,this.metrics_={totalGets:0,totalGetLength:0,totalGetTime:0,totalSets:0,totalSetLength:0,totalSetTime:0,numKeys:0,totalSize:0}},optly.client.storage.Storage.prototype.getKeyPath=function(e){return[optly.client.storage.LOCAL_STORAGE_KEY,e].join("$$")},optly.client.storage.Storage.prototype.get=function(e){try{var t=+new Date,i=this.storage.getItem(this.getKeyPath(e)),a=json.parse(i);return this.metrics_.totalGetTime+=+new Date-t,this.metrics_.totalGets++,this.metrics_.totalGetLength+=(i||"").length,a}catch(n){return null}},optly.client.storage.Storage.prototype.set=function(e,t){try{var i=+new Date,a=json.stringify(t);isDefined(t)?this.storage.setItem(this.getKeyPath(e),a):this.storage.removeItem(this.getKeyPath(e)),this.metrics_.totalSetTime+=+new Date-i,this.metrics_.totalSets++,this.metrics_.totalSetLength+=a.length}catch(n){}},optly.client.storage.Storage.prototype.metrics=function(){var e=0,t=0;for(var i in this.storage)if(beginsWith(i,optly.client.storage.LOCAL_STORAGE_KEY)){t++;var a=this.storage.getItem(i);e+=i.length+(a?a.length:0)}return this.metrics_.numKeys=t,this.metrics_.totalSize=e,this.metrics_},optly.client.storage.Storage.prototype.migrateIfNecessary=function(){var e=this.storage.getItem(optly.client.storage.LOCAL_STORAGE_KEY),t={};try{t=json.parse(e)||{}}catch(i){}if(0!==keys(t).length){var a=id.getPPID()||id.getId(),n=t[a]||{};for(var r in n)if(n.hasOwnProperty(r)){var o=[a,r].join("$$");null===this.get(o)&&this.set(o,n[r])}delete t[a];for(r in t)t.hasOwnProperty(r)&&(null===this.get(r)&&this.set(r,t[r]),delete t[r]);try{e=json.stringify(t)}catch(i){e={}}this.storage.setItem(optly.client.storage.LOCAL_STORAGE_KEY,e)}},optly.client.storage.initialize=function(){try{optly.client.storage.localStorage=new optly.client.storage.Storage(window.localStorage),optly.client.storage.sessionStorage=new optly.client.storage.Storage(window.sessionStorage),optly.client.storage.localStorage.migrateIfNecessary()}catch(e){}},optly.client.storage.MockStorageInterface={get:function(e){},set:function(e,t){},metrics:function(){return{}}},optly.client.storage.LOCAL_STORAGE_KEY="optimizely_data",optly.client.storage.localStorage=optly.client.storage.MockStorageInterface,optly.client.storage.sessionStorage=optly.client.storage.MockStorageInterface,optly.client.storage.initialize(),optly.murmur3.hash32=function(e,t){function i(e,t){var i=65535&t,a=t-i;return(a*e|0)+(i*e|0)|0}t=t||0;for(var a,n=3432918353,r=461845907,o=e.length,s=t,c=o&-4,d=0;d<c;d+=4)a=255&e.charCodeAt(d)|(255&e.charCodeAt(d+1))<<8|(255&e.charCodeAt(d+2))<<16|(255&e.charCodeAt(d+3))<<24,a=i(a,n),a=(131071&a)<<15|a>>>17,a=i(a,r),s^=a,s=(524287&s)<<13|s>>>19,s=5*s+3864292196|0;switch(a=0,o%4){case 3:a=(255&e.charCodeAt(c+2))<<16;case 2:a|=(255&e.charCodeAt(c+1))<<8;case 1:a|=255&e.charCodeAt(c),a=i(a,n),a=(131071&a)<<15|a>>>17,a=i(a,r),s^=a}return s^=o,s^=s>>>16,s=i(s,2246822507),s^=s>>>13,s=i(s,3266489909),s^=s>>>16},optly.hashing.HashSeed={IGNORING:0,BUCKETING:1,FALLBACK:2},optly.hashing.MAX_HASH_VALUE=Math.pow(2,32),optly.hashing.hashToReal=function(e,t){var i=optly.murmur3.hash32(e,t);return(i>>>0)/optly.hashing.MAX_HASH_VALUE},optly.hashing.hashToHex=function(e,t){var i=optly.murmur3.hash32(e,t);return(i>>>16).toString(16)+(65535&i).toString(16)},optly.hashing.toByteString=function(e){var t=String.fromCharCode;return e.replace(/[\S\s]/gi,function(e){e=e.charCodeAt(0);var i=t(255&e);return e>255&&(i=t(e>>>8&255)+i),e>65535&&(i=t(e>>>16)+i),i})},optly.hashing.experimentUserHash=function(e,t,i){return optly.hashing.hashToReal(e+t,i)},optly.hashing.hashToInt=function(e,t,i,a){return Math.floor(optly.hashing.experimentUserHash(e,t,i)*a)},user.LEGACY_BROWSER=!0,
user.getBrowser=function(){return user.detectionResults=user.detectionResults||detect.detect(),user.detectionResults},user.getBrowserId=function(){return user.getBrowser().browserId},user.getBrowserLanguage=function(){var e="";try{e=navigator.userLanguage||window.navigator.language,e=e.toLowerCase()}catch(t){e=""}return e},user.getBrowserVersion=function(){return user.getBrowser().browserVersion},user.getCurrentUrl=function(){return user.currentUrl||window.location.href},user.getDevice=function(){return user.getBrowser().device},user.getDeviceId=function(){return user.getDevice().id},user.getDomain=function(e){if(!e)return"";try{return e.match(/:\/\/(?:www[0-9]?\.)?(.[^/:]+)/)[1]}catch(t){return""}},user.getPlatform=function(){return user.getBrowser().platform},user.getReferrer=function(){var e=cookie.get(REFERRER_REDIRECT_COOKIE_NAME);return e||document.referrer||""},user.getKeyPath=function(e){var t=id.getPPID()||id.getOrGenerateId();return[t,e].join("$$")},user.getUserData=function(e){return optly.client.storage.localStorage.get(user.getKeyPath(e))},user.setUserData=function(e,t){optly.client.storage.localStorage.set(user.getKeyPath(e),t)},user.getMobileId=user.LEGACY_BROWSER?function(){var e=["android","blackberry","ipad","iphone","ipod","windows phone"];return arrayContains(e,user.getDeviceId())?user.getDeviceId():arrayContains(e,user.getPlatform().id)?user.getPlatform().id:user.isMobile()?"mobile":"unknown"}:goog.nullFunction,user.isMobile=function(){return user.getDevice().isMobile},user.getNewVsReturning=function(){return user.isReturningUser?"returning":"new"},user.isFirstSession=function(){return!user.isReturningUser||!!optly.client.storage.sessionStorage.get(user.FIRST_SESSION_KEY)},user.getPlatform=function(){return user.getBrowser().platform},user.isBot=function(e){var t=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot"],i=e||navigator.userAgent;i=i.toLowerCase();for(var a=0;a<t.length;a++){var n=t[a];if(i.indexOf(n)!==-1)return!0}return!1},user.initialize=function(){if(directive.isEnabled){var e=id.getId();user.isReturningUser=void 0!==e&&null!==e,user.isBot()?directive.shouldTrackEvents=!1:user.isReturningUser||optly.client.storage.sessionStorage.set(user.FIRST_SESSION_KEY,!0)}},user.setCurrentUrl=function(e){log("User","Setting current URL to %s",e),user.currentUrl=e},user.FIRST_SESSION_KEY="first_session",user.currentUrl=void 0,user.detectionResults=void 0,user.isReturningUser=void 0,timer.addEvent=function(e,t,i){timer.eventQueue.push({date:new Date,category:e,message:t,isVerbose:i||!1}),timer.shouldOutputImmediately&&timer.flushLogs()},timer.enableLogging=function(){directive.shouldLog=!0},timer.enableVerboseLogging=function(){directive.shouldLog=!0,directive.shouldLogVerbosely=!0},timer.flushLogs=function(){directive.shouldLog&&(each(timer.eventQueue,function(e){if(!(e.logged||e.isVerbose&&e.isVerbose!==directive.shouldLogVerbosely)){var t=+e.date,i=timer.lastTime?t-timer.lastTime:0,a=timer.startTime?t-timer.startTime:0,n=" [time "+a+" +"+i+"]";log(e.category,e.message+n),timer.lastTime=t,timer.startTime||(timer.startTime=t),e.logged=!0}}),timer.shouldOutputImmediately=!0)},timer.lastTime=null,timer.startTime=null,timer.eventQueue=[],timer.shouldOutputImmediately=!1,asyncInfo.AsyncInfo,asyncInfo.STORAGE_KEY="asyncInfo",asyncInfo.Source={AKAMAI:"cdn3",ODDS:"odds",DCPS:"dcps"},asyncInfo.asyncInfos={},asyncInfo.get=function(e){return asyncInfo.asyncInfos[e]||null},asyncInfo.set=function(e,t){asyncInfo.asyncInfos[e]=t},asyncInfo.maybeMigrateAndCleanupStore=function(){var e=optly.client.storage.localStorage.get(asyncInfo.STORAGE_KEY);if(e){var t=user.getUserData(asyncInfo.STORAGE_KEY);t||user.setUserData(asyncInfo.STORAGE_KEY,e),optly.client.storage.localStorage.set(asyncInfo.STORAGE_KEY,null)}},asyncInfo.loadFromStore=function(){asyncInfo.maybeMigrateAndCleanupStore();var e=user.getUserData(asyncInfo.STORAGE_KEY);e&&each(e,asyncInfo.set)},asyncInfo.writeAroundToStore=function(e,t){var i=user.getUserData(asyncInfo.STORAGE_KEY)||{};i[e]=t,user.setUserData(asyncInfo.STORAGE_KEY,i)},asyncInfo.getIP=function(){var e=asyncInfo.get(asyncInfo.Source.ODDS)&&asyncInfo.get(asyncInfo.Source.ODDS).ip||asyncInfo.get(asyncInfo.Source.AKAMAI)&&asyncInfo.get(asyncInfo.Source.AKAMAI).ip;return e?asyncInfo.formatGeoField(e):null},asyncInfo.getLists=function(){return asyncInfo.get(asyncInfo.Source.ODDS)?asyncInfo.get(asyncInfo.Source.ODDS).lists||{}:null},asyncInfo.getListsMetadata=function(){return asyncInfo.get(asyncInfo.Source.ODDS)?asyncInfo.get(asyncInfo.Source.ODDS).lists_metadata||{}:null},asyncInfo.getValueForListTargetedKeyWhenCachePopulated=function(e){if(!asyncInfo.getLists())return timer.addEvent("Async Info","Invalid response from ODDS"),{value:void 0,isKnown:!1};if(!asyncInfo.getLists().hasOwnProperty(e))return timer.addEvent("Async Info","Deduced cachetime value that was checked for presence in list: "+e),{value:void 0,isKnown:!0};var t=asyncInfo.getListsMetadata();return t&&t[e]&&t[e][0]?(timer.addEvent("Async Info","Found cachetime value that was checked for presence in list: "+e),{value:t[e][0].value,isKnown:!0}):(timer.addEvent("Async Info","Can't find cachetime value that was checked for presence in list: "+e),{value:void 0,isKnown:!1})},asyncInfo.getListMembershipStatus=function(e){var t=data.getListTargetedKey(e),i=isDefined(t)&&asyncRequest.isListTargetedKeyWithVariableValue(t);if(i){var a=asyncRequest.getCurrentValueForListTargetedKey(t);if(null===a)return timer.addEvent("Async Info","Deduced membership status (false) for list: "+e),!1;timer.addEvent("Async Info","Found current value to check for presence in list: "+e)}var n=asyncInfo.getLists();if(!n)return timer.addEvent("Async Info","No list membership info."),null;if(i){var r=asyncInfo.getValueForListTargetedKeyWhenCachePopulated(e);if(r.isKnown&&r.value!==a)return timer.addEvent("Async Info","Ignoring out-of-date membership status for list: "+e),null}var o=!!n[e];return timer.addEvent("Async Info","Found membership status ("+o+") for list: "+e),o},asyncInfo.getListMembershipStatuses=function(){var e={};return each(data.getListTargetedKeys(),function(t){e[t]=asyncInfo.getListMembershipStatus(t)}),e},asyncInfo.getLocation=function(){if(!asyncInfo.get(asyncInfo.Source.AKAMAI))return null;var e=asyncInfo.get(asyncInfo.Source.AKAMAI).location||{};return{continent:asyncInfo.formatGeoField(e.continent),country:asyncInfo.formatGeoField(e.country),region:asyncInfo.formatGeoField(e.region),city:asyncInfo.formatGeoField(e.city)}},asyncInfo.cache,asyncInfo.dcpCache={get:function(){return asyncInfo.get(asyncInfo.Source.DCPS)},set:function(e){asyncInfo.writeAroundToStore(asyncInfo.Source.DCPS,e),asyncInfo.set(asyncInfo.Source.DCPS,e)}},asyncInfo.getDynamicCustomerProfileConditions=function(){var e=asyncInfo.dcpCache.get();return e?null===e.rulesResults?null:e.rulesResults||{}:null},asyncInfo.formatGeoField=function(e){return"string"!=typeof e?null:"N/A"===e.toUpperCase()?null:e.toUpperCase()};var ENABLED_UNIVERSAL_ANALYTICS=!0,ENABLED_AT_INTERNET=!0,ENABLED_COMSCORE=!0,ENABLED_MOAT=!0,ENABLED_INSPECTLET=!0,UA_EXPERIMENT_MAX_CHARACTERS=80,UA_DIMENSION_MAX_CHARACTERS=150,INTERNAL_LIST_NAME_PREFIX="_",INTERNAL_LIST_NAME_PART_DELIMITER="__";integrator.activateSiteCatalyst=function(e){if(e=e||{},directive.shouldTrackEvents){e&&e.sVariable&&integrator.setSiteCatalystSVar(e.sVariable);var t=integrator.getSiteCatalystSVar();if(!t)return void timer.addEvent("Integrator","Error with SiteCatalyst integration: 's' variable not defined");if(!integrator.hasIntegratedThirdParties)return void(integrator.alsoActivateSiteCatalyst=!0);integrator.fixSiteCatalystReferrer(t),log("Integrator","Tracking with SiteCatalyst"),each(integrator.getRelevantVariationIds(),function(e){var i=data.getVariationExperimentId(e),a=integrator.makeSendableNames(i,e,100,100,25,!0),n=a.key+": "+a.value;each(integrator.getSiteCatalystKeys(i),function(e){log("Integrator","Setting SiteCatalyst %s='%s'",e,n),t[e]=n})})}},integrator.googleAnalyticsCustomVariableScope=function(e){return e=isNumberLike(e)?Number(e):-1,[1,2,3].indexOf(e)===-1?integrator._googleAnalyticsCustomVariableScope:void(integrator._googleAnalyticsCustomVariableScope=e)},integrator.loadThirdPartySegments=function(e){timer.addEvent("Integrator","Loading third-party segments."),window.bk_results&&integrator.loadBlueKaiSegments(window.bk_results,e)},integrator.makeThirdPartyRequests=function(){if(directive.shouldTrackEvents){integrator.fixGoogleAnalyticsReferrer();var e=[];each(integrator.getRelevantVariationIds(),function(t){var i=data.getVariationExperimentId(t);data.isChartbeatEnabled(i)&&integrator.makeChartbeatRequest(i,t),data.isComscoreEnabled(i)&&integrator.makeComscoreRequest(i,t),data.isCrazyEggEnabled(i)&&integrator.makeCrazyEggRequest(i,t),data.isGoogleAnalyticsEnabled(i)&&integrator.makeGoogleAnalyticsRequest(i,t),data.isInspectletEnabled(i)&&integrator.makeInspectletRequest(i,t),data.isKissMetricsEnabled()&&integrator.makeKissMetricsRequest(i,t),data.isMixpanelEnabled(i)&&integrator.makeMixpanelRequest(i,t),data.isMoatEnabled(i)&&integrator.makeMoatRequest(i,t),data.isSessioncamEnabled(i)&&(e=e.concat(integrator.createSessioncamData(i,t))),data.isATInternetEnabled(i)&&integrator.queueATInternetRequest(i,t)}),e.length>0&&integrator.makeSessioncamRequest(e),keys(integrator.ATInternetExperimentValues).length>0&&("function"==typeof window.xt_mvt?integrator.ATInternetOnloadHandler():$(window).bind("load.ATInternet",integrator.ATInternetOnloadHandler)),integrator.makeChartbeatReferralRequest(),integrator.hasIntegratedThirdParties=!0,integrator.alsoActivateUniversalAnalytics&&(integrator.activateUniversalAnalytics(),integrator.alsoActivateUniversalAnalytics=!1),integrator.alsoActivateSiteCatalyst&&(integrator.activateSiteCatalyst(),integrator.alsoActivateSiteCatalyst=!1)}},integrator.playbackClickTale=function(){if(window.ClickTaleContext){try{window.ClickTaleContext.getAggregationContextAsync("1",function(e){e.Location&&window.optimizely.push(["overrideUrl",e.Location]);for(var t in e.PageEvents){var i=e.PageEvents[t][2].match(/x[0-9]+=[0-9_]+/g);log("Integrator","Playback ClickTale Integration - %s",i);for(var t=0;t<i.length;t++){log("Integrator","Playback ClickTale Integration - %s",i[t]);for(var a=i[t].split("=")[0].substr(1),n=i[t].split("=")[1].split("_"),r=0;r<n.length;r++)integrator.getRedirectURL(n[r])?log("Integrator","Skip activation for redirect."):window.optimizely.push(["activate",a,n[r],{force:!0}])}}})}catch(e){log("Integrator","Playback ClickTale Aggregation Integration failed.")}try{window.ClickTaleContext.getRecordingContextAsync("1.1",function(e){if(e.inSingleRecordingScope){e.location&&window.optimizely.push(["overrideUrl",e.location]),log("Integrator","Playback ClickTale getRecordingContextAsync callback");for(var t in e.fields)log("Integrator","Playback ClickTale Integration - %s=%s",t,e.fields[t]),integrator.getRedirectURL(e.fields[t])?log("Integrator","Skip activation for redirect."):window.optimizely.push(["activate",t,e.fields[t],{force:!0}])}})}catch(e){log("Integrator","Playback ClickTale Recording Integration failed.")}}else log("Integrator","ClickTaleContext not defined.")},integrator.recordClickTale=function(e){log("Integrator","Tracking with ClickTale."),"function"==typeof window.ClickTaleField?each(integrator.getRelevantVariationIds(),function(e){var t=data.getVariationExperimentId(e),i=integrator.makeSendableNames(t,e,100,100,15,!1),a=i.key+": "+i.value+" (x"+t+"="+e+")";log("Integrator","Setting ClickTale - %s",a),window.ClickTaleField(t,e),window.ClickTaleEvent(a)}):log("Integrator","ClickTaleField() not defined.")},integrator.setPrefix=function(e){integrator.prefix=e},integrator.setSiteCatalystSVar=function(e){integrator.siteCatalystObject=e},integrator.cleanSegmentString=function(e,t){return e.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_").substring(0,t)},integrator.fixGoogleAnalyticsReferrer=function(){var e=redirect.getRedirectReferrer();if(null!==e)try{log("Integrator","Fixing _gaq._setReferrerOverride with %s",e),_gaq.push(["_setReferrerOverride",e])}catch(t){log("Integrator","Error setting Google Analytics referrer: %s",t)}},integrator.fixUniversalAnalyticsReferrer=ENABLED_UNIVERSAL_ANALYTICS?function(){var e=redirect.getRedirectReferrer();if(null!==e)try{log("Integrator","Fixing Universal Analytics set referrer with %s",e);var t=window.GoogleAnalyticsObject||"ga",i=window[t];i("set","referrer",e)}catch(a){log("Integrator","Error setting Universal Analytics referrer: %s",a)}}:goog.nullFunction,integrator.fixSiteCatalystReferrer=function(e){var t=redirect.getRedirectReferrer();if(null!==t&&e)try{log("Integrator","Fixing SiteCatalyst referrer to %s",t),e.referrer=String(t)}catch(i){log("Integrator","Error setting SiteCatalyst referrer: %s",i)}},integrator.getRelevantVariationIds=function(){var e=evaluator.getActiveExperimentIds(),t=[];each(plan.getVariationIds(),function(i){var a=data.getVariationExperimentId(i),n=!1;if(data.isExperimentEnabled(a)){var r=data.getVariationName(i);arrayContains(e,a)&&(log("Integrator",'"%s" relevant because experiment active',r),n=!0),n&&t.push(i)}});var i=redirect.getRedirectVariationId();return i&&t.push(i),t},integrator.getSiteCatalystKeys=function(e){var t=[],i=data.getSiteCatalystEVar(e),a=data.getSiteCatalystProp(e);return null!==i&&t.push("eVar"+i),null!==a&&t.push("prop"+a),t},integrator.getSiteCatalystSVar=function(){return integrator.siteCatalystObject||("undefined"!=typeof window.s?window.s:null)},integrator.getRedirectURL=function(e){var t=data.getVariationCode(e);if(t){var i=redirect.getRedirectURL(t.toString());if(i)return i[1]}return null},integrator.loadBlueKaiSegments=function(e,t){timer.addEvent("Integrator","Loading BlueKai segments.");try{each(e.campaigns,function(e){var i=e.seg_id;data.getSegment(i)?segmenter.addToSegment(i,!0):data.getAudience(i)&&t.addToAudience(i)})}catch(i){timer.addEvent("Integrator","Error loading BlueKai segments.")}},integrator.makeChartbeatReferralRequest=function(){var e=cookie.get(REFERRAL_CHARTBEAT_COOKIE_NAME)||"";try{e&&integrator.currentChartbeatExperiment!=e&&(log("Integrator","Calling _cbq.push for referral"),_cbq.push(["_optlyr",e])),integrator.currentChartbeatExperiment!=e&&(log("Integrator","Set new Chartbeat referral cookie."),cookie.set(REFERRAL_CHARTBEAT_COOKIE_NAME,integrator.currentChartbeatExperiment))}catch(t){timer.addEvent("Integrator","Error sending Chartbeat referral for "+e)}},integrator.makeChartbeatRequest=function(e,t){var i=integrator.prefix;integrator.setPrefix("");var a=integrator.makeSendableNames(e,t,10,10,5,!1);integrator.setPrefix(i);var n=data.getVariationIndex(t);integrator.currentChartbeatExperiment=a.key+": "+String(n);try{log("Integrator","Calling _cbq.push"),_cbq.push(["_optlyx",integrator.currentChartbeatExperiment])}catch(r){timer.addEvent("Integrator","Error sending Chartbeat data for "+data.getExperimentString(e))}},integrator.makeComscoreRequest=ENABLED_COMSCORE?function(e,t){var i=data.getComscoreProperty(e,"url"),a=integrator.makeSendableNames(e,t,100,100,25,!0),n=containsString(i,"?")?"&":"?",r=i+n+"optimizely_experiment_id="+e+"&optimizely_experiment_name="+encodeURIComponent(a.key)+"&optimizely_variation_id="+t+"&optimizely_variation_name="+encodeURIComponent(a.value)+"&ns_m_exp=("+e+") "+encodeURIComponent(a.key)+"&ns_m_chs=("+t+") "+encodeURIComponent(a.value)+"&type=hidden";try{$(window).load(function(){timer.addEvent("Integrator","Sending comScore log call"),tracker.makeRequest(r,null)})}catch(o){timer.addEvent("Integrator","Error sending comScore data for "+data.getExperimentString(e))}}:goog.nullFunction,integrator.makeCrazyEggRequest=function(e,t){var i=integrator.makeSendableNames(e,t,100,100,15,!1);try{log("Integrator","Defining CE_SNAPSHOT_NAME"),window.CE_SNAPSHOT_NAME=i.key+": "+i.value}catch(a){timer.addEvent("Integrator","Error sending CrazyEgg data for "+data.getExperimentString(e))}},integrator.makeGoogleAnalyticsRequest=function(e,t){var i=data.getGoogleAnalyticsSlot(e),a=data.getGoogleAnalyticsTracker(e),n=integrator.makeSendableNames(e,t,28,24,5,!0);try{var r="";""!==a&&(r=a+"."),log("Integrator","Calling _gaq._setCustomVar for slot %d and scope %d",i,integrator._googleAnalyticsCustomVariableScope),_gaq.push([r+"_setCustomVar",i,n.key,n.value,integrator._googleAnalyticsCustomVariableScope])}catch(o){timer.addEvent("Integrator","Error sending Google Analytics data for "+data.getExperimentString(e))}},integrator.activateUniversalAnalytics=ENABLED_UNIVERSAL_ANALYTICS?function(){if(directive.shouldTrackEvents){if(!integrator.hasIntegratedThirdParties)return void(integrator.alsoActivateUniversalAnalytics=!0);var e=window.GoogleAnalyticsObject||"ga",t=window[e];if(!t)return void timer.addEvent("Integrator","Error with Universal Analytics integration: 'GoogleAnalyticsObject' not defined");integrator.fixUniversalAnalyticsReferrer(),log("Integrator","Tracking with Universal Analytics"),each(integrator.getRelevantVariationIds(),function(e){var i=data.getVariationExperimentId(e);if(data.isUniversalAnalyticsEnabled(i)){var a=data.getUniversalAnalyticsProperty(i,"slot"),n=data.getUniversalAnalyticsProperty(i,"tracker"),r=integrator.makeSendableNames(i,e,100,100,25,!0),o=r.key+" ("+i+"): "+r.value;if(o.length>UA_DIMENSION_MAX_CHARACTERS){var s=r.key.substring(0,UA_EXPERIMENT_MAX_CHARACTERS);o=s+" ("+i+"): "+r.value,o=o.substring(0,UA_DIMENSION_MAX_CHARACTERS-1)}var c=n?n+".":"";log("Integrator","Calling ua set dimension - ga(%sset, dimension%d, %s)",c,a,o),t(c+"set","dimension"+a,o)}})}}:goog.nullFunction,integrator.makeInspectletRequest=ENABLED_INSPECTLET?function(e,t){var i=integrator.prefix;integrator.setPrefix("");var a=integrator.makeSendableNames(e,t,100,100,25,!1);integrator.setPrefix(i);try{timer.addEvent("Integrator","Calling __insp.push for sending data to Inspectlet"),window.__insp=window.__insp||[],window.__insp.push(["tagSession",{"Optimizely Experiment Name":a.key,"Optimizely Variation Name":a.value,"Optimizely Experiment ID":e,"Optimizely Variation ID":t}])}catch(n){timer.addEvent("Integrator","Error sending Inspectlet data for "+data.getExperimentString(e))}}:goog.nullFunction,integrator.makeKissMetricsRequest=function(e,t){var i=integrator.makeSendableNames(e,t,100,100,15,!0),a={};a[i.key]=i.value;try{log("Integrator","Calling _kmq.set"),_kmq.push(["set",a])}catch(n){timer.addEvent("Integrator","Error sending KISSmetrics data for "+data.getExperimentString(e))}},integrator.makeMixpanelRequest=function(e,t){var i=integrator.makeSendableNames(e,t,100,100,15,!1),a={};a[i.key]=i.value;try{log("Integrator","Calling mixpanel.push"),mixpanel.push(["register",a])}catch(n){timer.addEvent("Integrator","Error sending Mixpanel data for "+data.getExperimentString(e))}},integrator.makeMoatRequest=ENABLED_MOAT?function(e,t){var i=integrator.makeSendableNames(e,t,100,100,15,!1),a=i.key+": "+i.value;try{log("Integrator","Calling optimizelyMoat.push"),optimizelyMoat.push(a)}catch(n){timer.addEvent("Integrator","Error sending Moat data for "+data.getExperimentString(e))}}:goog.nullFunction,integrator.makeSessioncamRequest=function(e){try{timer.addEvent("Integrator","Calling sessioncamConfiguration object"),window.sessioncamConfiguration=window.sessioncamConfiguration||{},window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects||[],window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects.concat(e)}catch(t){timer.addEvent("Integrator","Error sending sessioncam data "+e)}},integrator.createSessioncamData=function(e,t){timer.addEvent("Integrator","Preparing to send data to Sessioncam");var i=integrator.makeSendableNames(e,t,100,100,15,!1);return[i,{key:"Optimizely Exp "+e,value:"Optimizely Var "+t}]},integrator.queueATInternetRequest=ENABLED_AT_INTERNET?function(e,t){var i=integrator.makeSendableNames(e,t,28,24,5,!0),a=e+"["+encodeURIComponent(i.key)+"]-0-"+t+"["+encodeURIComponent(i.value)+"]";a in integrator.ATInternetExperimentValues||(log("Integrator","Queueing AT Internet log call: %s",a),integrator.ATInternetExperimentValues[a]=!1)}:goog.nullFunction,integrator.ATInternetOnloadHandler=ENABLED_AT_INTERNET?function(){try{$(window).unbind("load.ATInternet"),window.xt_mvt&&each(integrator.ATInternetExperimentValues,function(e,t){t||(log("Integrator","Sending AT Internet log call: %s",e),window.xt_mvt("","",e),integrator.ATInternetExperimentValues[e]=!0)})}catch(e){timer.addEvent("Integrator","Error sending AT Internet data: "+e.toString())}}:goog.nullFunction,integrator.makeSendableNames=function(e,t,i,a,n,r){var o,s=integrator.prefix+data.getExperimentName(e),c=data.getVariationNamesArray(t);return c.length>1?(c=$.map(c,function(e){return e.substr(0,n-1)}),o=c.join("~")):o=c[0],r?(s=integrator.cleanSegmentString(s,i),o=integrator.cleanSegmentString(o.replace("#",""),a)):(s=s.substring(0,i),o=o.substring(0,a)),{key:s,value:o}},integrator.getAllThirdPartyData=function(){return optly.client.storage.localStorage.get(integrator.THIRD_PARTY_KEY)||{}},integrator.unionThirdPartyConditionValue=function(e,t){isArrayLike(e)||(e=[e]),isArrayLike(t)||(t=[t]);var i,a=[].concat(e);for(i=0;i<t.length;i++)inArray(t[i],a)||a.push(t[i]);return a},integrator.mergeThirdPartyData=function(e,t){var i,a={};if(e)for(i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);if(t)for(i in t)t.hasOwnProperty(i)&&(a[i]?a[i]=integrator.unionThirdPartyConditionValue(a[i],t[i]):a[i]=t[i]);return a},integrator.storeThirdPartyData=function(e,t,i){try{var a=integrator.getAllThirdPartyData(),n=a[e];i&&n?a[e]=integrator.mergeThirdPartyData(n,t):a[e]=t,optly.client.storage.localStorage.set(integrator.THIRD_PARTY_KEY,a)}catch(r){}},integrator.getAllThirdPartyDataForProvider=function(e){return integrator.getAllThirdPartyData()[e]},integrator.getThirdPartyData=function(e,t){for(var i=integrator.getAllThirdPartyDataForProvider(e),a=0,n=t.length;a<n;a++){if(!goog.isObject(i)||!i.hasOwnProperty(t[a]))return;i=i[t[a]]}return i},integrator.storeThirdPartyListData=function(e){var t,i,a,n,r,o=e&&e.lists||{},s={};for(var c in o)o.hasOwnProperty(c)&&beginsWith(c,INTERNAL_LIST_NAME_PREFIX)&&o[c]&&(t=c.substring(INTERNAL_LIST_NAME_PREFIX.length).split(INTERNAL_LIST_NAME_PART_DELIMITER),i=t.shift(),a=t.shift(),n=t.join(INTERNAL_LIST_NAME_PART_DELIMITER),i&&a&&n&&(r=s,r[i]||(r[i]={}),r=r[i],r[a]||(r[a]=[]),r=r[a],r.push(n)));for(i in s)integrator.storeThirdPartyData(i,s[i],!1)},integrator.alsoActivateUniversalAnalytics=!1,integrator.alsoActivateSiteCatalyst=!1,integrator.ATInternetExperimentValues={},integrator.currentChartbeatExperiment="",integrator._googleAnalyticsCustomVariableScope=2,integrator.hasIntegratedThirdParties=!1,integrator.prefix="Optimizely ",integrator.siteCatalystObject=null,integrator.THIRD_PARTY_KEY="thirdParty",activator.Options,activator.activate=function(e,t,i,a){if(!directive.isEnabled)return!1;var n="number"==typeof i||"string"==typeof i?String(i):null,r=!!(i===!0||i&&i.force===!0||a&&a.force===!0);a=("object"==typeof i?i:a)||{};var o=a.skip===!0,s=a.skipPageview===!0,c=a.enabledStatus;if(n)try{var d=!0;api.bucketUser(t,n,d)}catch(l){timer.addEvent("Activator","Error while activating experiment "+t+" for variation "+n+" -- proceeding without bucketing user.")}var u=[];isNumberLike(t)?u.push(t):each(data.getExperimentIds(),function(e){data.isExperimentManuallyActivated(e)&&u.push(e)}),activator.tryToEvaluateExperiments(e,u,{forcedActivation:r,manualActivation:!0,enabledStatus:c,skipBucketing:o,skipPageviewTracking:s}),optly.client.preview.ENABLED&&directive.shouldLoadPreview&&(timer.addEvent("Activator"," Activate - Updating preview data object asynchronously."),window.optimizelyPreview=window.optimizelyPreview||{},each(u,function(e){window.optimizelyPreview.updatePreviewData(e)}))},activator.activateGeoDelayedExperiments=function(e,t,i){if(!directive.isEnabled)return!1;if("object"==typeof t&&"string"==typeof i);else if("object"!=typeof t||isDefined(i)){if(isDefined(t)||isDefined(i))return void timer.addEvent("Activator","Unrecognized arguments to activateGeoDelayedExperiment: "+arguments)}else i=t.hasOwnProperty("lists")?asyncInfo.Source.ODDS:asyncInfo.Source.AKAMAI;if("object"!=typeof t||"string"!=typeof i)return timer.addEvent("Activator","Timeout: will not act on future async info."),optly.client.rum.instance.recordEvent("geoTimeout"),void(activator.hasTimedOut=!0);if(timer.addEvent("Activator","Saving async info from '"+i+"'"),i===asyncInfo.Source.AKAMAI&&optly.client.rum.instance.recordEvent("geoArrive"),asyncInfo.writeAroundToStore(i,t),asyncInfo.set(i,t),integrator.storeThirdPartyListData(t),activator.hasTimedOut)return timer.addEvent("Activator","Post-timeout; too late to act on new async info."),void(geolocation.cdn3Requested&&optly.client.rum.instance.recordEvent("geoFailed"));var a=activator.delayedSegments.slice();timer.addEvent("Activator","Trying to activate "+a.length+" delayed segments");var n=(activator.tryToEvaluateSegments(a),activator.delayedExperiments.slice());timer.addEvent("Activator","Trying to activate "+n.length+" experiments");activator.tryToEvaluateExperiments(e,n,{skipPageviewTracking:directive.shouldSkipPageTracking});api.setPublicObjects(),"object"==typeof t&&"string"==typeof i&&i===asyncInfo.Source.AKAMAI&&optly.client.rum.instance.recordEvent("geoSuccess")},activator.tryToEvaluateExperiments=function(e,t,i){var a=activator.triageExperiments(e,t,i);each(a.pending,activator.addDelayedExperiment),activator.removeDelayedExperiments(a.passing),activator.removeDelayedExperiments(a.failing);var n=[];return each(a.passing,function(e){var t=distributor.distributeExperiment(e,i.skipBucketing);t&&n.push(e)}),evaluator.evaluate(n,t),plan.writeCookie(),integrator.makeThirdPartyRequests(),directive.isEnabled&&!i.skipPageviewTracking&&tracker.addActivationEvent(document.location.href),a},activator.triageExperiments=function(e,t,i){timer.addEvent("Activator","Triaging "+t.length+" experiments.");var a=[],n=[],r=[];return each(t,function(t){i.forcedActivation?(timer.addEvent("Activator","Force-ignoring conditions for experiment "+t),a.push(t)):condition.isReadyToTest(t)?condition.test(t,{manualActivation:i.manualActivation,objectType:"experiment",enabledStatus:i.enabledStatus,visitor:e})?(timer.addEvent("Activator","Passed conditions for experiment "+t),a.push(t)):(timer.addEvent("Activator","Failed conditions for experiment "+t),r.push(t)):(timer.addEvent("Activator","Can't test conditions for experiment "+t),n.push(t))}),{passing:a,pending:n,failing:r}},activator.tryToEvaluateSegments=function(e){var t=activator.triageSegments(e);return each(t.pending,activator.addDelayedSegment),activator.removeDelayedSegments(t.passing),activator.removeDelayedSegments(t.failing),activator.removeDelayedSegments(t.apiOnly),each(t.passing,segmenter.evaluateSegment),t},activator.triageSegments=function(e){timer.addEvent("Activator","Triaging "+e.length+" segments.");var t=[],i=[],a=[],n=[];return each(e,function(e){data.getSegmentAPIOnly(e)?(timer.addEvent("Activator","Ignoring API-only segment "+e),n.push(e)):condition.isReadyToTest(e)?condition.test(e,{objectType:"segment"})?(timer.addEvent("Activator","Passed conditions for segment "+e),t.push(e)):(timer.addEvent("Activator","Failed conditions for segment "+e),a.push(e)):(timer.addEvent("Activator","Can't test conditions for segment "+e),i.push(e))}),{passing:t,pending:i,failing:a,apiOnly:n}},activator.addDelayedExperiment=function(e){timer.addEvent("Activator","Deferring test for experiment "+e),arrayContains(activator.delayedExperiments,e)||activator.delayedExperiments.push(e)},activator.addDelayedSegment=function(e){timer.addEvent("Activator","Deferring test for segment "+e),arrayContains(activator.delayedSegments,e)||activator.delayedSegments.push(e)},activator.hasDelayedExperiments=function(){return activator.delayedExperiments.length>0},activator.removeDelayedExperiments=function(e){activator.delayedExperiments=filter(activator.delayedExperiments,function(t){return!inArray(t,e)})},activator.removeDelayedSegments=function(e){activator.delayedSegments=filter(activator.delayedSegments,function(t){return!inArray(t,e)})},activator.delayedExperiments=[],activator.delayedSegments=[],activator.hasTimedOut=!1,/**
         * @license
         *
         * UAParser.js v0.7.12
         * Lightweight JavaScript-based User-Agent string parser
         * https://github.com/faisalman/ua-parser-js
         *
         * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
         * Dual licensed under GPLv2 & MIT
         */
useragent=function(){},function(e,t){"use strict";var i="0.7.12",a="",n="?",r="function",o="undefined",s="object",c="string",d="major",l="model",u="name",p="type",g="vendor",m="version",h="architecture",v="console",f="mobile",y="tablet",E="smarttv",b="wearable",I="embedded",_={extend:function(e,t){var i={};for(var a in e)t[a]&&t[a].length%2===0?i[a]=t[a].concat(e[a]):i[a]=e[a];return i},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===c?e.replace(/[^\d\.]/g,"").split(".")[0]:t},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},w={rgx:function(){for(var e,i,a,n,c,d,l,u=0,p=arguments;u<p.length&&!d;){var g=p[u],m=p[u+1];if(typeof e===o){e={};for(n in m)m.hasOwnProperty(n)&&(c=m[n],typeof c===s?e[c[0]]=t:e[c]=t)}for(i=a=0;i<g.length&&!d;)if(d=g[i++].exec(this.getUA()))for(n=0;n<m.length;n++)l=d[++a],c=m[n],typeof c===s&&c.length>0?2==c.length?typeof c[1]==r?e[c[0]]=c[1].call(this,l):e[c[0]]=c[1]:3==c.length?typeof c[1]!==r||c[1].exec&&c[1].test?e[c[0]]=l?l.replace(c[1],c[2]):t:e[c[0]]=l?c[1].call(this,l,c[2]):t:4==c.length&&(e[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):t):e[c]=l?l:t;u+=2}return e},str:function(e,i){for(var a in i)if(typeof i[a]===s&&i[a].length>0){for(var r=0;r<i[a].length;r++)if(_.has(i[a][r],e))return a===n?t:a}else if(_.has(i[a],e))return a===n?t:a;return e}},S={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},A={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[u,m],[/(opios)[\/\s]+([\w\.]+)/i],[[u,"Opera Mini"],m],[/\s(opr)\/([\w\.]+)/i],[[u,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[u,m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[u,"IE"],m],[/(edge)\/((\d+)?[\w\.]+)/i],[u,m],[/(yabrowser)\/([\w\.]+)/i],[[u,"Yandex"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],m],[/(micromessenger)\/([\w\.]+)/i],[[u,"WeChat"],m],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[m,[u,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,/(.+)/,"$1 WebView"],m],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[m,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[u,m],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[u,"UCBrowser"],m],[/(dolfin)\/([\w\.]+)/i],[[u,"Dolphin"],m],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[u,"Chrome"],m],[/;fbav\/([\w\.]+);/i],[m,[u,"Facebook"]],[/fxios\/([\w\.-]+)/i],[m,[u,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[u,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[m,w.str,S.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[u,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],m],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,m]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,_.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",_.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,_.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[l,g,[p,y]],[/applecoremedia\/[\w\.]+ \((ipad)/],[l,[g,"Apple"],[p,y]],[/(apple\s{0,1}tv)/i],[[l,"Apple TV"],[g,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[g,l,[p,y]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[l,[g,"Amazon"],[p,y]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[l,w.str,S.device.amazon.model],[g,"Amazon"],[p,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[l,g,[p,f]],[/\((ip[honed|\s\w*]+);/i],[l,[g,"Apple"],[p,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[g,l,[p,f]],[/\(bb10;\s(\w+)/i],[l,[g,"BlackBerry"],[p,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[l,[g,"Asus"],[p,y]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[g,"Sony"],[l,"Xperia Tablet"],[p,y]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[g,"Sony"],[l,"Xperia Phone"],[p,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[g,l,[p,v]],[/android.+;\s(shield)\sbuild/i],[l,[g,"Nvidia"],[p,v]],[/(playstation\s[34portablevi]+)/i],[l,[g,"Sony"],[p,v]],[/(sprint\s(\w+))/i],[[g,w.str,S.device.sprint.vendor],[l,w.str,S.device.sprint.model],[p,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[g,l,[p,y]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[g,[l,/_/g," "],[p,f]],[/(nexus\s9)/i],[l,[g,"HTC"],[p,y]],[/(nexus\s6p)/i],[l,[g,"Huawei"],[p,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[g,l,[p,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[l,[g,"Microsoft"],[p,v]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[g,"Microsoft"],[p,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[l,[g,"Motorola"],[p,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[l,[g,"Motorola"],[p,y]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[g,_.trim],[l,_.trim],[p,E]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[g,"Samsung"],[p,E]],[/\(dtv[\);].+(aquos)/i],[l,[g,"Sharp"],[p,E]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[g,"Samsung"],l,[p,y]],[/smart-tv.+(samsung)/i],[g,[p,E],l],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[g,"Samsung"],l,[p,f]],[/sie-(\w+)*/i],[l,[g,"Siemens"],[p,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[g,"Nokia"],l,[p,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[l,[g,"Acer"],[p,y]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[g,"LG"],l,[p,y]],[/(lg) netcast\.tv/i],[g,l,[p,E]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[l,[g,"LG"],[p,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[l,[g,"Lenovo"],[p,y]],[/linux;.+((jolla));/i],[g,l,[p,f]],[/((pebble))app\/[\d\.]+\s/i],[g,l,[p,b]],[/android.+;\s(glass)\s\d/i],[l,[g,"Google"],[p,b]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[l,/_/g," "],[g,"Xiaomi"],[p,f]],[/android.+a000(1)\s+build/i],[l,[g,"OnePlus"],[p,f]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[p,_.lowerize],g,l]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[m,[u,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,m],[/rv\:([\w\.]+).*(gecko)/i],[m,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[u,[m,w.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[m,w.str,S.os.windows.version]],[/\((bb)(10);/i],[[u,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[u,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[u,"Symbian"],m],[/\((series40);/i],[u],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"],m],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[u,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[u,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[u,m],[/(haiku)\s(\w+)/i],[u,m],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[u,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[u,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[u,m]]},x=function(t,i){if(!(this instanceof x))return new x(t,i).getResult();var n=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:a),r=i?_.extend(A,i):A;return this.getBrowser=function(){var e=w.rgx.apply(this,r.browser);return e.major=_.major(e.version),e},this.getCPU=function(){return w.rgx.apply(this,r.cpu)},this.getDevice=function(){return w.rgx.apply(this,r.device)},this.getEngine=function(){return w.rgx.apply(this,r.engine)},this.getOS=function(){return w.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};x.VERSION=i,x.BROWSER={NAME:u,MAJOR:d,VERSION:m},x.CPU={ARCHITECTURE:h},x.DEVICE={MODEL:l,VENDOR:g,TYPE:p,CONSOLE:v,MOBILE:f,SMARTTV:E,TABLET:y,WEARABLE:b,EMBEDDED:I},x.ENGINE={NAME:u,VERSION:m},x.OS={NAME:u,VERSION:m},e.UAParser=x}(useragent),detect.detect=function(e){var t=e||window.navigator,i=new useragent.UAParser(t.userAgent),a=i.getBrowser(),n=i.getOS(),r=i.getDevice(),o=detect.normalizeDevice(r),s=detect.normalizePlatformName(n.name),c=detect.isMobile(r.type,o,s);return{browserId:detect.getBrowserCode(a.name),browserVersion:a.version,platform:{id:s,version:n.version},device:{id:o,type:r.type||(c?"mobile":"desktop"),isMobile:c}}},detect.getBrowserCode=function(e){if(e=(e||"").toLowerCase(),e in detect.browserMap)return e;for(var t in detect.browserMap)if(any(detect.browserMap[t]||[],function(t){return t.toLowerCase()===e}))return t;return"unknown"},detect.getBrowserName=function(e){return detect.browserMap[e]?detect.browserMap[e][0]:e},detect.isMobile=function(e,t,i){if(arrayContains(["mobile","tablet"],e))return!0;if(t&&"unknown"!==t)for(var a in detect.mobileDeviceMap)if(t===detect.mobileDeviceMap[a])return!0;var n=["android","blackberry","ios","windows phone"];return!!arrayContains(n,i)},detect.normalizeDevice=function(e){return e.model in detect.mobileDeviceMap?detect.mobileDeviceMap[e.model]:"unknown"},detect.normalizePlatformName=function(e){return(e||"unknown").toLowerCase()},detect.browserMap={gc:["Chrome","chromium","silk","yandex","maxthon"],ie:["Internet Explorer","iemobile"],edge:["Edge"],ff:["Firefox","iceweasel"],opera:["Opera","opera mini","opera tablet"],safari:["Safari","mobile safari","webkit"],ucbrowser:["UC Browser"]},detect.mobileDeviceMap={iPhone:"iphone",iPad:"ipad"},redirect.initialize=function(){redirect.initializeRedirectVariationId(),redirect.initializeRedirectReferrerUrl()},redirect.getRedirectURL=function(e){var t=/_optimizely_redirect(?:_no_cookie)?=(\S+)/;return e.match(t)},redirect.getRedirectReferrer=function(){return redirect.referrer},redirect.getRedirectVariationId=function(){return redirect.variationId},redirect.detectNoCookieRedirect=function(e){return containsString(e,"_optimizely_redirect_no_cookie")},redirect.okToRedirect=function(e){e=e||"";var t=redirect.getRedirectCookie();return!!redirect.detectNoCookieRedirect(e)||(!t||!(!t||t.split("|")[1]!==REDIRECT_COOKIE_TRUE))},redirect.getRedirectCookie=function(){return cookie.get(REDIRECT_COOKIE_NAME)},redirect.initializeRedirectVariationId=function(){var e=redirect.getRedirectCookie()||"|";redirect.variationId=e.split("|")[0]},redirect.initializeRedirectReferrerUrl=function(){var e=cookie.get(REFERRER_REDIRECT_COOKIE_NAME);null!==e&&(redirect.referrer=0==e.length?"":e,cookie.set(REFERRER_REDIRECT_COOKIE_NAME,""))},redirect.setRedirectCookie=function(e,t){var i=e?REDIRECT_COOKIE_TRUE:REDIRECT_COOKIE_FALSE;cookie.set(REDIRECT_COOKIE_NAME,(t||"unknown variation")+"|"+i,data.getRedirectTimeout())},redirect.setReferrerCookie=function(e){e=isDefined(e)?e:document.referrer,cookie.set(REFERRER_REDIRECT_COOKIE_NAME,e,data.getRedirectTimeout())},redirect.referrer=null,redirect.variationId="",redirect.redirectRegex=/^\/\* _optimizely_redirect.+\*\/[ ]*\nwindow\.location\.replace\(_optly\.redir\.href.*\)[ ]*[;]?$/,redirect.redirectRegexParams=/^\/\* _optimizely_redirect.+\*\/[ ]*\nvar[ ]*_optly[ ]*=[ ]*\{[ ]*redir:document\.createElement\("a"\)\}[;]?\n_optly\.redir\.href=.*\n_optly\.cur=.+\nif \(_optly.cur\)[ ]?\{.+\}[ ]*\nwindow\.location\.replace\(_optly\.redir\.href.*\)[ ]*[;]?$/,redirect.redirectRegexLegacy=/^\/\* _optimizely_redirect.+\*\/[ ]*[\n]+window\.location\.replace\([ ]*redirectFirst.*\)[ ]*[;]?$/,api.includeRemoveFromAllReportable=!0,api.initializePriorityOneApiCalls=function(){var e={disable:api.disable,optOut:tracker.optOut,setCookieDomain:cookie.setApiPublicSuffix,setCookieExpiration:api.setCookieExpiration,verifyPreviewProject:function(e){data.getProjectId()!==e?timer.addEvent("API","Preview projectId ("+data.getProjectId()+") does not match expected ("+e+"), disabling."):directive.previewVerified=!0}};api.initializeHighPriority(e)},api.initializeHighPriority=function(e){var t=window.optimizely,i=[];isArrayLike(t)&&(each(t,function(t){var a=t;isArrayLike(t)?a=t[0]:isNonNullObject(t)&&(a=t.type),e[a]?api.push([e],t,!0):i.push(t)}),window.optimizely=i)},api.storeThirdPartyData=function(e,t,i){integrator.storeThirdPartyData(e,t,!!i),api.setPublicObjects()},api.addToSegment=function(e,t){var i=data.getSegmentIdByIdentifier(e)||e,a=data.getSegment(i);if(a)if(a.audience_id)api.visitor.addToAudience(a.audience_id);else if(a.dimension_id){var n=!1;api.visitor.setDimensionValue(a.dimension_id,t||!0,n)}else segmenter.addToSegment(i,t);else timer.addEvent("API","Unable to find segment: "+i)},api.bucketUser=function(e,t,i){i=i===!0,directive.shouldOverrideThirdPartyCookie=!0,directive.isEnabled&&!i&&tracker.addActivationEvent(document.location.href),e=String(e),t=String(t);var a=null,n=t.split(VARIATION_ID_DELIMITER),r=data.getExperimentSectionIds(e),o=r&&0!==r.length,s=256;if("-1"===n[0]?plan.removeExperiment(e):o&&n.length==r.length?(a=[],each(n,function(e,t){Number(e)<=s?a.push(data.getSectionVariationIds(r[t])[e]):a.push(e)}),a=a.join(VARIATION_ID_DELIMITER)):!o&&1==n.length&&Number(n[0])<=s?a=String(data.getVariationIdByIndex(e,n[0])):1==n.length?a=n[0]:timer.addEvent("API","Error: could not bucket user. Unknown arguments."),a)if(o&&data.getExperimentVariationSectionId(e,a))distributor.preferMVTVariation(e,a);else{var c=!1,d=!0;plan.addVariation(a,"api.bucketUser",c,d)}plan.writeCookie()},api.disable=function(e){e&&"tracking"===e?directive.shouldTrackEvents=!1:(timer.addEvent("API","Optimizely disabled"),directive.isEnabled=!1,directive.isNewClientEnabled=!1,directive.shouldTrackEvents=!1)},api.finalize=function(){timer.addEvent("API","Finalizing API."),api.setPublicObjects(),api.isFinalized=!0},api.get=function(){if(data.hasSlave())return SLAVE_CLIENT[GLOBAL].get.apply(null,Array.prototype.slice.call(arguments))},api.getVariationNamesMap=function(){return api.variationNamesMap},api.OAuthClientIds=[],api.addOAuthClientId=function(e){api.OAuthClientIds.push(e),api.setPublicObjects()},api.getOAuthClientIds=function(){return api.OAuthClientIds},api.initialize=function(e){api.visitor=e,api.isFinalized=!1,segmenter.addChangeHandler(api.setPublicObjects),plan.addChangeHandler(api.setPublicObjects);var t={$:$,activeExperiments:evaluator.getEvaluatedExperimentIds()||[],allExperiments:data.getExperiments(),all_experiments:data.getExperiments(),allVariations:data.getVariations(),getElementsByClassName:document.getElementsByClassName,revision:data.getRevision(),variationIdsMap:api.variationIdsMap,variation_map:api.variationMap,variationMap:api.variationMap,variationNamesMap:api.variationNamesMap};for(var i in t)api.setProperty(t,i,t[i]);t.data=api.data;var a={},n=[a,api.v1],r=curry(api.push,n);extend(a,{activate:goog.partial(activator.activate,api.visitor),activateGeoDelayedExperiments:goog.partial(activator.activateGeoDelayedExperiments,api.visitor),activateSiteCatalyst:integrator.activateSiteCatalyst,activateUniversalAnalytics:integrator.activateUniversalAnalytics,addOAuthClientId:api.addOAuthClientId,addToAudience:goog.bind(api.visitor.addToAudience,api.visitor),addToSegment:api.addToSegment,bindTrackElement:evaluator.bindTrackElementFromApi,bucketUser:api.bucketUser,bucketVisitor:api.bucketUser,clickTaleRecord:integrator.recordClickTale,clickTalePlayback:integrator.playbackClickTale,customTag:api.registerCustomTag,delayDomReadyEval:evaluator.setDelayDomExecute,delayPageviewTracking:api.delayPageviewTracking,disable:api.disable,log:timer.enableLogging,getAccountId:data.getAdminAccountId,getProjectId:data.getProjectId,googleAnalyticsCustomVariableScope:integrator.googleAnalyticsCustomVariableScope,integrationPrefix:integrator.setPrefix,optOut:tracker.optOut,overrideUrl:user.setCurrentUrl,push:r,removeFromAllAudiences:goog.bind(api.visitor.removeFromAllAudiences,api.visitor),removeFromAllSegments:api.removeFromAllSegments,removeFromAudience:goog.bind(api.visitor.removeFromAudience,api.visitor),removeFromSegment:api.removeFromSegment,sc_activate:integrator.activateSiteCatalyst,sc_svar:integrator.setSiteCatalystSVar,skipPageTracking:api.skipPageTracking,optOutThirdPartyCookies:api.optOutThirdPartyCookies,setDimensionValue:goog.bind(api.visitor.setDimensionValue,api.visitor),setUserId:api.setUserId,storeThirdPartyData:api.storeThirdPartyData,timeout:optly.client.preview.ENABLED?goog.nullFunction:api.disable,trackEvent:tracker.addLogEventFromAPI,verbose:timer.enableVerboseLogging}),data.hasSlave()&&extend(a,{get:api.get}),optly.client.preview.ENABLED&&extend(a,{getPreviewLog:function(){return optly.client.preview.Logger.log},clearPreviewLog:function(){optly.client.preview.Logger.clear()},configureConditionalModeExperiment:function(e,t){distributor.configureConditionalModeExperiment(e,t),timer.addEvent("API","Configuring conditionally activated experiment for preview "+e)}}),api.includeRemoveFromAllReportable&&(a.removeFromReportableAudiences=api.removeFromReportableAudiences),extend(t,a);var o=window.optimizely;isArrayLike(o)&&each(o,function(e){r(e)}),window[GLOBAL]=t},api.push=function(e,t,i){var a=[],n=t;i=!!isDefined(i)&&i;var r=0;isArrayLike(t)?(n=t[0],a=slice(t,1)):isNonNullObject(t)&&(r=isDefined(t.version)?t.version:1,n=t.type,a=[t]);var o,s=e[r];if(s&&(o=s[n]),o){timer.addEvent("API",'Called function "'+n+'"'),o.apply(null,a);var c=0===r?n:"v"+r+"."+n;optly.client.rum.instance.recordApi(c)}else i||timer.addEvent("API",'Error for unknown function "'+n+'"');data.hasSlave()&&SLAVE_CLIENT[GLOBAL].push(t),timer.flushLogs()},api.registerCustomTag=function(e,t){return api.isFinalized?void timer.addEvent("API","Error: can't add custom tags after Optimizely loads"):(api.customTags=api.customTags||{},void(2==arguments.length?api.customTags[e]=t:1==arguments.length&&$.extend(!0,api.customTags,e)))},api.removeFromSegment=function(e,t){var i=data.getSegmentIdByIdentifier(e)||e;t=!isDefined(t)||t;var a=data.getSegment(i);a?a.audience_id?api.visitor.removeFromAudience(a.audience_id):a.dimension_id?api.visitor.setDimensionValue(a.dimension_id,null):segmenter.removeFromSegment(i,t):timer.addEvent("API","Unable find segment for: "+i)},api.removeFromAllSegments=function(){var e=data.getSegmentIds();each(e,function(e){var t=!1;api.removeFromSegment(e,t)}),segmenter.callChangeHandlers()},api.setPublicObjects=function(){api.variationIdsMap={},api.variationMap={},api.variationNamesMap={},each(plan.getVariationIds(),function(e){var t=data.getVariationExperimentId(e);api.variationIdsMap[t]=e.split(VARIATION_ID_DELIMITER),api.variationMap[t]=data.getVariationIndex(e),api.variationNamesMap[t]=data.getVariationName(e)}),api.updateDataObject();var e={activeExperiments:evaluator.getEvaluatedExperimentIds(),allExperiments:data.getExperiments(),all_experiments:data.getExperiments(),variationIdsMap:api.variationIdsMap,variationMap:api.variationMap,variationNamesMap:api.variationNamesMap,variation_map:api.variationMap};window[GLOBAL].data=api.data,each(e,function(e,t){api.setProperty(window[GLOBAL],e,t)})},api.setProperty=function(e,t,i,a){try{var n="o.";n+=a?a:t,Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return optly.client.rum.instance.recordApi(n),i},set:function(e){i=e}})}catch(r){e[t]=i}},api.delayPageviewTracking=function(e){return!!isNumberLike(e)&&void(directive.delayPageviewTracking=Number(e))},api.optOutThirdPartyCookies=function(){directive.optOutThirdPartyCookies=!0},api.getRedirectExperimentState=function(){var e=redirect.getRedirectVariationId();if(e){var t=data.getVariationExperimentId(e);if(t)return{variationId:e,experimentId:t,referrer:redirect.getRedirectReferrer()}}},api.setCookieExpiration=function(e){var t,i="";"number"!=typeof e?(i="must be a number.",t=DEFAULT_TRACKING_COOKIE_EXPIRATION):t=Math.floor(DAY_IN_SECONDS*e),t<MINIMUM_TRACKING_COOKIE_EXPIRATION&&(i="less then minimum.",t=MINIMUM_TRACKING_COOKIE_EXPIRATION),i=i&&"Days argument "+i,timer.addEvent("API",i+" Cookie expiration set to "+t+" seconds."),directive.trackingCookieExpiration=t},api.skipPageTracking=function(){directive.shouldSkipPageTracking=!0},api.doesExperimentTargetCurrentUrl=optly.client.preview.ENABLED?function(e){var t=data.getExperimentUrls(e);return t?condition.testUrlDimensionValues(t,condition.facade.getCurrentUrl()):(t=data.getConditions(e,"experiment"),0!==filter(t,function(e){return"url"===e.type&&condition.testUrls(e)}).length)}:goog.nullFunction,api.updateDataObject=function(){api.data={};var e=data.getAudiences();api.setProperty(api.data,"audiences",e||void 0,"data.audiences"),api.setProperty(api.data,"customTags",api.customTags,"data.customTags"),api.setProperty(api.data,"thirdParty",integrator.getAllThirdPartyData(),"data.thirdParty");for(var t={},i=data.getExperimentIds(),a=0;a<i.length;a++){var n=i[a],r={};r.code=data.getExperimentCode(n),r.name=data.getExperimentName(n),r.conditional=data.isExperimentConditionallyActivated(n),r.manual=data.isExperimentManuallyActivated(n),r.section_ids=data.getExperimentSectionIds(n),r.variation_ids=data.getExperimentVariationIds(n),optly.client.preview.ENABLED&&(r.status=data.getExperimentStatus(n),r.targetsUrl=api.doesExperimentTargetCurrentUrl(n),api.conditionallyActivatedExperiments[n]&&(r.conditional_triggered=!0)),t[n]=r}api.setProperty(api.data,"experiments",t,"data.experiments");for(var o={},s=data.getSegmentIds(),a=0;a<s.length;a++){var c=s[a],d={name:data.getSegmentName(c)};optly.client.preview.ENABLED&&extend(d,{is_default:data.getSegementIsDefault(c)}),o[c]=d}api.setProperty(api.data,"segments",o,"data.segments");for(var l={},u=data.getSectionIds(),a=0;a<u.length;a++){var p=u[a],g={};g.name=data.getSectionName(p),g.variation_ids=data.getSectionVariationIds(p),l[p]=g}api.setProperty(api.data,"sections",l,"data.sections");for(var m={},h=data.getVariationIds(),a=0;a<h.length;a++){var v=h[a],f={};f.name=data.getVariationName(v),f.code=data.getVariationCode(v),m[v]=f}api.setProperty(api.data,"variations",m,"data.variations");var y={browser:detect.getBrowserName(user.getBrowserId()),browserVersion:user.getBrowserVersion(),device:user.getDeviceId(),deviceType:user.getDevice().type,platform:user.getPlatform(),mobile:user.isMobile(),mobileId:user.getMobileId(),os:user.getPlatform().id,lists:asyncInfo.getListMembershipStatuses(),location:asyncInfo.getLocation(),ip:asyncInfo.getIP(),matchingRules:asyncInfo.getDynamicCustomerProfileConditions(),referrer:String(document.referrer),segments:segmenter.getSegmentTrackingData(),dimensions:api.visitor.getDimensionValues(),audiences:api.visitor.getAudiences()};for(var E in y)api.setProperty(y,E,y[E],"data.visitor."+E);optly.client.preview.ENABLED&&api.setProperty(y,"url",window.location.toString(),"data.visitor.url");var b={},I=query.getAllParameters();I.reverse();for(var a=0,_=I.length;a<_;a++)try{b[safeDecodeUriComponent(I[a][0])]=safeDecodeUriComponent(I[a][1])}catch(w){timer.addEvent("API","Failed to decode parameter "+I[a][0]+"="+I[a][1])}api.setProperty(y,"params",b,"data.visitor.params"),api.data.visitor=y;var S={},A=evaluator.getEvaluatedExperimentIds()||[];api.setProperty(S,"activeExperiments",A,"data.state.activeExperiments"),api.setProperty(S,"redirectExperiment",api.getRedirectExperimentState(),"data.state.redirectExperiment"),api.setProperty(S,"variationIdsMap",api.variationIdsMap,"data.state.variationIdsMap"),api.setProperty(S,"variationMap",api.variationMap,"data.state.variationMap"),api.setProperty(S,"variationNamesMap",api.variationNamesMap,"data.state.variationNamesMap"),api.setProperty(S,"enabled",directive.isEnabled,"data.state.enabled"),S.integrations={},api.setProperty(S.integrations,"activeOAuthClientIds",api.getOAuthClientIds(),"data.state.integrations.activeOAuthClientIds"),api.data.state=S},api.removeFromReportableAudiences=function(){cookie.get(HOTFIX_ENG_1636_COOKIE)?timer.addEvent("API","skipping because cookie is set"):(each(data.getAudiences(),function(e){data.getAudienceSegmentId(e)&&(timer.addEvent("API","Removing from reportable audience: "+e),api.visitor.removeFromAudience(e))}),cookie.set(HOTFIX_ENG_1636_COOKIE,"1",MINIMUM_TRACKING_COOKIE_EXPIRATION))},api.setUserId=function(e){var t=id.getPPID();e||0===e?"string"==typeof e||"number"==typeof e?(timer.addEvent("API","Setting PPID to "+e),e=String(e),id.setPPID(e)):timer.addEvent("API","Ignoring non-string, non-number PPID: "+e):(timer.addEvent("API","Clearing PPID"),id.unsetPPID());var i=id.getPPID();i!==t&&(timer.addEvent("API","Clearing plan because of PPID change"),plan.reset())},api.v1={event:function(e){tracker.addLogEventFromAPI(e.eventName,e.tags)},user:function(e){e.userId&&api.setUserId(e.userId),e.attributes&&each(e.attributes,function(e,t){api.visitor.setDimensionValue(e,t)})},integration:function(e){e.OAuthClientId&&api.addOAuthClientId(e.OAuthClientId)}},api.data={},api.conditionallyActivatedExperiments={},api.variationIdsMap={},api.variationMap={},api.variationNamesMap={},api.visitor=null,tracker.fixRevenueOptions=function(e,t){var i,a={},n=data.getCustomRevenueGoals();if(n&&e in n&&isNumberLike(n[e])&&(i=Number(n[e])),t)if(isNumberLike(t))i=Number(t);else{if("object"!=typeof t)return log("tracker","Revenue argument %s not a number.",t),null;if(a=extend({},t),"revenue"in a){if(!isNumberLike(a.revenue))return log("tracker","Revenue field %s not a number.",a.revenue),null;i=Number(a.revenue),delete a.revenue}}return isDefined(i)&&(a.revenue=i),a},tracker.addLogEventFromAPI=function(e,t){var i=tracker.fixRevenueOptions(e,t);if(null===i)return void log("tracker","Bad options. Will not track this event.");var a=data.getEnabledExperimentIds(),n={};each(a,function(e){n[e]=!0}),$.extend(i,{experimentIds:n}),tracker.addLogEvent(e,"custom",i)},tracker.addLogEvent=function(e,t,i,a){if(i=i||{},optly.client.preview.Logger.addEvent(e,i),directive.shouldTrackEvents){var n={name:e,type:t,created:a||tracker.currentTimeInSeconds(),options:i};tracker.logEvents.push(n),tracker.shouldSendLogEvents?(tracker.sendLogEvents(),timer.addEvent("Tracker","Tracking event '"+e+"'")):timer.addEvent("Tracker","Queued tracking event '"+e+"'")}},tracker.enableEngagementTracking=function(){tracker.cancelEngagementTracking(),$("html").bind("mousedown",tracker.registerEngagement),$("html").bind("touchstart",tracker.confirmEngagement)},tracker.cancelEngagementTracking=function(){$("html").unbind("touchstart",tracker.confirmEngagement),$("html").unbind("mousedown touchend",tracker.registerEngagement),$("html").unbind("touchmove",tracker.enableEngagementTracking)},tracker.confirmEngagement=function(){$("html").bind("touchend",tracker.registerEngagement),$("html").bind("touchmove",tracker.enableEngagementTracking)},tracker.addActivationEvent=function(e){var t=data.getMatchingGoalIds(e);t.length>0?(tracker.addLogEvent("optly_activate","activate"),each(t,function(t){tracker.addLogEvent(e,"pageview",{goalIds:[t]},tracker.pageTimestamp)})):tracker.addLogEvent(e,"activate")},tracker.getPendingLogEvents=function(){var e=cookie.get(PENDING_LOG_EVENTS_COOKIE_NAME)||"[]",t=[];try{t=json.parse(e)}catch(i){}if(isArrayLike(t))for(var a=0,n=t.length;a<n;a++){var r=t[a];if("string"!=typeof r){t=[];break}try{json.parse(r);t=[];break}catch(i){}}else t=[];return t},tracker.makeLogRequest=function(e,t){timer.addEvent("Tracker","Making a log request."),e+="&cx2="+optly.hashing.hashToHex(tracker.getCanonicalQuery(e),65259),tracker.makeRequest(data.getLogUrlRoot()+"?"+e,t)},tracker.getCanonicalQuery=function(e){var t=map(e.split("&"),function(e){return e.split("=")});return t.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),map(t,function(e){return e.join("=")}).join("&")},tracker.makeImageRequest=function(e,t){var i=new Image;i.onload=t,e=tracker.stripXHRFlag(e),i.src=e,tracker.images.push(i)},tracker.objectToQuery=function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(window.encodeURIComponent(i)+"="+window.encodeURIComponent(e[i]));return t.join("&")},tracker.makeRequest=function(e,t){if(tracker.XHR_SUPPORTED&&tracker.isXHRQuery(e))try{var i=new XMLHttpRequest;if("withCredentials"in i)return i.onload=t,i.open("GET",e,!0),i.withCredentials=!0,void i.send();tracker.XHR_SUPPORTED=!1,timer.addEvent("Tracker","Found that XHR with credentials is not supported in this browser.")}catch(a){timer.addEvent("Tracker","XHR not supported"),tracker.XHR_SUPPORTED=!1}tracker.makeImageRequest(e,t)},tracker.isXHRQuery=function(e){return e.indexOf(tracker.XHR_FLAG)!==-1},tracker.stripXHRFlag=function(e){return e.replace("&"+tracker.XHR_FLAG,"")},tracker.optOut=function(e,t){e=!isDefined(e)||"true"===String(e),isDefined(t)||(t=window.alert);var i=e?"true":"false";e?(cookie.set(OPT_OUT_COOKIE_NAME,i,directive.trackingCookieExpiration),cookie.set(BUCKET_COOKIE_NAME,i,directive.trackingCookieExpiration),t("You have successfully opted out of Optimizely for this domain.")):(cookie.set(OPT_OUT_COOKIE_NAME,i,directive.trackingCookieExpiration),t("You are NOT opted out of Optimizely for this domain."))},tracker.isOptedOut=function(){return"true"===cookie.get(OPT_OUT_COOKIE_NAME)},tracker.registerEngagement=function(e){tracker.cancelEngagementTracking(),tracker.addLogEvent("engagement","engagement")},tracker.removePendingLogEvent=function(e){for(var t=tracker.getPendingLogEvents(),i=0,a=t.length;i<a;i++)if(t[i]===e){t.splice(i,1);break;
}tracker.setPendingLogEventsCookie(t),timer.addEvent("Tracker","Removed a pending log event from the pending events cookie.")},tracker.logEvents=[],tracker.shouldSendLogEvents=!1,tracker.sendLogEvents=function(){var e=["a="+data.getProjectId(),"d="+data.getAdminAccountId(),"y="+data.getIPAnonymization(),"src=js"];directive.shouldOverrideThirdPartyCookie&&e.push("override=true"),each(plan.getVariationIds(),function(t){var i=data.getVariationExperimentId(t);e.push("x"+i+"="+t)}),each(segmenter.getSegmentTrackingData(),function(t,i){i=encodeURIComponent(safeDecodeUriComponent(i)),e.push("s"+t+"="+i)}),e.push("tsent="+tracker.currentTimeInSeconds());var t=[],i=id.getOrGenerateId(),a=id.getPPID();each(tracker.logEvents,function(e){var n=[],r=tracker.getGoalsForEvent(e);e.name&&n.push("n="+encodeURIComponent(e.name)),e.options.anonymous!==!0&&(n.push("u="+i),a&&n.push("p="+encodeURIComponent(a))),tracker.XHR_SUPPORTED&&n.push(tracker.XHR_FLAG),e.created&&n.push("time="+e.created),directive.optOutThirdPartyCookies&&n.push("dtpc="+directive.optOutThirdPartyCookies);var o=!!e.options&&!!e.options.revenue&&e.options.experimentIds||{},s=keys(o),c=filter(data.getEnabledExperimentIds(),function(e){return!o[e]}),d=[{experiments:s,goals:r.concat([data.getSummaryRevenueGoalId()]),extraParameters:["v="+encodeURIComponent(e.options.revenue)]},{experiments:c,goals:r,extraParameters:[]}];if(each(d,function(e){(e.experiments.length||directive.forceTracking)&&t.push(n.concat(e.extraParameters).concat(["f="+e.experiments.join(","),"g="+e.goals.join(",")]).join("&"))}),"custom"===e.type)try{tracker.updateCustomEventList(e.name)}catch(l){}});var n=t.concat(tracker.getPendingLogEvents());tracker.setPendingLogEventsCookie(n);var r=e.join("&"),o=tracker.sentPendingLogEvents?t:n;tracker.sentPendingLogEvents=!0;for(var s=0,c=o.length;s<c;s++){var d=o[s];tracker.makeLogRequest(r+"&"+d,function(){tracker.removePendingLogEvent(d)})}tracker.logEvents=[],tracker.shouldSendLogEvents=!0},tracker.sendVerificationRequest=function(){if(directive.shouldTrackEvents){var e=data.getWebHost(),t="https://"+e+"/account/snippet_installed?project_id="+data.getProjectId()+"&wxhr=true";timer.addEvent("Tracker","Making snippet verification request."),tracker.makeRequest(t,null)}},tracker.setPendingLogEventsCookie=function(e){for(var t=json.stringify(e);t.length>PENDING_LOG_EVENTS_COOKIE_MAX_LENGTH;)e=e.slice(0,-1),t=json.stringify(e);cookie.set(PENDING_LOG_EVENTS_COOKIE_NAME,t,PENDING_LOG_EVENTS_COOKIE_AGE)},tracker.updateCustomEventList=function(e){var t=100,i=id.getOrGenerateId(),a=optly.client.storage.localStorage.get(CUSTOM_EVENTS_STORAGE_NAME)||{},n=a[i]||(a[i]=[]);n=isArrayLike(n)?n:[],$.inArray(e,n)!==-1?(n.splice($.inArray(e,n),1),n.push(e)):n.push(e),n.length>t&&n.shift(),a[i]=n,optly.client.storage.localStorage.set(CUSTOM_EVENTS_STORAGE_NAME,a),cookie.remove(CUSTOM_EVENTS_COOKIE_NAME)},tracker.sendErrorLog=function(e){var t="EXCEPTION: "+(e.name||"no-name"),i=e.message||"no-message",a=e.stack||"error\nno stack",n=a.split("\n").slice(0,2).join(" ");tracker.addLogEvent([t,i,n].join(", "),"custom"),tracker.sendLogEvents()},tracker.getDocumentVisibilityState=function(){return document.visibilityState||document.webkitVisibilityState},tracker.currentTimeInSeconds=function(){return+new Date/1e3},tracker.getGoalsForEvent=function(e){if(e.options.goalIds)return e.options.goalIds;if("activate"===e.type){var t=evaluator.getActiveExperimentIds(),i=redirect.getRedirectVariationId();if(i){var a=data.getVariationExperimentId(i);t.push(a)}return t}return e.name?data.getMatchingGoalIds(e.name):[]},tracker.images=[],tracker.sentPendingLogEvents=!1,tracker.XHR_FLAG="wxhr=true",tracker.XHR_SUPPORTED=!0,tracker.pageTimestamp=tracker.currentTimeInSeconds(),behavior.FIELDS={NAME:"n",TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o"},behavior.EventBase=function(e,t,i,a,n){this[behavior.FIELDS.NAME]=e,this[behavior.FIELDS.TYPE]=t,"string"==typeof i&&trim(i).length>0&&(this[behavior.FIELDS.CATEGORY]=trim(i)),a&&keys(a).length>0&&(this[behavior.FIELDS.OPTIONS]=a),isDefined(n)&&(this[behavior.FIELDS.REVENUE]=n)},behavior.EventBase.prototype.digest=function(){var e=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},t=[];if(t.push(e(behavior.FIELDS.NAME,this[behavior.FIELDS.NAME])),t.push(e(behavior.FIELDS.TYPE,this[behavior.FIELDS.TYPE])),this[behavior.FIELDS.CATEGORY]&&t.push(e(behavior.FIELDS.CATEGORY,this[behavior.FIELDS.CATEGORY])),this[behavior.FIELDS.REVENUE]&&t.push(e(behavior.FIELDS.REVENUE,this[behavior.FIELDS.REVENUE])),!this[behavior.FIELDS.OPTIONS])return t.join("&");var i=this[behavior.FIELDS.OPTIONS]||{},a=filter(keys(i),function(e){return i.hasOwnProperty(e)});a=a.sort();for(var n=0;n<a.length;n++)t.push(e(a[n],i[a[n]]));return t.join("&")},behavior.EventBase.prototype.hash=function(){return this.hash_?this.hash_:(this.hash_=optly.hashing.hashToHex(optly.hashing.toByteString(this.digest()),BEHAVIOR_EVENT_HASH_SEED),this.hash_)},behavior.EventBase.prototype.setHash=function(e){this.hash_=e},behavior.EventBase.prototype.reHash=function(){this.hash_=null,this.hash()},behavior.EventBase.prototype.equals=function(e){if(this.hash()!==e.hash())return!1;if(this[behavior.FIELDS.NAME]!==e[behavior.FIELDS.NAME]||this[behavior.FIELDS.TYPE]!==e[behavior.FIELDS.TYPE]||this[behavior.FIELDS.CATEGORY]!==e[behavior.FIELDS.CATEGORY]||this[behavior.FIELDS.REVENUE]!==e[behavior.FIELDS.REVENUE])return!1;if(!this[behavior.FIELDS.OPTIONS]&&!e[behavior.FIELDS.OPTIONS])return!0;var t=this[behavior.FIELDS.OPTIONS]||{},i=e[behavior.FIELDS.OPTIONS]||{},a=filter(keys(t),function(e){return t.hasOwnProperty(e)}),n=filter(keys(i),function(e){return i.hasOwnProperty(e)});if(a.length!==n.length)return!1;for(var r=0;r<a.length;r++){var o=a[r];if(!i.hasOwnProperty(o)||t[o]!==i[o])return!1}return!0},behavior.EventBase.prototype.getValueOrDefault=function(e,t){var i=getFieldValue(this,e);return isDefined(i)?i:t},behavior.EventBase.prototype.setFieldValue=function(e,t){e!==behavior.FIELDS.NAME&&e!==behavior.FIELDS.TYPE&&e!==behavior.FIELDS.CATEGORY&&e!==behavior.FIELDS.REVENUE&&e!==behavior.FIELDS.OPTIONS||(this[e]=t,this.reHash())},behavior.Event=function(e,t,i){this.eventBase=e,this[behavior.FIELDS.TIME]=t,isDefined(i)&&(this[behavior.FIELDS.SESSION_ID]=i)},behavior.Event.prototype.getValueOrDefault=function(e,t){if(0===e.length)return this;var i={};i[behavior.FIELDS.TIME]=this[behavior.FIELDS.TIME],i[behavior.FIELDS.SESSION_ID]=this[behavior.FIELDS.SESSION_ID];var a=getFieldValue(i,e);return isDefined(a)?a:this.eventBase.getValueOrDefault(e,t)},behavior.Event.prototype.setFieldValue=function(e,t){e===behavior.FIELDS.TIME||e===behavior.FIELDS.SESSION_ID?this[e]=t:this.eventBase.setFieldValue(e,t)},behavior.Policy.MILLIS_IN_30_MINS=18e5,behavior.Policy.isInSameSession=function(e,t){var i=e.getValueOrDefault([behavior.FIELDS.TIME],0),a=t.getValueOrDefault([behavior.FIELDS.TIME],0);return Math.abs(i-a)<behavior.Policy.MILLIS_IN_30_MINS},behavior.Policy.updateSessionId_unguarded=function(e,t){var i;i=behavior.Policy.isInSameSession(e,t)?e.getValueOrDefault([behavior.FIELDS.SESSION_ID]):t.getValueOrDefault([behavior.FIELDS.TIME]),t.setFieldValue(behavior.FIELDS.SESSION_ID,i)},behavior.Policy.updateSessionId=function(e,t){if(!e)return void t.setFieldValue(behavior.FIELDS.SESSION_ID,t.getValueOrDefault([behavior.FIELDS.TIME]));var i=e.getValueOrDefault([behavior.FIELDS.TIME]),a=e.getValueOrDefault([behavior.FIELDS.SESSION_ID]),n=t.getValueOrDefault([behavior.FIELDS.TIME]);i="number"!=typeof i?n-2*behavior.Policy.MILLIS_IN_30_MINS:i,a="number"!=typeof a?i:a,e=new behavior.Event(new behavior.EventBase("",""),i,a),behavior.Policy.updateSessionId_unguarded(e,t)},behavior.Policy.sessionize=function(e){var t=e.length;if(0!==t){e[0].setFieldValue(behavior.FIELDS.SESSION_ID,e[0].getValueOrDefault([behavior.FIELDS.TIME]));for(var i=1;i<t;i++)behavior.Policy.updateSessionId_unguarded(e[i-1],e[i])}},behavior.Policy.applyMigrations=function(e){return!1},behavior.Store={EVENTS_KEY:"events",EVENT_QUEUE_KEY:"event_queue",COMPACT_KEYS:{EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",DELTA:"d",INDEX:"i"},baseMap:{},events:[]},behavior.Store.initialize=function(){data.isBehaviorEnabled()&&behavior.Store.populatePersistedEvents()},behavior.Store.getEvents=function(){if(!data.isBehaviorEnabled())return[];0===behavior.Store.events.length&&behavior.Store.initialize();var e=behavior.Store.events;return e.slice(-behavior.Store.maxEvents)},behavior.Store.populatePersistedEvents=function(){var e=user.getUserData(behavior.Store.EVENTS_KEY)||[],t=user.getUserData(behavior.Store.EVENT_QUEUE_KEY)||[];behavior.Store.migrateEventsAndUpdateStore(e,t),behavior.Policy.sessionize(behavior.Store.events)},behavior.Store.migrateEventsAndUpdateStore=function(e,t){if(0===e.length&&0===t.length)return behavior.Store.events=[],!1;var i=!1,a=e[0]||t[0];return behavior.Store.COMPACT_KEYS.EVENTBASE in a?(e=behavior.Store.unCompact(e),t=behavior.Store.unCompact(t)):(i=!0,e=behavior.Store.migrateFromVerboseFormat(e),t=behavior.Store.migrateFromVerboseFormat(t)),behavior.Store.events=e.concat(t),behavior.Store.events.length>behavior.Store.maxEvents&&(behavior.Store.events=behavior.Store.events.slice(-behavior.Store.maxEvents),i=!0),behavior.Store.updateBaseMapAndMaybeDedupe(behavior.Store.events),behavior.Store.migrateEventBasesAndUpdateStore()&&(i=!0),i},behavior.Store.migrateFromVerboseFormat=function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],n=behavior.Store.makeEventBase(a);t[i]=new behavior.Event(n,a[behavior.FIELDS.TIME])}return t},behavior.Store.migrateEventBasesAndUpdateStore=function(){var e=!1,t=behavior.Store.getAllEventBases();return behavior.Policy.applyMigrations(t)&&(e=!0,behavior.Store.baseMap={},behavior.Store.updateBaseMapAndMaybeDedupe(behavior.Store.events)),e},behavior.Store.getTime=function(){return+new Date},behavior.Store.updateBaseMapAndMaybeDedupe=function(e){for(var t=0;t<e.length;t++)e[t].eventBase=behavior.Store.findOrSetEventBase(e[t].eventBase)},behavior.Store.findOrSetEventBase=function(e){var t=e.hash(),i=behavior.Store.baseMap[t];if("undefined"==typeof i)return behavior.Store.baseMap[t]=[e],e;for(var a=0;a<i.length;a++)if(e.equals(i[a]))return i[a];return i.push(e),e},behavior.Store.getAllEventBases=function(){var e=[];for(var t in behavior.Store.baseMap)behavior.Store.baseMap.hasOwnProperty(t)&&(e=e.concat(behavior.Store.baseMap[t]));return e},behavior.Store.CompactEB,behavior.Store.CompactTS,behavior.Store.CompactEvent,behavior.Store.makeEventBase=function(e,t){var i=new behavior.EventBase(e[behavior.FIELDS.NAME],e[behavior.FIELDS.TYPE],e[behavior.FIELDS.CATEGORY],e[behavior.FIELDS.OPTIONS],e[behavior.FIELDS.REVENUE]);return isDefined(t)&&i.setHash(t),i},behavior.Store.unCompact=function(e){for(var t=behavior.Store.COMPACT_KEYS,i=[],a=0;a<e.length;a++)for(var n=e[a],r=behavior.Store.makeEventBase(n[t.EVENTBASE],n[t.HASH]),o=n[t.TIMEBASE],s=n[t.TIMESTAMPS],c=0;c<s.length;c++){var d=s[c],l=new behavior.Event(r,o+d[t.DELTA]),u=d[t.INDEX];i[u]=l}return i},behavior.Store.usageInBytes=function(){var e=user.getUserData(behavior.Store.EVENTS_KEY)||[],t=user.getUserData(behavior.Store.EVENT_QUEUE_KEY)||[];return json.stringify(e).length+json.stringify(t).length},behavior.Store.maxEvents=1e3,behavior.getEvents=function(){try{return behavior.Store.getEvents()}catch(e){log("Behavior","Error "+e.toString()+" getting events")}return[]},behavior.usageInBytes=function(){return behavior.Store.usageInBytes()},behavior.getDefaultAttributes=function(){var e="visitor_profile",t=user.getUserData(e)||{};return t.defaultBehavior||{}},optly.client.rum.ENABLED=!0,optly.client.rum.MAX_CHARS_INTEGRATION_OAUTH_CLIENT_IDS=64,optly.client.rum.MAX_CHARS_APIS=1e3,optly.client.rum.RumCollector=function(){this.events={},this.apis={},this.inRumSample=Math.random()<data.rumSamplingRate(),geolocation.cdn3Requested&&(this.events.geoRequest=geolocation.cdn3Requested-optly.client.rum.timebase)},optly.client.rum.now=function(){return(new Date).getTime()-(optly.client.rum.timebase||0)},optly.client.rum.since=function(e){return e?(new Date).getTime()-e.getTime():0},optly.client.rum.timebase=optly.client.rum.now(),optly.client.rum.RumCollector.prototype.sendRum=optly.client.rum.ENABLED?function(){this.inRumSample&&tracker.makeRequest(this.createUrl(),null)}:goog.nullFunction,optly.client.rum.RumCollector.joinMaxLengthRandomly=optly.client.rum.ENABLED?function(e,t,i){for(var a=e.slice(),n=a.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1)),o=a[n];a[n]=a[r],a[r]=o}for(var s=a.join(t);s.length>i;)a.pop(),s=a.join(t);return s}:function(e,t,i){return""},optly.client.rum.RumCollector.prototype.createUrl=function(){return"https://rum.optimizely.com/rum?"+tracker.objectToQuery(this.getRum())},optly.client.rum.RumCollector.prototype.recordEvent=optly.client.rum.ENABLED?function(e){this.events[e]||(this.events[e]=optly.client.rum.now())}:function(e){},optly.client.rum.RumCollector.prototype.recordApi=optly.client.rum.ENABLED?function(e){this.apis[e]=!0}:goog.nullFunction,optly.client.rum.RumCollector.prototype.getRum=optly.client.rum.ENABLED?function(){var e={user:id.getOrGenerateId(),ppid:id.getPPID(),project:data.getProjectId(),revision:data.getRevision(),sync:optly.client.rum.syncInstall,timebase:optly.client.rum.timebase,render:optly.client.rum.firstRenderTime,sampleRate:data.rumSamplingRate(),numExps:evaluator.getActiveExperimentIds().length,numBehaviorEvents:behavior.getEvents().length,behaviorEventsSize:behavior.usageInBytes(),oldestBehaviorEventAge:optly.client.rum.since(optly.client.rum.getOldestBehaviorEventDate()),integrationOAuthClientIds:optly.client.rum.RumCollector.joinMaxLengthRandomly(api.getOAuthClientIds(),",",optly.client.rum.MAX_CHARS_INTEGRATION_OAUTH_CLIENT_IDS),codeVersion:data.getVersion(),hasSlave:data.hasSlave(),docVisibilityState:tracker.getDocumentVisibilityState(),wxhr:!0,apis:optly.client.rum.RumCollector.joinMaxLengthRandomly(keys(this.apis),"!",optly.client.rum.MAX_CHARS_APIS)};extend(e,optly.client.rum.getResourceTiming()||{}),extend(e,this.events),extend(e,optly.client.rum.getCookieData()||{});var t={};return each(optly.client.storage.localStorage.metrics()||{},function(e,i){t["ls"+e]=i}),extend(e,t),e}:function(){return{}},optly.client.rum.syncInstall=optly.client.rum.ENABLED?function(){try{return!document.getElementsByTagName("body")[0]}catch(e){return null}}():null,optly.client.rum.firstRenderTime=null,optly.client.rum.ENABLED&&function(){try{window.requestAnimationFrame(function(){optly.client.rum.firstRenderTime=optly.client.rum.now()})}catch(e){}}(),optly.client.rum.getOldestBehaviorEventDate=function(){try{var e=window.optimizely.get("behavior"),t=e.getEvents();return t[0].timestamp}catch(i){}},optly.client.rum.getCookieData=optly.client.rum.ENABLED?function(){var e=[AUDIENCE_COOKIE_NAME,BUCKET_COOKIE_NAME,CUSTOM_EVENTS_COOKIE_NAME,PENDING_LOG_EVENTS_COOKIE_NAME,REFERRER_REDIRECT_COOKIE_NAME,SEGMENTS_COOKIE_NAME],t={},i=0,a=0;return each(cookie.getAll(),function(n){0===n.name.indexOf("optimizely")&&(arrayContains(e,n.name)&&(timer.addEvent("RUM","Cookie size for "+n.name+": "+n.raw.length),t[n.name+"Len"]=n.raw.length),i+=n.raw.length),a+=n.raw.length}),extend(t,{allOptimizelyCookiesLen:i,allCookiesLen:a}),t}:goog.nullFunction,optly.client.rum.resourceRegex=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi,optly.client.rum.getResourceTiming=optly.client.rum.ENABLED?function(){var e,t=null;try{e=filter(window.performance.getEntries(),function(e){return!!optly.client.rum.resourceRegex.test(e.name)})[0]}catch(i){return t}if(e){t={};for(var a in e)"number"==typeof e[a]&&0!==e[a]&&(t[a]=e[a])}return t}:goog.nullFunction,optly.client.rum.instance=new optly.client.rum.RumCollector,distributor.distributeAll=function(){optly.client.rum.instance.recordEvent("distributeExperiments"),each(data.getExperimentIds(),function(e){if(!evaluator.isInQueue(e))if(data.isExperimentConditionallyActivated(e))distributor.configureConditionalModeExperiment(e);else if(condition.isReadyToTest(e)){if(condition.test(e,{objectType:"experiment"})){timer.addEvent("Distributor","Going to distribute "+data.getExperimentString(e));var t=distributor.distributeExperiment(e);t&&evaluator.enqueue(e)}}else data.isExperimentManuallyActivated(e)||arrayContains(evaluator.getEvaluatedExperimentIds(),e)||activator.addDelayedExperiment(e)})},distributor.distributeExperiment=function(e,t){t=t===!0;var i=plan.getVariationId(e);if(i&&i.length>0)return timer.addEvent("Distributor","Not distributing experiment "+e+" (already in plan)"),!0;if(t||plan.isExperimentIgnored(e))return timer.addEvent("Distributor","Not distributing experiment "+e+" (is ignored)"),optly.client.preview.Logger.setReason(e,"it is ignored"),!1;var a=data.getEnabledVariationIds(e);if(0===a.length)return timer.addEvent("Distributor","Permanently ignoring experiment "+e+" (no enabled variations)"),optly.client.preview.Logger.setReason(e,"it has no enabled variations"),plan.ignoreExperiment(e),!1;var n=data.getExperimentIgnorePercentage(e);if(n>distributor.randomForIgnoring(e))return timer.addEvent("Distributor","Permanently ignoring experiment "+e+"("+n/100+"% likelihood)"),plan.ignoreExperiment(e),!1;var r=a;void 0!==distributor.preferredBucketUserMapping[e]&&(timer.addEvent("Distributor","Taking into account bucketUser variations for experiment "+e),r=distributor.getPotentialPreferredMVTVariations(e));var o=distributor.pickRandomVariationIndex(e,r),s=r[o];return timer.addEvent("Distributor","Picked variation "+s+" [index "+o+" of "+a.length+"]"),plan.addVariation(s,"distributor",!1),!0},distributor.configureConditionalModeExperiment=function(e,t){t=t||{},timer.addEvent("Distributor","Configuring conditionally-activated experiment: "+e),api.conditionallyActivatedExperiments[e]?timer.addEvent("Distributor","Not configuring conditionally-activated experiment (already done): "+e):data.isExperimentEnabled(e)||t.force===!0?(distributor.runConditionalCode(e,t),api.isFinalized&&api.setPublicObjects()):timer.addEvent("Distributor","Not configuring conditionally-activated experiment (not enabled): "+e)},distributor.runConditionalCode=function(experimentId,options){var code=data.getConditionalActivationCode(experimentId),pollingType=!0,conditionalFunction,conditionalCodeResult;if("function"==typeof code)pollingType=!1,conditionalFunction=code;else try{var evalString="("+code+")";conditionalCodeResult=eval("(function() {return "+evalString+";})()"),"function"==typeof conditionalCodeResult&&(pollingType=!1,conditionalFunction=conditionalCodeResult)}catch(error){}var activationOptions={isActive:!1,experimentId:experimentId},activationFunction=function(){activator.activate(api.visitor,experimentId,options),activationOptions.isActive=arrayContains(evaluator.getActiveExperimentIds(),experimentId),timer.addEvent("Distributor","Activating conditionally activated experiment "+experimentId)};if(pollingType){var testOptions={objectType:"experiment",enabledStatus:options.enabledStatus};if(options.force||!condition.isReadyToTest(experimentId)||condition.test(experimentId,testOptions)){var pollForReady=function(){condition.isReadyToTest(experimentId)&&(condition.testCodeResult(null,{value:code})||conditionalCodeResult)?activationFunction():setTimeout(pollForReady,EVALUATION_WAIT_INTERVAL)};pollForReady(),timer.addEvent("Distributor","Set up conditional polling for "+experimentId),api.conditionallyActivatedExperiments[experimentId]=!0}}else try{conditionalFunction(activationFunction,activationOptions),timer.addEvent("Distributor","Set up conditional callback for "+experimentId),api.conditionallyActivatedExperiments[experimentId]=!0}catch(error){timer.addEvent("Distributor","Error running conditional callback function for "+experimentId)}},distributor.getBucketingId=function(){return id.getPPID()||id.getOrGenerateId()},distributor.randomForIgnoring=function(e){return optly.hashing.hashToInt(distributor.getBucketingId(),e,optly.hashing.HashSeed.IGNORING,1e4)},distributor.randomForBucketing=function(e){return optly.hashing.experimentUserHash(distributor.getBucketingId(),e,optly.hashing.HashSeed.BUCKETING)},distributor.getRandomBucketAsFallback=function(e,t){return optly.hashing.hashToInt(distributor.getBucketingId(),e,optly.hashing.HashSeed.FALLBACK,t)},distributor.pickRandomVariationIndex=function(e,t){var i=[],a=data.getExperimentVariationWeights(e);return each(t,function(e){i.push(a[e])}),distributor.chooseWeightedIndex(e,i)},distributor.chooseWeightedIndex=function(e,t){var i=t.length;if(0===i)return null;if(1===i)return 0;for(var a=0,n=0;n<i;n++)a+=t[n];for(var r=distributor.randomForBucketing(e)*a,n=0;n<i;n++){if(r<t[n])return n;r-=t[n]}return distributor.getRandomBucketAsFallback(e,i)},distributor.preferMVTVariation=function(e,t){var i=data.getExperimentVariationSectionId(e,t);distributor.preferredBucketUserMapping[e]=distributor.preferredBucketUserMapping[e]||{},distributor.preferredBucketUserMapping[e][i]=t,timer.addEvent("Distributor","Preferring variation partial "+t+" of section "+i+" of experiment "+e);var a=distributor.getPotentialPreferredMVTVariations(e);1===a.length&&plan.addVariation(a[0],"api.bucketUser",!1,!0)},distributor.getPotentialPreferredMVTVariations=function(e){var t=[];return each(data.getEnabledVariationIds(e),function(i){distributor.containsPreferredMVTVariations(e,i)&&t.push(i)}),t},distributor.containsPreferredMVTVariations=function(e,t){var i=!0;for(var a in distributor.preferredBucketUserMapping[e]){var n=distributor.preferredBucketUserMapping[e][a];t.indexOf(n)===-1&&(i=!1)}return i},distributor.preferredBucketUserMapping={},dcp.alias=function(e){var t=data.getDCPServiceId();if(null!==t){var i=dcp.getAliases(data.getDCPKeyfieldLocators());if(!i.optlyDatasource)return void timer.addEvent("DCP","Must specify Optimizely datasource in alias");if(0===i.otherDatasources.length)return void timer.addEvent("DCP","Must specify at least one non-Optimizely datasource to alias");if(dcp.maybeInvalidateCachedResults(e)){var a=dcp.makeAliasURLPath(t,i.optlyDatasource.datasourceId,i.optlyDatasource.id);dcp.postAliasRequest(a,i.otherDatasources,e)}else timer.addEvent("DCP","Duplicate alias request; skipping.")}},dcp.aliasDescriptor,dcp.getAliases=function(e){for(var t=null,i=[],a=0;a<e.length;a++){var n=e[a],r=n.dcp_datasource_id||null,o=n.is_optimizely||!1,s=n.type,c=n.name||"";if(null!==r){var d=null;if(s===dcp.keyFieldLocatorType.COOKIE?d=condition.facade.getCookie(c):s===dcp.keyFieldLocatorType.JS_VARIABLE?d=condition.facade.getJSVariable(c):s===dcp.keyFieldLocatorType.QUERY_PARAM?d=condition.facade.getQueryParameter(c):s===dcp.keyFieldLocatorType.UID&&(d=dcp.getUID()),isNumberLike(d)||"string"==typeof d){var l={datasourceId:r,id:d};o?t=l:i.push(l)}}else timer.addEvent("DCP","No DCP datasource id specified")}return{optlyDatasource:t,otherDatasources:i}},dcp.getUID=distributor.getBucketingId,dcp.makeAliasURLPath=function(e,t,i){return map([e,t,i],encodeURIComponent).join("/")},dcp.maybeInvalidateCachedResults=function(e){var t=dcp.getAliases(data.getDCPKeyfieldLocators()),i=e.get()||{},a=i.aliases||{};return!dcp.isAlreadyAliased(t.otherDatasources,a)&&(i.rulesResults=null,e.set(i),!0)},dcp.makeTargetingURL=function(e){var t=dcp.getAliases(data.getDCPKeyfieldLocators());if(!t.optlyDatasource||!t.optlyDatasource.datasourceId)return timer.addEvent("DCP","No Optimizely datasource found in data."),null;var i=t.optlyDatasource.datasourceId,a=t.optlyDatasource.id,n=map([data.getProjectId().toString(),i,a],encodeURIComponent),r=[dcp.BASE_URLS.TARGETING].concat(n).join("/"),o=e.get()||{},s=o.aliases||{};if(!dcp.isAlreadyAliased(t.otherDatasources,s)){var c=map(t.otherDatasources,function(e){return encodeURIComponent(e.datasourceId)+"="+encodeURIComponent(e.id)});r+="?"+c.join("&")}return r},dcp.isAlreadyAliased=function(e,t){return t=t||{},every(e,function(e){var i=e.datasourceId;return t[i]===e.id})},dcp.getUpdatedAliasData=function(e,t){return t=t||{},each(e,function(e){t[e.datasourceId]=e.id}),t},dcp.postAliasRequest=function(e,t,i){try{var a=new XMLHttpRequest,n=[dcp.BASE_URLS.ALIAS,e].join("/");a.open("POST",n),"withCredentials"in a&&(a.withCredentials=!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8");var r={};each(t,function(e){r[e.datasourceId]=e.id}),a.onerror=function(){timer.addEvent("DCP","Failed to POST alias request")},a.onload=function(){if(a.status>=200&&a.status<300){var e=i.get()||{},n=e.aliases||{};e.aliases=dcp.getUpdatedAliasData(t,n),i.set(e)}else timer.addEvent("DCP","Alias POST failed with",a.statusText)},a.send(json.stringify({data:r}))}catch(o){timer.addEvent("DCP","Exception %s trying to POST alias request",o)}},dcp.BASE_URLS={ALIAS:"https://vis.optimizely.com/api/alias",TARGETING:"https://tapi.optimizely.com/api/targetingEmbed"},dcp.keyFieldLocatorType={COOKIE:"cookie",JS_VARIABLE:"js_variable",QUERY_PARAM:"query_param",UID:"uid"},asyncRequest.makeDynamicCustomerProfileTargetingRequest=function(){dcp.maybeInvalidateCachedResults(asyncInfo.dcpCache);var e=dcp.makeTargetingURL(asyncInfo.dcpCache);null!==e&&loadScript(e)},asyncRequest.makeListTargetingRequest=function(){loadScript(asyncRequest.getListTargetingUrl())},asyncRequest.getListTargetingUrl=function(){var e=asyncRequest.URLS.ODDS,t={};each(data.getListTargetedKeys(),function(e,i){var a=asyncRequest.getCurrentValueForListTargetedKey(i);"string"==typeof a&&(t[i]=a)}),t.project=data.getProjectId().toString();var i=[];for(var a in t)t.hasOwnProperty(a)&&i.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return i.length&&(e+="?"+i.join("&")),e},asyncRequest.getCurrentValueForListTargetedKey=function(e){if(!asyncRequest.isListTargetedKeyWithVariableValue(e))return timer.addEvent("Async Request","Can't determine a value for this list-targeted key: "+e),null;var t=e.split("_"),i=t[0],a=t.slice(1).join("_"),n=void 0;if("c"===i)n=condition.facade.getCookie(a);else if("j"===i)n=condition.facade.getJSVariable(a);else{if("q"!==i)return timer.addEvent("Async Request","Can't determine a value for this list-targeted key: "+e),null;n=condition.facade.getQueryParameter(a)}return"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n?null===n||"undefined"==typeof n?(timer.addEvent("Async Request","No value is set for this list-targeted key: "+e),null):(timer.addEvent("Async Request","Unacceptable value (must be string, number, or boolean) for this list-targeted key: "+e),null):(n=n.toString(),n.length>100?(timer.addEvent("Async Request","Withholding the overlong value for this list-targeted key: "+e),null):(timer.addEvent("Async Request","Returning a value for this list-targeted key: "+e),n))},asyncRequest.isListTargetedKeyWithVariableValue=function(e){if(containsString(e,"_")){var t=e.split("_")[0];return arrayContains(["c","j","q"],t)}return!1},asyncRequest.KeyValue,asyncRequest.URLS={ODDS:"https://odds.optimizely.com/js/geo2.js"},preview_loader.loadPreview=function(){window.optimizelyPreview||(window[GLOBAL]&&window[GLOBAL].unshift||(window[GLOBAL]=[]),window[GLOBAL].unshift(["verifyPreviewProject",data.getProjectId()]),loadScript([preview_loader.HOST,preview_loader.PATH,directive.previewScriptName,".js"].join(""),!0),directive.shouldLoadPreview&&preview_loader.loadSplashScreen('Loading Preview<br /><img alt="loading" src="//'+data.getWebHost()+'/static/img/loading-32.gif" style="padding-top:20px; width: 32px; margin: 0 auto;" />'))},preview_loader.loadSplashScreen=function(e){if(0===$("body").length)return void setTimeout(function(){preview_loader.loadSplashScreen(e)},20);var t='<div id="optimizely-loading" style="position:absolute;top:0;right:0;left:0;bottom:0;background-color:white;opacity:0.9;z-index: 3271000;"><h2 style="color:#9a9a9a;top:40%;position:absolute;font-size:2.25em;text-align:center;width:100%;font-family:\'Lucida Grande\',sans-serif;">';t=t+e+"</h2></div>",$("#optimizely-loading").remove(),$("body").append(t)},preview_loader.HOST=data.getPreviewHost(),preview_loader.PATH="/js/preview/",query.getAllParameters=function(){var e=window.location.search||"";0===e.indexOf("?")&&(e=e.substring(1));for(var t=e.split("&"),i=[],a=0;a<t.length;a++){var n="",r="",o=t[a].split("=");o.length>0&&(n=o[0]),o.length>1&&(r=o[1]),i.push([n,r])}return i},query.getParameters=function(e){for(var t,i=/optimizely_([^=]+)=([^&]*)/g,a={};t=i.exec(e);)a[t[1]]=t[2];return a},query.getValue=function(e,t){t=t||query.getAllParameters();for(var i=0;i<t.length;i++){var a=t[i];if(a[0]===e){var n=a[1];return n=n.replace(/\+/g," "),safeDecodeUriComponent(n)}}return null},query.FORCE_PARAMETERS_REGEX=/x(\d+)/,query.processForceParameters=function(){var e=!optly.client.preview.ENABLED&&!data.isForceVariationEnabled(),t=query.getParameters(window.location.search);each(t,function(t,i){var a=query.FORCE_PARAMETERS_REGEX.exec(t);if(a){if(e)return directive.requestedInvalidForceParameters=!0,void log("Query","Ignored parameter %s",t);var n=a[1];api.bucketUser(n,i,!0),data.isExperimentConditionallyActivated(n)?distributor.configureConditionalModeExperiment(n,{force:!0,skipPageviewTracking:!0}):condition.test(n,{})||activator.activate(api.visitor,n,{force:!0,skipPageviewTracking:!0})}})},query.process=function(){var e=query.getParameters(window.location.search),t=!1;for(var i in e)if(query.FORCE_PARAMETERS_REGEX.exec(i)){t=!0;break}"true"!==e.opt_out&&"false"!==e.opt_out||tracker.optOut("true"===e.opt_out),directive.forceTracking="true"===e.force_tracking,"true"===e.disable||"true"===e.opt_out||tracker.isOptedOut()?(directive.isEnabled=!1,directive.isNewClientEnabled=!1):"classic"===e.disable?directive.isEnabled=!1:"new"===e.disable&&(directive.isNewClientEnabled=!1),directive.isEditor="true"===e.editor,directive.isPersonalizationEditor="true"===e.p13n,directive.shouldLoadPreview="true"===e.show_preview;var a=window.optlyDesktop;directive.isDesktopAppEditor=a&&isDefined(a.p13nInner);var n=cookie.get(TOKEN_COOKIE_NAME);n&&cookie.set(TOKEN_COOKIE_NAME,n,TOKEN_COOKIE_KEEP_ALIVE);var r=e.token||n;data.getInsecurePreview()&&r?directive.previewScriptName="public/"+data.getProjectId():/^[0-9a-f]{64}$/.test(r)?directive.previewScriptName=r:/^[0-9a-f]{32}$/.test(r)?(timer.addEvent("Query","Using legacy MD5 token"),directive.previewScriptName=r):(cookie.remove(TOKEN_COOKIE_NAME),timer.addEvent("Query","Blocked request to load unsafe script: "+r)),directive.shouldLog="true"===e.log,directive.shouldLogVerbosely="true"===e.verbose,directive.shouldTrackEvents=!(directive.shouldLoadPreview||t)||directive.forceTracking},optly.nativity.getNativeGetElementsByClassName=function(){var e=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(e)){var t=window.optimizely||{},i=t.getElementsByClassName,a=window.optly||{},n=a.getElementsByClassName;e=optly.nativity.isNativeFunction(i)?i:optly.nativity.isNativeFunction(n)?n:null}return e},optly.nativity.isNativeFunction=function(e){return e&&String(e).indexOf("[native code]")!==-1},segmenter.initialize=function(e){var t=e||visitor;segmenter.loadSegmentsCookie(t),activator.tryToEvaluateSegments(data.getSegmentIds()),segmenter.addChangeHandler(segmenter.saveSegmentsCookie),segmenter.callChangeHandlers(),integrator.loadThirdPartySegments(t)},segmenter.loadSegmentsCookie=function(e){timer.addEvent("Segmenter","Loading segments cookie.");var t=cookie.get(SEGMENTS_COOKIE_NAME);if(t){try{t=json.parse(t)}catch(i){t={}}each(t,function(t,i){var a=data.getSegment(t);timer.addEvent("Segmenter","Segments cookie contains segment id: "+t),a&&a.audience_id?e.addToAudience(a.audience_id):a&&a.dimension_id?e.setDimensionValue(a.dimension_id,i,!1):segmenter.visitorSegments[t]=i})}},segmenter.saveSegmentsCookie=function(){var e={};each(segmenter.visitorSegments,function(t,i){i&&(e[t]=i)}),cookie.set(SEGMENTS_COOKIE_NAME,json.stringify(e),directive.trackingCookieExpiration)},segmenter.addChangeHandler=function(e){segmenter.changeHandlers.push(e);
},segmenter.addToSegment=function(e,t){e&&!isNaN(parseInt(e,10))?(t||""===t||(t=!0),segmenter.visitorSegments[e]=t,segmenter.callChangeHandlers()):timer.addEvent("Segmenter","Unable to find segment for ID: "+e)},segmenter.callChangeHandlers=function(){each(segmenter.changeHandlers,function(e){e()})},segmenter.evaluateSegment=function(e){timer.addEvent("Segmenter","Evaluating Segment "+e),segmenter.tellPreviewAboutSegment(e,"add");var t=segmenter.evaluateSegmentValue(e);null!==t&&segmenter.addToSegment(e,t)},segmenter.evaluateSegmentValue=function(e){if(data.getSegmentAPIOnly(e))return null;var t=data.getSegmentValueType(e),i=null,a=null;switch(t){case"browser":i=condition.facade.getBrowserId(),a="unknown";break;case"campaign":i=condition.facade.getCampaign(),a="none";break;case"country":i=condition.facade.getLocation().country,a="unknown";break;case"language":i=condition.facade.getBrowserLanguage(),a="none";break;case"mobile":i=condition.facade.isMobile();break;case"os":i=condition.facade.getPlatform().id,a="unknown";break;case"referrer":i=condition.facade.getReferringDomain(),a="none";break;case"source_type":i=condition.facade.getSourceType(),a="direct";break;default:return"true"}if(null===i){if(segmenter.visitorSegments.hasOwnProperty(e))return null;i=a}return segmenter.standardizeValue(i)},segmenter.getSourceType=function(){var e=condition.facade.getReferrer();if(condition.facade.getQueryParameter("utm_source")||condition.facade.getQueryParameter("utm_campaign")||condition.facade.getQueryParameter("gclid")||condition.facade.getQueryParameter("otm_source"))return"campaign";for(var t=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","https://(www\\.)?google\\..*?/$","http(s)?://www\\.bing\\.\\w{2,3}(\\.\\w{2,3})?/","r\\.search\\.yahoo\\.\\w{2,3}(\\.\\w{2,3})?/","baidu\\.\\w{2,3}(\\.\\w{2,3})?/"],i=0;i<t.length;i++){var a=t[i];try{var n=e.match(a);if(n)return"search"}catch(r){log("Segmenter","%s: %s while matching %s",r.name,r.message,a)}}return e&&user.getDomain(e)!==user.getDomain(condition.facade.getCurrentUrl())?"referral":null},segmenter.getSegmentsList=function(){var e=[];return each(segmenter.visitorSegments,function(t,i){i&&e.push(t)}),e},segmenter.getSegmentTrackingData=function(){var e={};return each(segmenter.visitorSegments,function(t,i){i&&(e[String(t)]=i)}),e},segmenter.getSegmentValue=function(e){return segmenter.visitorSegments[e]},segmenter.getSegmentValueFromType=function(e){return each(segmenter.visitorSegments,function(t,i){if(data.getSegmentValueType(t)==e)return i})},segmenter.reset=function(){segmenter.visitorSegments={}},segmenter.handleOfflineSegmentResponse=function(e){var t;for(t in e.map)log("Segmenter","Offline segment request returned: %s, %s",t,e.map[t]),segmenter.addToSegment(t,e.map[t])},segmenter.removeFromSegment=function(e,t){var i=data.getSegmentIdByIdentifier(e)||e;segmenter.visitorSegments[i]?(segmenter.visitorSegments[i]=!1,("undefined"==typeof t||t)&&segmenter.callChangeHandlers()):timer.addEvent("Segmenter","Not removing "+e+", not found")},segmenter.standardizeValue=function(e,t,i){return t=!isDefined(t)||t,i=i||segmenter.MAX_VALUE_LENGTH,e=safeDecodeUriComponent(e),e=String(e),t&&(e=e.toLowerCase()),e=e.substring(0,i),encodeURIComponent(e)},segmenter.tellPreviewAboutSegment=optly.client.preview.ENABLED?function(e,t){var i="add"===t?"adding":"removing",a="add"===t?"to":"from",n=optly.client.preview.Logger.getReason(e);n?(optly.client.preview.Logger.addEvent("Not "+i+" visitor "+a+" segment "+data.getSegmentName(e)+" because "+n+".",{type:"explanation"}),optly.client.preview.Logger.deleteReason(e)):optly.client.preview.Logger.addEvent("Segment "+t+" condition matches, "+i+a+" segment "+data.getSegmentName(e),{type:"explanation"})}:goog.nullFunction,segmenter.changeHandlers=[],segmenter.visitorSegments={},segmenter.MAX_VALUE_LENGTH=20,optly.client.Facade=function(){},extend(optly.client.Facade.prototype,{getBrowserId:user.getBrowserId,getBrowserVersion:user.getBrowserVersion,getMobileId:user.getMobileId,isMobile:user.isMobile,getBrowser:function(){return{id:this.getBrowserId(),version:this.getBrowserVersion(),mobileId:this.getMobileId()}},getCampaign:function(){return this.getQueryParameter("utm_campaign")},getCookie:cookie.get,getDevice:user.getDevice,getIP:asyncInfo.getIP,getJSVariable:function(e){try{return window[e]}catch(t){return null}},getBehaviorEvents:behavior.getEvents,getBrowserLanguage:user.getBrowserLanguage,getDefaultBehaviorAttributes:behavior.getDefaultAttributes,getLocation:asyncInfo.getLocation,getCurrentUrl:user.getCurrentUrl,getNewVsReturning:user.getNewVsReturning,getIsFirstSession:user.isFirstSession,getAllQueryParameters:query.getAllParameters,getPlatform:user.getPlatform,getReferrer:user.getReferrer,getThirdPartyData:function(e){var t=e.split("."),i=t[0],a=t.slice(1);return integrator.getThirdPartyData(i,a)},hasPPID:id.hasPPID,getReferringDomain:function(){return user.getDomain(this.getReferrer())},getSegmentsList:segmenter.getSegmentsList,getSourceType:segmenter.getSourceType,getDocumentReferrer:function(){return document.referrer},getQueryParameter:function(e){return query.getValue(e,this.getAllQueryParameters())},getCustomTags:function(){return api.customTags},getCustomTagValue:function(e){return(this.getCustomTags()||{})[e]},getTriggeredCustomEvents:function(){var e=optly.client.storage.localStorage.get(CUSTOM_EVENTS_STORAGE_NAME)||{},t=e[id.getOrGenerateId()]||[];return isArrayLike(t)?t:[]},hasSegment:function(e){var t=this.getSegmentsList();return arrayContains(t,e)},triggeredCustomEvent:function(e){return arrayContains(this.getTriggeredCustomEvents(),e)},getDate:function(){return new Date},getListMembershipStatus:asyncInfo.getListMembershipStatus,getDynamicCustomerProfileConditions:asyncInfo.getDynamicCustomerProfileConditions}),condition.facade=new optly.client.Facade,rules.Rule,rules.getValueOrDefault=function(e,t,i){if(e.getValueOrDefault)return e.getValueOrDefault(t,i);var a=getFieldValue(e,t);return"undefined"==typeof a&&(a=i),a},rules.maybeTrimLowerCase=function(e){return"string"==typeof e?trim(e).toLowerCase():e},rules.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",LIMIT:"limit",FROM:"from"},rules.DEFAULT_FIELD=["*"],rules.booleanOperators={eq:function(e){var t=map(e,rules.maybeTrimLowerCase);return t[0]==t[1]},is:function(e){return e[0]===e[1]},gt:function(e){return e[0]>e[1]},lt:function(e){return e[0]<e[1]},gte:function(e){return e[0]>=e[1]},lte:function(e){return e[0]<=e[1]},"in":function(e){var t=map(e[1]||[],rules.maybeTrimLowerCase);return arrayContains(t,rules.maybeTrimLowerCase(e[0]))},between:function(e){return e[1]<=e[0]&&e[0]<=e[2]},contains:function(e){var t=map(e,function(e){return"string"==typeof e?e.toLowerCase():e});return(t[0]||"").indexOf(t[1])!==-1},regex:function(e){try{var t,i;return"string"==typeof e[1]?(t=e[1],i="i"):(t=e[1][0]||"",i=e[1][1]||""),new RegExp(t,i).test(e[0])}catch(a){return log("Rules",'In operator "regex", error: '+(a.message||"invalid RegExp /"+[t,i].join("/"))),!1}},exists:function(e){return"undefined"!=typeof e[0]},and:function(e){return every(e,function(e){return e})},or:function(e){return any(e,function(e){return e})},not:function(e){return!e[0]}},rules.arithmeticOperators={"+":function(e){return(e[0]||0)+(e[1]||0)},"-":function(e){return(e[0]||0)-(e[1]||0)},"/":function(e){return(e[0]||0)/(e[1]||1)},"%":function(e){return(e[0]||0)%(e[1]||1)}},rules.aggregateOperators={sum:function(e,t){for(var i=e[0]||rules.DEFAULT_FIELD,a=0,n=0;n<t.length;n++)a+=rules.getValueOrDefault(t[n],i,0);return a},avg:function(e,t){if(0==t.length)return 0;for(var i=e[0]||rules.DEFAULT_FIELD,a=0,n=0;n<t.length;n++)a+=rules.getValueOrDefault(t[n],i,0);return a/t.length},max:function(e,t){for(var i=e[0]||rules.DEFAULT_FIELD,a=Number.NEGATIVE_INFINITY,n=0;n<t.length;n++)a=Math.max(a,rules.getValueOrDefault(t[n],i,Number.NEGATIVE_INFINITY));return a},min:function(e,t){for(var i=e[0]||rules.DEFAULT_FIELD,a=Number.POSITIVE_INFINITY,n=0;n<t.length;n++)a=Math.min(a,rules.getValueOrDefault(t[n],i,Number.POSITIVE_INFINITY));return a},count:function(e,t){return t.length}},rules.functions={now:function(){return+new Date}},rules.getScalarOperator=function(e){return e in rules.booleanOperators?rules.booleanOperators[e]:e in rules.arithmeticOperators?rules.arithmeticOperators[e]:null},rules.operate=function(e,t){if(t.hasOwnProperty("value"))return t.value;if(t.hasOwnProperty("field"))return rules.getValueOrDefault(e,t.field);if(t.hasOwnProperty("eval"))return t.eval in rules.functions?rules.functions[t.eval]():void log("Rules","Unknown function: "+t.eval);if(!t.op)return void log("Rules","No operator specified: "+json.stringify(t));var i=rules.getScalarOperator(t.op);if(!i)return void log("Rules","Unknown operator: "+t.op);var a=goog.partial(rules.operate,e),n=t.args||[],r=map(n,function(e){return a(e)});return i(r,e)},rules.DEFAULT_GROUP_BY_VALUE="_",rules.groupBy=function(e,t){if("undefined"==typeof e||!isArrayLike(e)||0===e.length){var i={},a={};return a[rules.DEFAULT_FIELD]=rules.DEFAULT_GROUP_BY_VALUE,i[rules.DEFAULT_FIELD+"="+rules.DEFAULT_GROUP_BY_VALUE]={fieldValues:a,events:t},i}for(var n=map(e,function(e){return e.field}),r={},o=0;o<t.length;o++){for(var s=t[o],c=[],d={},l=0;l<n.length;l++){var u=n[l],p=rules.getValueOrDefault(s,u,rules.DEFAULT_GROUP_BY_VALUE),g=u.join(".");d[g]=p,c.push(encodeURIComponent(g)+"="+encodeURIComponent(String(p)))}var m=c.join("&");r.hasOwnProperty(m)||(r[m]={fieldValues:d,events:[]}),r[m].events.push(s)}return r},rules.generateAlias=function(e,t){return"_"+e+"_"+t.join(".")},rules.aggregate=function(e,t){var i={};return each(t,function(t,a){i[t]={};for(var n=0;n<e.length;n++){var r=e[n],o=r.op;if(o in rules.aggregateOperators){var s=(r.args&&r.args[0]||{}).field||rules.DEFAULT_FIELD,c=rules.generateAlias(o,s),d=rules.aggregateOperators[o]([s],a.events);i[t][c]=d}else log("Rules","Unknown aggregate operator "+o)}}),i},rules.project=function(e,t){var i=[];return each(e,function(e,a){var n=extend({},a.fieldValues),r=t[e]||{};extend(n,r),i.push(n)}),i},rules.orderBy=function(e,t){return isArrayLike(e)?0==e.length?t:t.sort(function(t,i){for(var a=0;a<e.length;a++){var n=e[a],r=n.direction||"ASC",o="ASC"===r?1:-1,s=n.field,c=rules.getValueOrDefault(t,s,0),d=rules.getValueOrDefault(i,s,0);if(c<d)return-o;if(c>d)return o}return 0}):(log("Rules","groupBy rule must be an array"),t)},rules.rewrite=function(e){function t(e,n){if(isArrayLike(e)&&("and"!==e[0]&&"or"!==e[0]&&"not"!==e[0]&&log("Rules","Unexpected operation "+e[0]+". Continuing optimistically."),e={op:e[0],args:e.slice(1)}),e.hasOwnProperty("field")||e.hasOwnProperty("value")||e.hasOwnProperty("eval"))return e;if(n&&e.op in rules.aggregateOperators){var r=(e.args&&e.args[0]||{}).field||rules.DEFAULT_FIELD,o=rules.generateAlias(e.op,r);return o in a||(i.push({op:e.op,args:e.args}),a[o]=!0),{field:[o]}}for(var s=[],c=e.args||[],d=0;d<c.length;d++)s[d]=t(c[d],n);return{op:e.op,args:s}}var i=[],a={},n={};e.hasOwnProperty(rules.clause.WHERE)&&(n[rules.clause.WHERE]=t(e[rules.clause.WHERE],!1)),e.hasOwnProperty(rules.clause.HAVING)&&(n[rules.clause.HAVING]=t(e[rules.clause.HAVING],!0)),(e.hasOwnProperty(rules.clause.AGGREGATE)||i.length>0)&&(n[rules.clause.AGGREGATE]=(e[rules.clause.AGGREGATE]||[]).concat(i));for(var r=[rules.clause.GROUP_BY,rules.clause.ORDER_BY,rules.clause.SELECT,rules.clause.LIMIT],o=0;o<r.length;o++)e.hasOwnProperty(r[o])&&(n[r[o]]=e[r[o]]);return e.hasOwnProperty(rules.clause.FROM)&&(n[rules.clause.FROM]=rules.rewrite(e[rules.clause.FROM])),n},rules.verify=function(e,t){t=t||0;var i=[];if(e.hasOwnProperty(rules.clause.WHERE)?e[rules.clause.WHERE].op?e[rules.clause.WHERE].op in rules.booleanOperators||i.push("Non-boolean WHERE clause operator"):i.push("Missing WHERE clause operator"):i.push("Missing WHERE clause"),e.hasOwnProperty(rules.clause.HAVING)&&(e[rules.clause.HAVING].op?e[rules.clause.HAVING].op in rules.booleanOperators||i.push("Non-boolean HAVING clause operator"):i.push("Missing HAVING clause operator")),e.hasOwnProperty(rules.clause.GROUP_BY)&&!e.hasOwnProperty(rules.clause.AGGREGATE)&&i.push("No AGGREGATE clause specified with GROUP_BY clause"),e.hasOwnProperty(rules.clause.SELECT)){var a=e[rules.clause.SELECT];if(isArrayLike(a))for(var n=0;n<a.length;n++)a[n].op&&a[n].op in rules.aggregateOperators&&i.push('In SELECT clause, aggregate operator "'+a[n].op+'" specified in selector at index '+n);else i.push("SELECT clause must be an array")}if(e.hasOwnProperty(rules.clause.LIMIT)){var r=e[rules.clause.LIMIT];(!isNumberLike(r)||Number(r)<=0||Number(r)!=Math.floor(Number(r)))&&i.push("LIMIT must be a positive integer")}return t>0&&(i=map(i,function(e){return"Sub-rule "+t+": "+e})),e.hasOwnProperty(rules.clause.FROM)&&(i=i.concat(rules.verify(e[rules.clause.FROM],t+1))),i},rules.select=function(e,t){return map(t,function(t){return map(e,function(e){return rules.operate(t,e)})})},rules.executeRecursively=function(e,t){var i=t;if(e.hasOwnProperty(rules.clause.FROM)&&(i=rules.executeRecursively(e[rules.clause.FROM],i)),i=filter(i,function(t){return rules.operate(t,e[rules.clause.WHERE])}),e.hasOwnProperty(rules.clause.AGGREGATE)){var a=rules.groupBy(e[rules.clause.GROUP_BY],i),n=rules.aggregate(e[rules.clause.AGGREGATE],a);i=rules.project(a,n)}if(e.hasOwnProperty(rules.clause.HAVING)&&(i=filter(i,function(t){return rules.operate(t,e[rules.clause.HAVING])})),e.hasOwnProperty(rules.clause.ORDER_BY)&&(i=rules.orderBy(e[rules.clause.ORDER_BY],i)),e.hasOwnProperty(rules.clause.LIMIT)){var r=Number(e[rules.clause.LIMIT]);i=i.slice(0,r)}return e.hasOwnProperty(rules.clause.SELECT)&&(i=rules.select(e[rules.clause.SELECT],i)),i},rules.execute=function(e,t){e=rules.rewrite(e);var i=rules.verify(e);if(i.length>0)throw new Error("Rule "+json.stringify(e)+" has violations: "+i.join("\n"));return rules.executeRecursively(e,t)},rules.isSatisfied=function(e,t){try{return rules.execute(e,t).length>0}catch(i){return log("Rules","Error "+i.toString()+" while evaluating rule "+json.stringify(e)),!1}},optly.Visitor=function(){this.audiences={},this.dimensions={},this.persistentAudiences={},this.segmentationAudiences={}},optly.Visitor.prototype.initialize=function(){timer.addEvent("Visitor","Initializing"),this.loadPersistentAudiences(),each(segmenter.getSegmentsList(),goog.bind(function(e){timer.addEvent("Visitor","Found segment "+e);var t=data.getSegment(e);t&&t.audience_id?(timer.addEvent("Visitor","Adding to audience "+t.audience_id),this.setInAudience(t.audience_id,!0,{updateSegment:!1})):t&&t.dimension_id&&(timer.addEvent("Visitor","Setting dimension value "+t.dimension_id),this.saveDimensionValue(t.dimension_id,segmenter.getSegmentValue(e),!1))},this))},optly.Visitor.prototype.isInAudience=function(e){var t=this.persistentAudiences.hasOwnProperty(e)||this.segmentationAudiences.hasOwnProperty(e);if(!this.audiences.hasOwnProperty(e)||!t)try{this.audiences[e]=this.testAudienceConditions(e)}catch(i){timer.addEvent("Visitor","Error: "+i.message)}return this.audiences[e]},optly.Visitor.prototype.setInAudience=function(e,t,i){if(i=extend({persist:!0,savePersistentAudiences:!0,updateSegment:!0},i),!data.getAudience(e))return void timer.addEvent("Visitor","Unable to find audience "+e);this.audiences[e]=t;var a=data.getAudienceSegmentId(e);a?this.segmentationAudiences[e]=t:i.persist?this.persistentAudiences[e]=t:delete this.persistentAudiences[e],a&&i.updateSegment&&this.updateSegment(a,t),!a&&i.persist&&i.savePersistentAudiences&&this.persistAudiences()},optly.Visitor.prototype.addToAudience=function(e){this.setInAudience(e,!0)},optly.Visitor.prototype.removeFromAudience=function(e){this.setInAudience(e,!1)},optly.Visitor.prototype.removeFromAllAudiences=function(){each(this.audiences,goog.bind(function(e){this.setInAudience(e,!1,{persist:!!this.persistentAudiences.hasOwnProperty(e)})},this))},optly.Visitor.prototype.getAudiences=function(){return this.audiences},optly.Visitor.prototype.getDimensionValue=function(e){var t=void 0;if(this.dimensions.hasOwnProperty(e))t=this.dimensions[e];else try{t=this.calculateDimensionValue(e)}catch(i){timer.addEvent("Visitor","Error: "+i.message)}return t},optly.Visitor.prototype.getDimensionValues=function(){return this.dimensions},optly.Visitor.prototype.saveDimensionValue=function(e,t,i){return i=!isDefined(i)||i,isDefined(t)&&null!==t&&String(t)?(i&&(t=segmenter.standardizeValue(String(t),!1)),this.dimensions[e]=t):delete this.dimensions[e],this.dimensions[e]},optly.Visitor.prototype.setDimensionValue=function(e,t,i){var a=data.getDimensionIdByApiName(e)||e;if(!data.getDimension(a))return void timer.addEvent("Visitor","Unable to find dimension "+e);if("custom_dimension"===data.getDimensionType(a)){t=this.saveDimensionValue(a,t,i);var n=data.getDimensionSegmentId(a);n&&this.updateSegment(n,t),timer.addEvent("Visitor",'Set dimension "'+a+'" to "'+t+'"')}else timer.addEvent("Visitor",'Unknown dimension "'+a+'"')},optly.Visitor.prototype.calculateDimensionValue=function(e){var t,i,a=data.getDimensionType(e)||"";if(!data.getDimension(e))throw new Error(goog.DEBUG?"Unable to find dimension for id: "+e:e);if("custom_dimension"===a)throw new Error(goog.DEBUG?"calculateDimensionValue called on custom dimension "+e:e);return t=optly.Visitor.getConditionGetter(a),t&&(i=t(data.getDimensionName(e))),timer.addEvent("Visitor","Got dimension ("+a+") value "+e+": "+json.stringify(i)),i},optly.Visitor.prototype.testAudienceConditions=function(e){var t=data.getAudience(e);if(!t)throw new Error("Unable to find audience for id: "+e);var i=condition.compoundTest(this,t.conditions);return timer.addEvent("Visitor","Checking if in audience "+e+": "+i),i},optly.Visitor.prototype.updateSegment=function(e,t){t?segmenter.addToSegment(e,t):segmenter.removeFromSegment(e)},optly.Visitor.prototype.loadPersistentAudiences=function(){var e=cookie.get(AUDIENCE_COOKIE_NAME);e&&e.length>0&&each(e.split(","),goog.bind(function(e){this.setInAudience(e,!0,{persist:!0,savePersistentAudiences:!1})},this))},optly.Visitor.prototype.persistAudiences=function(){var e=[];each(this.persistentAudiences,goog.bind(function(t){this.audiences[t]&&e.push(t)},this)),e.sort(),cookie.set(AUDIENCE_COOKIE_NAME,e.join(","),DEFAULT_TRACKING_COOKIE_EXPIRATION)},optly.Visitor.getConditionGetter=function(e){var t={browser:goog.bind(condition.facade.getBrowser,condition.facade),browser_version:goog.bind(condition.facade.getBrowser,condition.facade),behavior:goog.bind(condition.facade.getBehaviorEvents,condition.facade),campaign:goog.partial(segmenter.getSegmentValueFromType,"campaign"),cookies:goog.bind(condition.facade.getCookie,condition.facade),custom_tag:goog.bind(condition.facade.getCustomTagValue,condition.facade),default_behavior:goog.bind(condition.facade.getDefaultBehaviorAttributes,condition.facade),device:goog.bind(condition.facade.getDevice,condition.facade),event:goog.bind(condition.facade.triggeredCustomEvent,condition.facade),first_session:goog.bind(condition.facade.getIsFirstSession,condition.facade),has_ppid:goog.bind(condition.facade.hasPPID,condition.facade),ip:goog.bind(condition.facade.getIP,condition.facade),language:goog.bind(condition.facade.getBrowserLanguage,condition.facade),list:goog.bind(condition.facade.getListMembershipStatus,condition.facade),location:goog.bind(condition.facade.getLocation,condition.facade),query:goog.bind(condition.facade.getQueryParameter,condition.facade),platform:goog.bind(condition.facade.getPlatform,condition.facade),referrer:goog.bind(condition.facade.getReferrer,condition.facade),segment:goog.bind(condition.facade.hasSegment,condition.facade),source_type:goog.partial(segmenter.getSegmentValueFromType,"source_type"),third_party_dimension:goog.bind(condition.facade.getThirdPartyData,condition.facade),time_and_day:goog.bind(condition.facade.getDate,condition.facade),url:goog.bind(condition.facade.getCurrentUrl,condition.facade),visitor:goog.bind(condition.facade.getNewVsReturning,condition.facade),dynamic_customer_profile:goog.bind(condition.facade.getDynamicCustomerProfileConditions,condition.facade)};return t[e]};var visitor=new optly.Visitor;rule_builder.MILLIS_IN_A_DAY=864e5,rule_builder.aggregateField=function(e,t){return isString(t)&&(t=[t]),t=t||rules.DEFAULT_FIELD,[rules.generateAlias(e,t)]},rule_builder.groupField=function(e){return isString(e)&&(e=[e]),e=e||rules.DEFAULT_FIELD,[e.join(".")]};var OP_MAP={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};rule_builder.fieldComparison=function(e,t,i){return isString(t)&&(t=[t]),{op:canonicalizeOperator(e),args:[{field:t},{value:i}]}},rule_builder.relativeTimeComparison=function(e,t){return{op:canonicalizeOperator(e),args:[{op:"-",args:[{eval:"now"},{field:[behavior.FIELDS.TIME]}]},{value:t*rule_builder.MILLIS_IN_A_DAY}]}},rule_builder.rangeTimeComparison=function(e){return isArrayLike(e)?{op:"between",args:[{field:[behavior.FIELDS.TIME]},{value:e[0]||+new Date(0)},{value:e[1]||+new Date}]}:(timer.addEvent("Rule builder","rangeTimeComparison passed invalid range "+json.stringify(e)),null)},rule_builder.groupBy=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={field:e[i]};return t},rule_builder.aggregate=function(e,t){return isString(t)&&(t=[t]),t=t||rules.DEFAULT_FIELD,{op:e,args:[{field:t}]}},rule_builder.SOURCE_TYPES={BEHAVIOR:"events",DEFAULT_BEHAVIOR:"default_behavior",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},rule_builder.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},rule_builder.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},rule_builder.TOP_LEVEL_BEHAVIOR_FIELDS=function(){var e={};return each(behavior.FIELDS,function(t,i){e[i]=!0}),e}(),rule_builder.getFieldKeyPathForSource=function(e,t){t=t||rule_builder.SOURCE_TYPES.BEHAVIOR;var i=[];return isString(e)?(i=[e],t!==rule_builder.SOURCE_TYPES.BEHAVIOR||e in rule_builder.TOP_LEVEL_BEHAVIOR_FIELDS||(i=[behavior.FIELDS.OPTIONS,e])):i=e,i},rule_builder.BehaviorTagFilterSpec,rule_builder.BehaviorAudienceSpec,rule_builder.buildFromSpec=function(e){if(!(e.action||e.filters&&0!==e.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+json.stringify(e));var t=rule_builder.fieldComparison("gt",behavior.FIELDS.TIME,0),i=[],a=[];if(e.action&&(a.push(rule_builder.fieldComparison("eq",behavior.FIELDS.NAME,e.action.value)),e.action.type&&a.push(rule_builder.fieldComparison("eq",behavior.FIELDS.TYPE,e.action.type))),e.time)if("last_days"===e.time.type)a.push(rule_builder.relativeTimeComparison("lte",e.time.days));else if("range"===e.time.type){var n=rule_builder.rangeTimeComparison([e.time.start,e.time.stop]);n&&a.push(n)}else timer.addEvent("Rule builder",'Audience spec has bad "time" type',e.time.type);if(t={op:"and",args:a},e.count&&i.push({where:rule_builder.fieldComparison(e.count.comparator,"0",e.count.value),from:{select:[{field:rule_builder.aggregateField("count")}],where:t,aggregate:[rule_builder.aggregate("count")]}}),e.filters&&each(e.filters,function(n){var r,o,s=rule_builder.getFieldKeyPathForSource(n.name,e.source);if(n.modifier===rule_builder.FREQUENCY_FILTERS.MOST_FREQUENT?(r=rule_builder.aggregate("count"),o=rule_builder.aggregateField("count")):n.modifier===rule_builder.RECENCY_FILTERS.MOST_RECENT&&(r=rule_builder.aggregate("max",behavior.FIELDS.TIME),o=rule_builder.aggregateField("max",behavior.FIELDS.TIME)),r){var c=s,d=rule_builder.groupField(c);i.push({where:rule_builder.fieldComparison(n.comparator,"0",n.value),from:{select:[{field:d}],where:t,groupBy:rule_builder.groupBy([c]),aggregate:[r],orderBy:[{field:o,direction:"DESC"}],limit:1}})}else a.push(rule_builder.fieldComparison(n.comparator,s,n.value))}),e.pick){if(i.length>0)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+json.stringify(e));return[buildPicker(e.pick,t,e.source)]}return i.length>0?i:[{where:t}]},optly.timeAndDayInterval.DELIM="_",optly.timeAndDayInterval.DAYS_DELIM=",",optly.timeAndDayInterval.TIME_DELIM=":",optly.timeAndDayInterval.serialize=function(e){return e.start_time+optly.timeAndDayInterval.DELIM+e.end_time+optly.timeAndDayInterval.DELIM+e.days.join(optly.timeAndDayInterval.DAYS_DELIM)},optly.timeAndDayInterval.deserialize=function(e){var t=e.split(optly.timeAndDayInterval.DELIM);if(3!==t.length)throw new Error("Invalid time and day string "+e);var i=t[2].split(optly.timeAndDayInterval.DAYS_DELIM);return{start_time:t[0],end_time:t[1],days:i}},optly.timeAndDayInterval.timeStringToMinutes=function(e){var t=e.split(optly.timeAndDayInterval.TIME_DELIM);if(2!==t.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+e);return 60*parseInt(t[0],10)+parseInt(t[1],10)},optly.timeAndDayInterval.test=function(e,t){var i=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a=optly.timeAndDayInterval.deserialize(e),n=optly.timeAndDayInterval.timeStringToMinutes(a.start_time),r=optly.timeAndDayInterval.timeStringToMinutes(a.end_time),o=60*t.getHours()+t.getMinutes(),s=i[t.getDay()];return o>=n&&o<=r&&$.inArray(s,a.days)!==-1},condition.DimensionCondition,condition.test=function(e,t){var i=!!t.manualActivation,a=t.objectType?t.objectType:"experiment",n="experiment"===a,r=t.enabledStatus,o=t.visitor||visitor;timer.addEvent("Condition","Testing "+a+" "+e);var s=n&&(isDefined(r)?!!r:data.isExperimentEnabled(e)),c=n&&data.isExperimentManuallyActivated(e),d=data.getConditions(e,a);if(n&&!s)return timer.addEvent("Condition","Failed for "+a+" "+e+" (paused)"),optly.client.preview.Logger.setReason(e,"it is paused"),!1;if(n&&!i&&c)return timer.addEvent("Condition"," Failed for "+a+" "+e+" (manual activation mode)"),optly.client.preview.Logger.setReason(e,"it is set to use manual activation mode"),!1;if(d){if(!condition.testLegacyConditions(d,e,a))return timer.addEvent("Condition","Failed for "+a+" "+e+" (condition failed)"),!1}else if(!condition.testAudienceConditions(o,e,a))return!1;return!0},condition.testAudienceConditions=function(e,t,i){var a=[],n=[];if("experiment"===i)a=data.getExperimentAudienceIds(t),n=data.getExperimentUrls(t)||[];else{if("segment"!==i)return timer.addEvent("Condition","Not a valid objectType: "+i),!1;var r=data.getSegmentAudienceId(t);r&&(a=[r])}return a.length>0&&(timer.addEvent("Condition","Testing audiences for "+i+" "+t+": "+a),!any(a,goog.bind(e.isInAudience,e)))?(timer.addEvent("Condition","Failed to match any audiences for "+i+" "+t),!1):!(n.length>0&&(timer.addEvent("Condition","Testing URLs for "+i+" "+t),!condition.testUrlDimensionValues(n,condition.facade.getCurrentUrl())))||(timer.addEvent("Condition","Failed to match any URL for "+i+" "+t),!1)},condition.testUrlDimensionValues=function(e,t){var i=[],a=[];each(e,function(e){e.negate?a.push(e):i.push(e)});var n=function(e){return any(e,function(e){return condition.testUrl(t,e)})};return!n(a)&&(0===i.length||n(i))},condition.testLegacyConditions=function(e,t,i){i=i||"experiment";var a="experiment"===i,n=!0,r=condition.legacyTestFunctions;return each(e,function(e){var i=e.type;if(a&&e.only_first_time&&plan.containsExperiment(t)&&!optly.client.preview.ENABLED)timer.addEvent("Condition",i+" condition passed because it only gets checked when bucketing",!0);else{var o=r[i],s=!e.not,c=o(e),d=c!==s,l=c?"passed":"failed",u=s?"pass":"fail",p="the visitor "+l+" a "+i+" targeting condition  when it needed to "+u;if(timer.addEvent("Condition","Found that "+p,!d),d)return n=!1,optly.client.preview.Logger.setReason(t,p),!1}}),n},condition.testBrowsers=function(e){var t=condition.facade.getBrowser();return any(e.values,function(e){return condition.testBrowser(t,{value:e})})},condition.compareVersion=function(e,t){if(!t)return 0;for(var i=t.toString().split("."),a=e.toString().split("."),n=0;n<i.length;n++){if(!isDefined(a[n]))return-1;if(isNaN(Number(a[n]))){if(a[n]!==i[n])return-1}else{if(Number(a[n])<Number(i[n]))return-1;if(Number(a[n])>Number(i[n]))return 1}}return 0},condition.testBrowser=user.LEGACY_BROWSER?function(e,t){var i=t.value,a=e.id,n=e.version,r=e.mobileId;if(r&&"unknown"!==r)return timer.addEvent("Condition",r,!0),"mobile"===i||i===r;if(0===i.indexOf(a)){var o=i.substr(a.length);return 0===condition.compareVersion(n,o)}return!1}:goog.nullFunction,condition.testBrowserVersion=function(e,t){var i=t.value,a=e.id,n=e.version;if(0===i.indexOf(a)){var r=i.substr(a.length);return 0===condition.compareVersion(n,r)}return!1},condition.testBehavior=function(e,t){try{var i=[],a=json.parse(t.value);return i=isDefined(a.version)?rule_builder.buildFromSpec(a):[a],every(i,function(t){return rules.isSatisfied(t,e)})}catch(n){}return!1},condition.testDefaultBehavior=function(e,t){try{e=e||{};var i=json.parse(t.value);return rules.isSatisfied(i,[e])}catch(a){}return!1},condition.testCampaign=function(e,t){var i=t.value;return"string"==typeof i&&("regex"===t.match?e=safeDecodeUriComponent(e):i=segmenter.standardizeValue(i)),"none"===e&&(e=null),condition.hasMatch(i,t.match,e)},condition.testCode=function(e){return condition.testCodeResult(null,e)},condition.testCodeResult=function(e,t){var i=t.value;if(void 0===i)return!0;try{return Boolean(evaluator.executeCode(i))}catch(a){return!1}},condition.testCookies=function(e){for(var t,i=e.names||[],a=e.values||[],n=0;n<i.length;n++)if(t=i[n],condition.testCookie(condition.facade.getCookie(t),{value:a[n]||void 0}))return!0;return!1},condition.testCookie=function(e,t){return condition.hasMatch(t.value,t.match,e)},condition.testTimeAndDay=function(e,t){return optly.timeAndDayInterval.test(t.value,e)},condition.testList=function(e,t){if(null===e||!isDefined(e))return!1;var i=t.value;return isDefined(i)?e.toString()===i:""===e||e!==!1},condition.testCustomDimension=function(e,t){var i=t.value;return isDefined(i)?i==e:isDefined(e)},condition.testCustomTags=function(e){return any(e.values,function(e){var t=e.key;return condition.testCustomTag(condition.facade.getCustomTagValue(t),{value:e.value})})},condition.testCustomTag=function(e,t){return condition.hasMatch(t.value,t.match,e)},condition.testDevice=function(e,t){var i=t.value;return"unknown"!==e.id?e.id===i:"tablet"===i?"tablet"===e.type:"mobile"===i?e.isMobile&&"tablet"!==e.type:"desktop"===i&&!e.isMobile},condition.testEvents=function(e){return any(e.values,function(e){var t=condition.facade.triggeredCustomEvent(e);return condition.testEvent(t)})},condition.testEvent=function(e){return e},condition.testFirstSession=function(e){return e},condition.testHasPPID=function(e){return e},condition.testIPs=function(e){var t=condition.facade.getIP();return any(e.values,goog.partial(condition.testIP,t))},condition.testIP=function(e,t){if(null===e)return!1;var i=t.value,a=t.match;switch(a){case"exact":if(e==i&&""!=e)return!0;break;case"prefix":if(0==e.indexOf(i))return!0;break;case"regex":try{var n=new RegExp(i)}catch(r){return!1}if(n.test(e))return!0;break;case"cidr":try{var o=new optly.CIDR(i);return o.containsIP(e)}catch(r){return!1}}return!1},condition.testLanguages=function(e){var t=condition.facade.getBrowserLanguage();return any(e.values,function(e){return condition.testLanguage(t,{value:e})})},condition.testLanguage=function(e,t){var i=t.value;return"any"===i||0===e.indexOf(i)},condition.testLocations=function(e){var t=condition.facade.getLocation();return any(e.values,function(e){return condition.testLocation(t,{value:e})})},condition.testLocation=function(e,t){if(null===e)return!1;var i=t.value,a=i.split("|"),n=$.trim(a[0]),r=$.trim(a[1]),o=$.trim(a[2]),s=$.trim(a[3]);switch(a.length){case 1:if(e.country===n)return!0;break;case 2:if(e.region===r&&e.country===n)return!0;break;case 3:if(e.city===o&&(e.region===r||""===r)&&e.country===n)return!0;break;case 4:if(e.continent===s)return!0}return!1},condition.testPlatform=function(e,t){var i=t.value,a=i.split("_"),n=a[0],r=a.slice(1);return n===e.id&&(0===r.length||(r.length>1?condition.compareVersion(e.version,r[0])>=0&&condition.compareVersion(e.version,r[1])<=0:0===condition.compareVersion(e.version,r[0])));
},condition.testQueries=function(e){return 0===e.values.length||any(e.values,function(e){var t=e.key;return condition.testQueryParam(condition.facade.getQueryParameter(t),{value:e.value})})},condition.testQueryParam=function(e,t){return condition.hasMatch(t.value,t.match,e)},condition.testReferrers=function(e){var t=condition.facade.getDocumentReferrer();return any(e.values,goog.partial(condition.testReferrer,t))},condition.testReferrer=function(e,t){var i=t.value,a=t.match;return timer.addEvent("Condition","Testing referrer "+e+" against  "+i+" ("+a+")",!0),optly.match.matchUrl(e,i,a)},condition.testSegments=function(e){var t=condition.facade.getSegmentsList();return any(e.values,function(e){return condition.testSegment(inArray(e,t))})},condition.testSegment=function(e){return!!e},condition.testSourceType=function(e,t){return t.value===e},condition.testThirdPartyDimension=function(e,t){return isArrayLike(e)?any(e,goog.partial(condition.hasMatch,t.value,t.match)):condition.hasMatch(t.value,t.match,e)},condition.testUrls=function(e){var t=condition.facade.getCurrentUrl();return any(e.values,goog.partial(condition.testUrl,t))},condition.testUrl=function(e,t){var i=t.value,a=t.match;return timer.addEvent("Condition","Testing URL "+e+" against  "+i+" ("+a+")",!0),optly.match.matchUrl(e,i,a)},condition.testVisitor=function(e){var t=condition.facade.getNewVsReturning();return condition.testVisitorValue(t,e)},condition.testVisitorValue=function(e,t){var i=t.value;switch(i){case"new":return"returning"!==e;case"returning":return"returning"===e}return!0},condition.testDynamicCustomerProfileCondition=function(e,t){return null!==e&&!!e[t.value]},condition.compoundTest=function(e,t){var i={and:function(t){return every(t,goog.partial(condition.compoundTest,e))},or:function(t){return any(t,goog.partial(condition.compoundTest,e))},not:function(t){if(1!==t.length)throw new Error(goog.DEBUG&&'"not" argument too long: '+json.stringify(t));return!condition.compoundTest(e,t[0])}};if(isArrayLike(t)){if(t[0]in i)return i[t[0]](t.slice(1));throw new Error(goog.DEBUG&&"Not an operator")}var a=t.dimension_id,n=data.getDimensionType(a),r=t.value;if(!n)throw new Error(goog.DEBUG&&"No dimension type for dimension: "+a);var o=condition.matchers[n];if(!o)throw new Error(goog.DEBUG&&"Unknown dimension type: "+n);return o(e.getDimensionValue(a),{value:r,match:t.match||"exact"})},condition.isReadyToTest=function(e){var t=!0;if(data.usesAudiences(e)){var i=[data.getSegmentAudienceId(e)];i[0]||(i=data.getExperimentAudienceIds(e)),t=every(i,function(e){var t=data.getAudience(e);return!t.conditions||condition.compoundReadyToTest(t.conditions)})}else data.isGeotargetingEnabled(e)&&(t=condition.matchersReadyToTest.ip(null)||condition.matchersReadyToTest.location(null));return t||timer.addEvent("Condition","Not ready to test (geotargeting): "+e),t},condition.compoundReadyToTest=function(e){if(isArrayLike(e))return every(e.slice(1),condition.compoundReadyToTest);var t=e.dimension_id,i=data.getDimensionType(t)||"",a=condition.matchersReadyToTest[i];return!a||a(e)},condition.legacyTestFunctions={browser:condition.testBrowsers,code:condition.testCode,cookies:condition.testCookies,custom_tag:condition.testCustomTags,event:condition.testEvents,ip:condition.testIPs,language:condition.testLanguages,location:condition.testLocations,query:condition.testQueries,referrer:condition.testReferrers,segment:condition.testSegments,url:condition.testUrls,visitor:condition.testVisitor},condition.matchers={browser:condition.testBrowser,browser_version:condition.testBrowserVersion,behavior:condition.testBehavior,campaign:condition.testCampaign,code:condition.testCodeResult,cookies:condition.testCookie,custom_dimension:condition.testCustomDimension,custom_tag:condition.testCustomTag,default_behavior:condition.testDefaultBehavior,device:condition.testDevice,event:condition.testEvent,first_session:condition.testFirstSession,ip:condition.testIP,language:condition.testLanguage,list:condition.testList,location:condition.testLocation,query:condition.testQueryParam,platform:condition.testPlatform,referrer:condition.testReferrer,segment:condition.testSegment,source_type:condition.testSourceType,time_and_day:condition.testTimeAndDay,third_party_dimension:condition.testThirdPartyDimension,url:condition.testUrl,visitor:condition.testVisitorValue,dynamic_customer_profile:condition.testDynamicCustomerProfileCondition,has_ppid:condition.testHasPPID},condition.matchersReadyToTest={ip:function(e){return optly.client.rum.instance.recordEvent("checkGeo"),null!==condition.facade.getIP()},location:function(e){return optly.client.rum.instance.recordEvent("checkGeo"),null!==condition.facade.getLocation()},list:function(e){var t=e.dimension_id;return null!==condition.facade.getListMembershipStatus(data.getDimensionName(t)||"")},dynamic_customer_profile:function(e){var t=condition.facade.getDynamicCustomerProfileConditions();return isNonNullObject(t)&&e.value in t}},condition.hasMatch=function(e,t,i){var a=isDefined(i)&&null!==i,n=isDefined(e)&&null!==e,r=t||(n?"exact":"exists");switch(r){case"exists":return a;case"exact":return a&&String(i)===e;case"substring":return a&&containsString(String(i),e);case"regex":try{if(n&&a){var o=new RegExp(e);return containsRegEx(String(i),o)}return!1}catch(s){return!1}case"range":var c=e.split(":"),d=parseFloat(c[0]),l=parseFloat(c[1]),u=parseFloat(i);return u>=d&&u<=l;default:return!1}},template.evaluate=function(e){e=$.trim(e);var t="";if(window[GLOBAL]&&window[GLOBAL][GLOBAL_DATA]){var i=e.match(template.URL_PARAM_REGEX);if(i){var a=i[1],n=window[GLOBAL][GLOBAL_DATA].visitor.params[a];void 0===n&&(n=""),t=n}else{for(var r=e.split("."),o=window[GLOBAL],s=0,c=r.length;s<c;s++)if(o=o[r[s]],void 0===o||null===o){o="";break}t=""+o}}return timer.addEvent("Template",e+" evaluated to: '"+t+"'"),t},template.render=function(e){return e.replace(template.TEMPLATE_REGEX,template.replacer)},template.replacer=function(e,t){return template.evaluate(t)},template.TEMPLATE_REGEX=/\{\{ *optimizely\.([^\n\r{}<>]*)\}\}/g,template.URL_PARAM_REGEX=/^data\.visitor\.params\.(.*)$/,feature_detect.requiredFeatures=[function(){var e=detect.detect();if("ie"===e.browserId){try{var t=Number(e.browserVersion)}catch(i){return}if(t<7)throw new Error("IE is only supported on version 8+ (detected "+t+")");if(t<8&&"windows"===e.platform.id&&e.platform.version&&arrayContains(["xp","vista"],e.platform.version.toLowerCase()))throw new Error("IE7 is not supported")}},function(){var e={a:123};return json.parse(json.stringify(e))}],feature_detect.check=function(){var e=[];if(each(feature_detect.requiredFeatures,function(t){try{t()}catch(i){e.push(i.message)}}),e.length>0)throw new Error("Feature(s) not supported: "+e.join("; "))},optly.client.diagnostic.ENABLED=!1,plan.CodeStep,plan.EventStep,plan.Step,plan.addChangeHandler=function(e){plan.changeHandlers.push(e)},plan.addVariation=function(e,t,i,a){i=i===!0,a=a===!0;var n=!1,r=data.getVariationExperimentId(e);if(r&&(a||!plan.containsExperiment(r))){if(n=!0,a&&plan.containsExperiment(r))for(var o=0;o<plan.variations.length;o++)plan.variations[o].experimentId===r&&plan.variations.splice(o,1);plan.variations.push({experimentId:r,id:e,source:t}),i&&evaluator.enqueue(r),plan.variationExperimentIds[r]=!0,plan.callChangeHandlers(),timer.addEvent("Plan","Added experiment "+r+" and variation id "+e+" to the plan, source is "+t,!0)}return n},plan.buildMultivariateId=function(e,t){for(var i=[],a=data.getExperimentSectionIds(e),n=0;n<a.length;n++){var r=t[a[n]];if(r===IGNORED_VARIATION_ID)return"";i.push(r)}return i.join(VARIATION_ID_DELIMITER)},plan.containsExperiment=function(e){return e in plan.ignoredExperimentIds||e in plan.variationExperimentIds},plan.filterUrlSpecificVariationCode=function(e){for(var t=e.split(VARIATION_CODE_DELIMITER),i=[],a=!0,n=0,r=t.length;n<r;n++){var o=$.trim(t[n]);if(o===VARIATION_URL_END)a=!0;else if(""!==o){var s=VARIATION_URL_START_RE.exec(o);if(s&&13===s.length){var c=s[2]?s[2].split(VARIATION_URL_DELIMITER):[],d=s[4]?s[4].split(VARIATION_URL_DELIMITER):[],l=s[6]?s[6]:"substring",u=s[8]?s[8].split(VARIATION_URL_DELIMITER):[],p=s[10]?s[10].split(VARIATION_URL_DELIMITER):[];if(c.length>0){var g=plan.zipConditions(c,u,l);a=condition.testUrls(g)}if(a&&d.length>0){var m=plan.zipConditions(d,p,l);a=!condition.testUrls(m)}}else a&&i.push(o)}}return i.join(VARIATION_CODE_DELIMITER)},plan.getProjectClickGoalWithCustomTargetingSteps=function(e){for(var t=data.getProjectClickGoalsWithCustomTargeting(),i=0,a=t.length;i<a;i++){var n={eventName:t[i].event_name,selector:t[i].selector,type:"event '"+t[i].event_name+"' (click goal)",waitUntilSelectorReady:!0};"revenue"in t[i]&&(n.revenue=t[i].revenue),e.push(n)}},plan.getSteps=function(e){void 0===e?e=[]:isNumberLike(e)&&(e=[e]),e=e;var t=plan.getVariationIds(e),i=[],a=[],n=[],r=[];plan.getProjectClickGoalWithCustomTargetingSteps(i),each(e,function(e){plan.getExperimentSteps(e,i,n,a,r)}),each(t,function(e){plan.getVariationSteps(e,a,r)});var o=[];return appendArray(o,a),appendArray(o,n),appendArray(o,r),appendArray(o,i),o},plan.getVariationId=function(e){var t=null;return each(plan.variations,function(i){e==i.experimentId&&(t=i.id)}),t},plan.getVariationIds=function(e){var t=[],i=!isDefined(e);return e=e||[],each(plan.variations,function(a){(i||arrayContains(e,a.experimentId))&&t.push(a.id)}),t},plan.ignoreExperiment=function(e,t){t=t===!0,!t&&plan.containsExperiment(e)||(plan.ignoredExperimentIds[e]=!0,plan.callChangeHandlers())},plan.isExperimentIgnored=function(e){return e in plan.ignoredExperimentIds},plan.removeExperiment=function(e){plan.ignoredExperimentIds[e]&&delete plan.ignoredExperimentIds[e],plan.variationExperimentIds[e]&&delete plan.variationExperimentIds[e];for(var t=0;t<plan.variations.length;t++)plan.variations[t].experimentId===e&&plan.variations.splice(t,1);plan.callChangeHandlers()},plan.log=function(){directive.shouldLog&&(each(plan.ignoredExperimentIds,function(e){var t=data.getExperimentName(e);timer.addEvent("Plan","Ignore experiment '"+t+"' ("+e+")")}),each(plan.variations,function(e,t){var i=data.getVariationExperimentId(e.id),a=data.getVariationName(e.id);timer.addEvent("Plan",data.getExperimentString(i)+' in variation "'+a+'" ('+e.id+")")}))},plan.readCookie=function(){var e=cookie.get(BUCKET_COOKIE_NAME);if(e){try{e=json.parse(e)}catch(t){e={}}var i={};each(e,function(e,t){t=String(t);var a=data.getVariationExperimentId(t),n=data.getExperimentSectionIds(a);if(n.length>1&&t.indexOf(VARIATION_ID_DELIMITER)===-1)i[a]=i[a]||{},i[a][e]=t;else if(t!==IGNORED_VARIATION_ID){var r=plan.addVariation(t,"cookie",!1);r||(plan.foreignBucketMap[e]=t)}else plan.ignoreExperiment(e)}),each(i,function(e,t){var i=plan.buildMultivariateId(e,t);i.length>0?plan.addVariation(i,"cookie",!1):plan.ignoreExperiment(e)})}},plan.writeCookie=function(){var e={};each(plan.foreignBucketMap,function(t,i){e[t]=i}),each(plan.variations,function(t){var i=data.getVariationExperimentId(t.id);e[i]=t.id}),each(plan.ignoredExperimentIds,function(t){e[t]=IGNORED_VARIATION_ID}),each(data.getBlacklistedExperiments(),function(t){t in e&&delete e[t]}),cookie.set(BUCKET_COOKIE_NAME,json.stringify(e),directive.trackingCookieExpiration)},plan.callChangeHandlers=function(){each(plan.changeHandlers,function(e){e()})},plan.getExperimentSteps=function(e,t,i,a,n){var r=data.getExperimentEvents(e);each(r,function(i,a){each(a,function(a){t.push({eventName:a.eventName,experimentIds:a.experimentIds,revenue:a.revenue,selector:i,type:"event '"+a.eventName+"' (experiment "+e+")",waitUntilSelectorReady:!0})})});var o=data.getExperimentCss(e);o&&i.push({code:function(){$("body").append("<style>"+o+"</style>")},selector:"body",type:"global css (experiment "+e+")",waitUntilSelectorReady:!0});var s=data.getExperimentSteps(e);if(s)each(s.forced,function(e){a.push(e)}),each(s.safe,function(e){n.push(e)});else{var c=data.getExperimentCode(e);c&&plan.appendStepsFromCode(c,a,n)}},plan.getVariationSteps=function(e,t,i){var a=data.getVariationPages(e);if(a)each(a,function(e){!e.steps||e.includes&&!condition.testUrls({values:e.includes})||e.excludes&&condition.testUrls({values:e.excludes})||(t.push.apply(t,e.steps.forced),i.push.apply(i,e.steps.safe))});else{var n=data.getVariationCode(e);n=plan.filterUrlSpecificVariationCode(n),plan.appendStepsFromCode(n,t,i,e)}},plan.appendStepsFromCode=function(e,t,i,a){if(containsString(e,"_optimizely_redirect"))t.push({code:e,type:"code forced (redirect)",variationId:a});else{for(var n=e.split("\n"),r=!1,o=!1,s=[],c=plan.jQueryExpression,d=plan.rearrangeExpression,l=[];n.length>0;){var u=trim(n.shift()),p=l.length>0;if(u){if(containsRegEx(u,/_optimizely_evaluate\s{0,9}=\s{0,9}force/i)){o=!0;continue}if(containsRegEx(u,/_optimizely_evaluate\s{0,9}=\s{0,9}safe/i)||containsRegEx(u,/_optimizely_evaluate\s{0,9}=\s{0,9}end_force/i)){o=!1;continue}if(containsRegEx(u,/_optimizely_evaluate\s{0,9}=\s{0,9}editor_only/i)){r=!0;continue}if(containsRegEx(u,/_optimizely_evaluate\s{0,9}=\s{0,9}end_editor_only/i)){r=!1;continue}if(plan.commentRegex.exec(u))continue;if(r)continue;if(o)s.push(u);else{if(!p){var g=c.exec(u),m=[];if(g){m.push(g[1].replace(/^['"]|['"]$/g,""));var h=d.exec(u);h&&h.length>4&&m.push(h[4]),i.push({code:u,selector:m,type:"safe jquery",waitUntilSelectorReady:!0,variationId:a})}else p=!0}p&&l.push(u)}}}s.length>0&&t.push({code:s.join("\n"),type:"forced evaluation",variationId:a}),l.length>0&&i.push({code:l.join("\n"),type:"safe non-jquery",waitUntilDocumentReady:!0,variationId:a})}},plan.reset=function(){timer.addEvent("Plan","Resetting visitor buckets"),plan.foreignBucketMap={},plan.ignoredExperimentIds={},plan.variationExperimentIds={},plan.variations=[],plan.writeCookie()},plan.zipConditions=function(e,t,i){for(var a={values:[]},n=0,r=e.length;n<r;n++)a.values.push({value:e[n],match:t[n]||i});return a},plan.changeHandlers=[],plan.foreignBucketMap={},plan.ignoredExperimentIds={},plan.rearrangeExpression=/^\$j?\(['"](.+?)['"]\)\.detach\(\)\.(appendTo|insertAfter|insertBefore|prependTo)\(['"](.+?)['"]\);(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,plan.commentRegex=/^(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,plan.jQueryExpression=/^\$j?\((['"].+?['"]|document)\)\..+;(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,plan.variationExperimentIds={},plan.variations=[],iapi.evaluateSegments=function(e){segmenter.reset(),segmenter.initialize(e)},iapi.initialize=function(e){window[GLOBAL].iapi={evaluateSegments:goog.partial(iapi.evaluateSegments,e)}},evaluator.bindTrackElementFromApi=function(e,t){if(e&&t)if(evaluator.isDocumentReady)timer.addEvent("Evaluator","Bound event "+t+" to selector "+e),evaluator.bindTrackElement(e,t);else{var i={eventName:t,selector:e,type:"event '"+t+"' (click goal)",waitUntilSelectorReady:!0};timer.addEvent("Evaluator","Add step to bind event "+i.eventName+" to selector "+i.selector),evaluator.steps.push(i)}},evaluator.evaluate=function(e,t){if(directive.isEnabled){isArrayLike(e)?evaluator.tellPreviewAboutExperiments(e):(e=[],evaluator.tellPreviewAboutExperiments(t)),e=e.concat(evaluator.evaluateQueue),evaluator.evaluateQueue=[];for(var i=0;i<e.length;i++)arrayContains(evaluator.evaluatedExperimentIds,e[i])||evaluator.evaluatedExperimentIds.push(e[i]);var a=plan.getSteps(e);appendArray(evaluator.steps,a),evaluator.doSteps()}},evaluator.doSteps=function(){var e=!1;for(evaluator.timeoutId=null,timer.addEvent("Evaluator",evaluator.waitCount+" times waited");!e&&evaluator.steps.length>0;){timer.addEvent("Evaluator",evaluator.steps.length+" steps remaining");var t=evaluator.steps.shift();if(e=evaluator.shouldWaitBeforeStep(t))evaluator.steps.unshift(t);else if(t.eventName){evaluator.doneWithSafeSteps(),timer.addEvent("Evaluator","Bound event "+t.eventName+" to selector "+t.selector);var i={};t.revenue&&(i={revenue:t.revenue,experimentIds:t.experimentIds}),evaluator.bindTrackElement(t.selector,t.eventName,i)}else t.code&&(timer.addEvent("Evaluator","Run code: "+t.code.toString()),evaluator.evaluateCode(t.code,t.variationId))}if(e){var a=0===evaluator.waitCount?FIRST_EVALUATION_WAIT_INTERVAL:EVALUATION_WAIT_INTERVAL;evaluator.timeoutId=setTimeout(evaluator.doSteps,a),evaluator.waitCount++}else timer.addEvent("Evaluator",evaluator.waitCount+" total times waited"),evaluator.doneWithSafeSteps()},evaluator.executeCode=function(fnOrCode){return"string"==typeof fnOrCode?eval(fnOrCode):fnOrCode()},evaluator.doneWithSafeSteps=function(){optly.client.rum.instance.recordEvent("flash"),activator.hasDelayedExperiments()||optly.client.rum.instance.recordEvent("flashGeo")},evaluator.enqueue=function(e){evaluator.evaluateQueue=evaluator.evaluateQueue||[],evaluator.evaluateQueue.push(e)},evaluator.getActiveExperimentIds=function(){return evaluator.evaluatedExperimentIds.concat(evaluator.evaluateQueue)},evaluator.getEvaluatedExperimentIds=function(){return evaluator.evaluatedExperimentIds},evaluator.isInQueue=function(e){return inArray(e,evaluator.evaluateQueue)},evaluator.evaluateProjectCode=function(){var e=data.getProjectCode();e&&(timer.addEvent("Evaluator","Running project level javascript."),evaluator.evaluateCode(e))},evaluator.evaluateCode=function(fn,variationId){if(fn){var isStringCode=!1,code;if("string"==typeof fn?(code=fn,isStringCode=!0):code=fn.toString(),redirect.getRedirectURL(code)){if(timer.addEvent("Evaluator","Redirect detected"),!redirect.okToRedirect(code))return void timer.addEvent("Evaluator","NOT OK to redirect");timer.addEvent("Evaluator","OK to redirect");var noCookieRedirect=redirect.detectNoCookieRedirect(code);timer.addEvent("Evaluator","setting a redirect cookie"+(variationId?" for variation: "+variationId:"")),redirect.setRedirectCookie(noCookieRedirect,variationId),redirect.setReferrerCookie()}isStringCode&&eval("var $j = $;");try{if(redirect.getRedirectURL(code)){$("head").append("<style type='text/css'>body{display:none;visibility:hidden;}</style>"),timer.addEvent("Evaluator","Hiding body before redirect");var isStandardRedirect=redirect.redirectRegexParams.test(code)||redirect.redirectRegex.test(code)||redirect.redirectRegexLegacy.test(code),keepBodyHidden=/_keep_body_hidden=(\S+)/.test(code);isStandardRedirect||keepBodyHidden?timer.addEvent("Evaluator","Standard redirect detected - Will not unhide body."):setTimeout(function(){document.body&&(document.body.style.visibility="visible",document.body.style.display="block",timer.addEvent("Evaluator","Unhiding body -- did not redirect"),optly.client.rum.instance.recordEvent("bodyUnhidden"))},1700)}evaluator.executeCode(fn)}catch(exception){var shouldLog=directive.shouldLog;directive.shouldLog=!0,timer.addEvent("Evaluator","Error: "+exception.message),timer.addEvent("Evaluator","Code: "+code),directive.shouldLog=shouldLog,timer.addEvent("Evaluator","Failed to run code: "+exception.message)}}},evaluator.bindTrackElement=function(e,t,i){if(i=i||{},!evaluator.alreadyBoundClickTrackingEvents[e]||!evaluator.alreadyBoundClickTrackingEvents[e][t]){var a=function(e){tracker.addLogEvent(t,"custom",i)},n={cancel:"touchmove",confirm:"touchend",detect:"touchstart"},r=$(e);if(r.length>0){var o=function(){r.unbind(n.confirm,a),r.unbind(n.cancel,o),r.unbind("mousedown",a)},s=function(){o(),r.bind(n.cancel,o),r.bind(n.confirm,a)};r.bind("mousedown",a),r.bind(n.detect,s)}else{r=$("html");var o=function(){r.undelegate(e,n.confirm,a),r.undelegate(e,n.cancel,o),r.undelegate(e,"mousedown",a)},s=function(){o(),r.delegate(e,n.confirm,a),r.delegate(e,n.cancel,o)};r.delegate(e,"touchstart",s),r.delegate(e,"mousedown",a)}evaluator.alreadyBoundClickTrackingEvents[e]||(evaluator.alreadyBoundClickTrackingEvents[e]={}),evaluator.alreadyBoundClickTrackingEvents[e][t]="mousedown touchstart"}},evaluator.handleDocumentReady=function(e){optly.client.rum.instance.recordEvent("docReady"),evaluator.isDocumentReady=!0,null!==evaluator.timeoutId&&(timer.addEvent("Evaluator","Document is ready"),clearTimeout(evaluator.timeoutId),evaluator.delayDomExecuteMilliseconds>0?setTimeout(evaluator.doSteps,evaluator.delayDomExecuteMilliseconds):evaluator.doSteps())},evaluator.setDelayDomExecute=function(e){evaluator.delayDomExecuteMilliseconds=e},evaluator.shouldWaitBeforeStep=function(e){var t=!1;if(e.waitUntilDocumentReady&&!evaluator.isDocumentReady)timer.addEvent("Evaluator","Document not ready yet"),t=!0;else if(e.waitUntilSelectorReady&&!evaluator.isDocumentReady){var i=e.selector;if(i){i=isArrayLike(i)?i:[i];for(var a=0;a<i.length;a++){var n=i[a];if(null!==n&&void 0!==n&&n.length){var r=$("document"==n?document:n);0===r.length&&(timer.addEvent("Evaluator","'"+n+"' not found"),t=!0)}}}}return t},evaluator.tellPreviewAboutExperiments=function(e){e||(e=data.getExperimentIds());for(var t=0;t<e.length;t++){var i=e[t],a=optly.client.preview.Logger.getReason(i);a?(optly.client.preview.Logger.addEvent("Not activating "+data.getExperimentString(i)+" because "+a+".",{type:"explanation"}),optly.client.preview.Logger.deleteReason(i)):optly.client.preview.Logger.addEvent("Activating "+data.getExperimentString(i)+".",{type:"activation",experimentId:i})}},evaluator.alreadyBoundClickTrackingEvents={},evaluator.evaluatedExperimentIds=[],evaluator.evaluateQueue=evaluator.evaluateQueue||[],evaluator.delayDomExecuteMilliseconds=0,evaluator.isDocumentReady=!1,evaluator.steps=[],evaluator.timeoutId=null,evaluator.waitCount=0,$(function(){setTimeout(function(){evaluator.handleDocumentReady()},50)}),optly.CIDR=function(e){this.cidrString=$.trim(e);var t=optly.CIDR.parseCIDR(this.cidrString);if(null===t)throw new Error("Invalid CIDR specification");this.maskedAddress=t.maskedAddress,this.mask=t.mask},optly.CIDR.IP,optly.CIDR.NetworkMask,optly.CIDR.NUM_IP_OCTETS=4,optly.CIDR.prototype.containsIP=function(e){var t=optly.CIDR.parseIP(e);if(null===t)throw new Error("Invalid ip: "+e);for(var i=0;i<optly.CIDR.NUM_IP_OCTETS;i++)if((t[i]&this.mask[i])!==this.maskedAddress[i])return!1;return!0},optly.CIDR.parseCIDR=function(e){var t=e.split("/");if(2!=t.length)return null;var i=parseInt(t[1],10);if(isNaN(i)||i<0||i>32)return null;var a=optly.CIDR.parseIP(t[0]);if(null===a)return null;for(var n=optly.CIDR.makeMask(i),r=0;r<optly.CIDR.NUM_IP_OCTETS;r++)a[r]=a[r]&n[r];return{maskedAddress:a,mask:n}},optly.CIDR.parseIP=function(e){var t=e.split(".");if(t.length!=optly.CIDR.NUM_IP_OCTETS)return null;for(var i=[],a=0;a<optly.CIDR.NUM_IP_OCTETS;a++){var n=optly.CIDR.parseOctet(t[a]);if(null===n)return null;i[a]=n}return i},optly.CIDR.parseOctet=function(e){if(e.length>3)return null;var t=parseInt(e,10);return isNaN(t)?null:e!==t.toString()?null:t<0||t>255?null:t},optly.CIDR.ONES_LOOKUP_TABLE=[0,128,192,224,240,248,252,254,255],optly.CIDR.makeMask=function(e){if(e<0||e>32)return null;for(var t=[],i=0;i<optly.CIDR.NUM_IP_OCTETS;i++)t[i]=0;for(var a=Math.floor(e/8),n=e%8,i=0;i<a;i++)t[i]=255;return a<optly.CIDR.NUM_IP_OCTETS&&(t[a]=optly.CIDR.ONES_LOOKUP_TABLE[n]),t},optly.match.matchUrl=function(e,t,i){switch(e=optly.match.stripVarFromQuery(e),i){case"exact":return e=optly.match.stripUrl(e),e===optly.match.stripUrl(t);case"regex":try{return Boolean(e.match(t))}catch(a){return!1}case"simple":return e=optly.match.simplifyUrl(e),t=optly.match.simplifyUrl(t),e===t;case"substring":return e=optly.match.stripUrl(e,!0),t=optly.match.stripUrl(t,!0),e.indexOf(t)!==-1;default:return!1}},optly.match.removeParameters=function(e){var t=e.indexOf("?");return t!==-1&&(e=e.substring(0,t)),t=e.indexOf("#"),t!==-1&&(e=e.substring(0,t)),e},optly.match.simplifyUrl=function(e){return optly.match.stripUrl(optly.match.removeParameters(e))},optly.match.stripUrl=function(e,t){e=e.replace("/?","?"),e=e.toLowerCase().replace(/[/&?]+$/,"");var i=optly.match.REQUIRED_PREFIXES_TO_STRIP.slice(0);t||(i=i.concat(optly.match.OPTIONAL_PREFIXES_TO_STRIP));for(var a=i.length,n=0;n<a;n++){var r=i[n],o=new RegExp("^"+r);e=e.replace(o,"")}return e},optly.match.stripVarFromQuery=function(e){var t=e.split("?");if(t[1]){var i=t[1].split("&"),a=[];return $.each(i,function(){0!==this.indexOf(optly.match.QUERY_PREFIX)&&a.push(this)}),t[1]=a.join("&"),t.join("?")}return e},optly.match.REQUIRED_PREFIXES_TO_STRIP=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"],optly.match.OPTIONAL_PREFIXES_TO_STRIP=["www."],optly.match.QUERY_PREFIX="optimizely_",optly.taint.createDeconstructingFunction=function(e){return function(t){var i="object"==typeof t&&optly.taint.isObjectPrototypeTainted();if(i){var a=null;for(var n in t)t.hasOwnProperty(n)&&(a=e.call(this,n,t[n]));return a}return e.apply(this,arguments)}},optly.taint.createCleanJQueryEach=function(e,t){return function(i,a,n){var r=(void 0===i.length||t.isFunction(i))&&optly.taint.isObjectPrototypeTainted();if(r){if(n){for(var o in i)if(i.hasOwnProperty(o)&&a.apply(i[o],n)===!1)break}else for(var o in i)if(i.hasOwnProperty(o)&&!a.call(i[o],o,i[o])==!1)break}else e.apply(this,arguments);return i}},optly.taint.createCleanJQueryInit=function(e,t){var i=function(t,i,a){return new e(t,i,a)},a=optly.nativity.getNativeGetElementsByClassName();return function(e,n,r){var o=i,s=document.getElementsByClassName;!optly.nativity.isNativeFunction(s)&&a&&(o=function(e,t,n){document.getElementsByClassName=a;var r=i(e,t,n);return document.getElementsByClassName=s,r});var c="string"==typeof e&&n&&"object"===t.type(n)&&optly.taint.isObjectPrototypeTainted();if(c){var d=o(e,void 0,r);return d.attr(n),d}return o(e,n,r)}},optly.taint.fixJQueryTaintIssues=function(e){e.fn.attr=optly.taint.createDeconstructingFunction(e.fn.attr),e.fn.css=optly.taint.createDeconstructingFunction(e.fn.css),e.fn.extend=optly.taint.createDeconstructingFunction(e.fn.extend),e.each=optly.taint.createCleanJQueryEach(e.each,e),e.fn.init=optly.taint.createCleanJQueryInit(e.fn.init,e)},optly.taint.isObjectPrototypeTainted=function(){for(var e in{})return!0;return!1},main=function(){TEST_MODULE||optly.taint.fixJQueryTaintIssues($),timer.addEvent("Main","Started, revision "+data.getRevision());try{feature_detect.check()}catch(e){return void timer.addEvent("Main","Disabling: "+e.message)}return query.process(),(directive.isEditor||directive.isPersonalizationEditor)&&(window.optimizelyDataApi={getProjectId:data.getProjectId}),directive.isDesktopAppEditor?void timer.addEvent("Main","Disabling because in desktop app editor."):directive.isPersonalizationEditor?(timer.addEvent("Main","Disabling because personalization editor flag is set."),void loadScript("https://"+data.getWebHost()+"/js/innie.js?_="+ +new Date)):(api.initializePriorityOneApiCalls(),tracker.isOptedOut()?(timer.addEvent("Main","Disabling because opted out"),void timer.flushLogs()):optly.client.preview.ENABLED&&!directive.previewVerified?void timer.addEvent("Main","Disabling because preview project not verified."):directive.previewScriptName&&!optly.client.preview.ENABLED?void preview_loader.loadPreview():optly.client.preview.ENABLED||!directive.shouldLoadPreview||directive.previewScriptName?(directive.isSomeClientEnabled()&&evaluator.evaluateProjectCode(),api.initializePriorityOneApiCalls(),user.initialize(),asyncInfo.loadFromStore(),data.isListTargetingEnabled()&&asyncRequest.makeListTargetingRequest(),data.isDynamicCustomerProfileTargetingEnabled()&&asyncRequest.makeDynamicCustomerProfileTargetingRequest(),null!==data.getDCPServiceId()&&setTimeout(function(){dcp.alias(asyncInfo.dcpCache)},0),plan.readCookie(),segmenter.initialize(),redirect.initialize(),visitor.initialize(),api.initialize(visitor),optly.client.rum.instance.recordEvent("apiInitialize"),iapi.initialize(),query.processForceParameters(),directive.requestedInvalidForceParameters?void preview_loader.loadSplashScreen("Force parameters are disabled for this project. See Project Code Settings."):(main.log(),directive.isEditor&&loadScript("https://"+data.getWebHost()+"/js/innie.js?_="+ +new Date),directive.isEnabled&&(distributor.distributeAll(),plan.writeCookie(),tracker.enableEngagementTracking(),directive.shouldSkipPageTracking||(directive.delayPageviewTracking>0?setTimeout(function(){tracker.addActivationEvent(document.location.href)},directive.delayPageviewTracking):tracker.addActivationEvent(document.location.href)),tracker.sendLogEvents(),integrator.makeThirdPartyRequests()),plan.log(),directive.isEditor?api.finalize():directive.isEnabled&&(optly.client.rum.instance.recordEvent("beginEvaluate"),evaluator.evaluate(),api.finalize(),timer.flushLogs(),data.isInstallationVerified()||tracker.sendVerificationRequest()),setTimeout(function(){activator.activateGeoDelayedExperiments(api.visitor)},GEO_TIMEOUT),setTimeout(function(){!optly.client.preview.ENABLED&&directive.shouldTrackEvents&&optly.client.rum.instance.sendRum()},3e3),timer.addEvent("Main","End of main"),void optly.client.rum.instance.recordEvent("mainEnd"))):void preview_loader.loadSplashScreen("This preview link has expired. Please return to Optimizely and preview again to get a new link."))},main.log=function(){timer.addEvent("Info","Is Classic Optimizely enabled: "+directive.isEnabled),timer.addEvent("Info","Diagnostic enabled: "+optly.client.diagnostic.ENABLED),timer.addEvent("Info","Force variation enabled: "+data.isForceVariationEnabled()),timer.addEvent("Info","Browser type: "+user.getBrowserId()),timer.addEvent("Info","Browser version: "+user.getBrowserVersion());var e=user.getMobileId();"unknown"!==e&&timer.addEvent("Info","Mobile browser type: "+e),timer.addEvent("Info","New vs returning: "+user.getNewVsReturning()),timer.addEvent("Info","Source type: "+segmenter.getSourceType()),timer.addEvent("Info","User ID: "+id.getOrGenerateId())};var catchMain=optly.client.diagnostic.ENABLED?function(){try{main()}catch(e){tracker.sendErrorLog(e)}}:main;optly.client.preview.ENABLED||catchMain()},SLAVE_CLIENT={optimizely:[]};optimizelyCode(),optly.Cleanse.finish()}();